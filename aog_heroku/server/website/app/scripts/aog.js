!function(){function a(b){"use strict";var c,d=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=b,!b||!b.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return a.prototype.onClick.apply(d,arguments)},this.onMouse=function(){return a.prototype.onMouse.apply(d,arguments)},this.onTouchStart=function(){return a.prototype.onTouchStart.apply(d,arguments)},this.onTouchMove=function(){return a.prototype.onTouchMove.apply(d,arguments)},this.onTouchEnd=function(){return a.prototype.onTouchEnd.apply(d,arguments)},this.onTouchCancel=function(){return a.prototype.onTouchCancel.apply(d,arguments)},a.notNeeded(b)||(this.deviceIsAndroid&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(c=b.onclick,b.addEventListener("click",function(a){c(a)},!1),b.onclick=null))}define("version",[],function(){"use strict";return"v1.1.0"});var b=function(){function a(a){return null==a?String(a):U[V.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&Object.getPrototypeOf(a)==Object.prototype}function g(a){return"number"==typeof a.length}function h(a){return D.call(a,function(a){return null!=a})}function i(a){return a.length>0?x.fn.concat.apply([],a):a}function j(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function k(a){return a in G?G[a]:G[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function l(a,b){return"number"!=typeof b||H[j(a)]?b:b+"px"}function m(a){var b,c;return F[a]||(b=E.createElement(a),E.body.appendChild(b),c=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),F[a]=c),F[a]}function n(a){return"children"in a?C.call(a.children):x.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function o(a,b,c){for(w in b)c&&(f(b[w])||Z(b[w]))?(f(b[w])&&!f(a[w])&&(a[w]={}),Z(b[w])&&!Z(a[w])&&(a[w]=[]),o(a[w],b[w],c)):b[w]!==v&&(a[w]=b[w])}function p(a,b){return null==b?x(a):x(a).filter(b)}function q(a,c,d,e){return b(c)?c.call(a,d,e):c}function r(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function s(a,b){var c=a.className,d=c&&c.baseVal!==v;return b===v?d?c.baseVal:c:void(d?c.baseVal=b:a.className=b)}function t(a){var b;try{return a?"true"==a||("false"==a?!1:"null"==a?null:/^0/.test(a)||isNaN(b=Number(a))?/^[\[\{]/.test(a)?x.parseJSON(a):a:b):a}catch(c){return a}}function u(a,b){b(a);for(var c in a.childNodes)u(a.childNodes[c],b)}var v,w,x,y,z,A,B=[],C=B.slice,D=B.filter,E=window.document,F={},G={},H={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,K=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,L=/^(?:body|html)$/i,M=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=E.createElement("table"),Q=E.createElement("tr"),R={tr:E.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":E.createElement("div")},S=/complete|loaded|interactive/,T=/^[\w-]*$/,U={},V=U.toString,W={},X=E.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Z=Array.isArray||function(a){return a instanceof Array};return W.matches=function(a,b){if(!b||!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=X).appendChild(a),d=~W.qsa(e,b).indexOf(a),f&&X.removeChild(a),d},z=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},A=function(a){return D.call(a,function(b,c){return a.indexOf(b)==c})},W.fragment=function(a,b,c){var d,e,g;return J.test(a)&&(d=x(E.createElement(RegExp.$1))),d||(a.replace&&(a=a.replace(K,"<$1></$2>")),b===v&&(b=I.test(a)&&RegExp.$1),b in R||(b="*"),g=R[b],g.innerHTML=""+a,d=x.each(C.call(g.childNodes),function(){g.removeChild(this)})),f(c)&&(e=x(d),x.each(c,function(a,b){N.indexOf(a)>-1?e[a](b):e.attr(a,b)})),d},W.Z=function(a,b){return a=a||[],a.__proto__=x.fn,a.selector=b||"",a},W.isZ=function(a){return a instanceof W.Z},W.init=function(a,c){var d;if(!a)return W.Z();if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&I.test(a))d=W.fragment(a,RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}else{if(b(a))return x(E).ready(a);if(W.isZ(a))return a;if(Z(a))d=h(a);else if(e(a))d=[a],a=null;else if(I.test(a))d=W.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==v)return x(c).find(a);d=W.qsa(E,a)}}return W.Z(d,a)},x=function(a,b){return W.init(a,b)},x.extend=function(a){var b,c=C.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){o(a,c,b)}),a},W.qsa=function(a,b){var c,e="#"==b[0],f=!e&&"."==b[0],g=e||f?b.slice(1):b,h=T.test(g);return d(a)&&h&&e?(c=a.getElementById(g))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:C.call(h&&!e?f?a.getElementsByClassName(g):a.getElementsByTagName(b):a.querySelectorAll(b))},x.contains=function(a,b){return a!==b&&a.contains(b)},x.type=a,x.isFunction=b,x.isWindow=c,x.isArray=Z,x.isPlainObject=f,x.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},x.inArray=function(a,b,c){return B.indexOf.call(b,a,c)},x.camelCase=z,x.trim=function(a){return null==a?"":String.prototype.trim.call(a)},x.uuid=0,x.support={},x.expr={},x.map=function(a,b){var c,d,e,f=[];if(g(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return i(f)},x.each=function(a,b){var c,d;if(g(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},x.grep=function(a,b){return D.call(a,b)},window.JSON&&(x.parseJSON=JSON.parse),x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){U["[object "+b+"]"]=b.toLowerCase()}),x.fn={forEach:B.forEach,reduce:B.reduce,push:B.push,sort:B.sort,indexOf:B.indexOf,concat:B.concat,map:function(a){return x(x.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return x(C.apply(this,arguments))},ready:function(a){return S.test(E.readyState)&&E.body?a(x):E.addEventListener("DOMContentLoaded",function(){a(x)},!1),this},get:function(a){return a===v?C.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return B.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):x(D.call(this,function(b){return W.matches(b,a)}))},add:function(a,b){return x(A(this.concat(x(a,b))))},is:function(a){return this.length>0&&W.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==v)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):g(a)&&b(a.item)?C.call(a):x(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return x(c)},has:function(a){return this.filter(function(){return e(a)?x.contains(this,a):x(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:x(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:x(a)},find:function(a){var b,c=this;return b="object"==typeof a?x(a).filter(function(){var a=this;return B.some.call(c,function(b){return x.contains(b,a)})}):1==this.length?x(W.qsa(this[0],a)):this.map(function(){return W.qsa(this,a)})},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=x(a));c&&!(e?e.indexOf(c)>=0:W.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return x(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=x.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return p(b,a)},parent:function(a){return p(A(this.pluck("parentNode")),a)},children:function(a){return p(this.map(function(){return n(this)}),a)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(a){return p(this.map(function(a,b){return D.call(n(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return x.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=m(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=x(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){x(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){x(this[0]).before(a=x(a));for(var b;(b=a.children()).length;)a=b.first();x(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=x(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(x(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=x(this);(a===v?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return x(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return x(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;x(this).empty().append(q(this,a,b,c))})},text:function(a){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a===v?"":""+a})},attr:function(a,b){var c;return"string"==typeof a&&b===v?0==this.length||1!==this[0].nodeType?v:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:this.each(function(c){if(1===this.nodeType)if(e(a))for(w in a)r(this,w,a[w]);else r(this,a,q(this,b,c,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&r(this,a)})},prop:function(a,b){return a=Y[a]||a,b===v?this[0]&&this[0][a]:this.each(function(c){this[a]=q(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+a.replace(M,"-$1").toLowerCase(),b);return null!==c?t(c):v},val:function(a){return 0===arguments.length?this[0]&&(this[0].multiple?x(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(b){this.value=q(this,a,b,this.value)})},offset:function(a){if(a)return this.each(function(b){var c=x(this),d=q(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(0==this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2){var d=this[0],e=getComputedStyle(d,"");if(!d)return;if("string"==typeof b)return d.style[z(b)]||e.getPropertyValue(b);if(Z(b)){var f={};return x.each(Z(b)?b:[b],function(a,b){f[b]=d.style[z(b)]||e.getPropertyValue(b)}),f}}var g="";if("string"==a(b))c||0===c?g=j(b)+":"+l(b,c):this.each(function(){this.style.removeProperty(j(b))});else for(w in b)b[w]||0===b[w]?g+=j(w)+":"+l(w,b[w])+";":this.each(function(){this.style.removeProperty(j(w))});return this.each(function(){this.style.cssText+=";"+g})},index:function(a){return a?this.indexOf(x(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?B.some.call(this,function(a){return this.test(s(a))},k(a)):!1},addClass:function(a){return a?this.each(function(b){y=[];var c=s(this),d=q(this,a,b,c);d.split(/\s+/g).forEach(function(a){x(this).hasClass(a)||y.push(a)},this),y.length&&s(this,c+(c?" ":"")+y.join(" "))}):this},removeClass:function(a){return this.each(function(b){return a===v?s(this,""):(y=s(this),q(this,a,b,y).split(/\s+/g).forEach(function(a){y=y.replace(k(a)," ")}),void s(this,y.trim()))})},toggleClass:function(a,b){return a?this.each(function(c){var d=x(this),e=q(this,a,c,s(this));e.split(/\s+/g).forEach(function(a){(b===v?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var b="scrollTop"in this[0];return a===v?b?this[0].scrollTop:this[0].pageYOffset:this.each(b?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var b="scrollLeft"in this[0];return a===v?b?this[0].scrollLeft:this[0].pageXOffset:this.each(b?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=L.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(x(a).css("margin-top"))||0,c.left-=parseFloat(x(a).css("margin-left"))||0,d.top+=parseFloat(x(b[0]).css("border-top-width"))||0,d.left+=parseFloat(x(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||E.body;a&&!L.test(a.nodeName)&&"static"==x(a).css("position");)a=a.offsetParent;return a})}},x.fn.detach=x.fn.remove,["width","height"].forEach(function(a){var b=a.replace(/./,function(a){return a[0].toUpperCase()});x.fn[a]=function(e){var f,g=this[0];return e===v?c(g)?g["inner"+b]:d(g)?g.documentElement["scroll"+b]:(f=this.offset())&&f[a]:this.each(function(b){g=x(this),g.css(a,q(this,e,b,g[a]()))})}}),O.forEach(function(b,c){var d=c%2;x.fn[b]=function(){var b,e,f=x.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:W.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null,f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return x(a).remove();u(e.insertBefore(a,b),function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},x.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return x(a)[b](this),this}}),W.Z.prototype=x.fn,W.uniq=A,W.deserializeValue=t,x.zepto=W,x}();window.Zepto=b,void 0===window.$&&(window.$=b),function(a){function b(a){return a._zid||(a._zid=m++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(q[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(a,b){return a.del&&!s&&a.e in t||!!b}function g(a){return u[a]||s&&t[a]||a}function h(c,e,h,i,k,m,n){var o=b(c),p=q[o]||(q[o]=[]);e.split(/\s/).forEach(function(b){if("ready"==b)return a(document).ready(h);var e=d(b);e.fn=h,e.sel=k,e.e in u&&(h=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?e.fn.apply(this,arguments):void 0}),e.del=m;var o=m||h;e.proxy=function(a){if(a=j(a),!a.isImmediatePropagationStopped()){a.data=i;var b=o.apply(c,a._args==l?[a]:[a].concat(a._args));return b===!1&&(a.preventDefault(),a.stopPropagation()),b}},e.i=p.length,p.push(e),"addEventListener"in c&&c.addEventListener(g(e.e),e.proxy,f(e,n))})}function i(a,d,e,h,i){var j=b(a);(d||"").split(/\s/).forEach(function(b){c(a,b,e,h).forEach(function(b){delete q[j][b.i],"removeEventListener"in a&&a.removeEventListener(g(b.e),b.proxy,f(b,i))})})}function j(b,c){return(c||!b.isDefaultPrevented)&&(c||(c=b),a.each(y,function(a,d){var e=c[a];b[a]=function(){return this[d]=v,e&&e.apply(c,arguments)},b[d]=w}),(c.defaultPrevented!==l?c.defaultPrevented:"returnValue"in c?c.returnValue===!1:c.getPreventDefault&&c.getPreventDefault())&&(b.isDefaultPrevented=v)),b}function k(a){var b,c={originalEvent:a};for(b in a)x.test(b)||a[b]===l||(c[b]=a[b]);return j(c,a)}var l,m=1,n=Array.prototype.slice,o=a.isFunction,p=function(a){return"string"==typeof a},q={},r={},s="onfocusin"in window,t={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",a.event={add:h,remove:i},a.proxy=function(c,d){if(o(c)){var e=function(){return c.apply(d,arguments)};return e._zid=b(c),e}if(p(d))return a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b,c){return this.on(a,b,c)},a.fn.unbind=function(a,b){return this.off(a,b)},a.fn.one=function(a,b,c,d){return this.on(a,b,c,d,1)};var v=function(){return!0},w=function(){return!1},x=/^([A-Z]|returnValue$|layer[XY]$)/,y={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(a,b,c){return this.on(b,a,c)},a.fn.undelegate=function(a,b,c){return this.off(b,a,c)},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d,e,f){var g,j,m=this;return b&&!p(b)?(a.each(b,function(a,b){m.on(a,c,d,b,f)}),m):(p(c)||o(e)||e===!1||(e=d,d=c,c=l),(o(d)||d===!1)&&(e=d,d=l),e===!1&&(e=w),m.each(function(l,m){f&&(g=function(a){return i(m,a.type,e),e.apply(this,arguments)}),c&&(j=function(b){var d,f=a(b.target).closest(c,m).get(0);return f&&f!==m?(d=a.extend(k(b),{currentTarget:f,liveFired:m}),(g||e).apply(f,[d].concat(n.call(arguments,1)))):void 0}),h(m,b,e,d,c,j||g)}))},a.fn.off=function(b,c,d){var e=this;return b&&!p(b)?(a.each(b,function(a,b){e.off(a,c,b)}),e):(p(c)||o(d)||d===!1||(d=c,c=l),d===!1&&(d=w),e.each(function(){i(this,b,d,c)}))},a.fn.trigger=function(b,c){return b=p(b)||a.isPlainObject(b)?a.Event(b):j(b),b._args=c,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(b):a(this).triggerHandler(b,c)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k(p(b)?a.Event(b):b),e._args=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.each(function(){try{this[b]()}catch(a){}}),this}}),a.Event=function(a,b){p(a)||(b=a,a=b.type);var c=document.createEvent(r[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0),j(c)}}(b),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.isDefaultPrevented()}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:void c(b,d,"ajaxSend",[a,b])}function g(a,b,d,e){var f=d.context,g="success";d.success.call(f,a,g,b),e&&e.resolveWith(f,[a,g,b]),c(d,f,"ajaxSuccess",[b,d,a]),i(g,b,d)}function h(a,b,d,e,f){var g=e.context;e.error.call(g,d,b,a),f&&f.rejectWith(g,[d,b,a]),c(e,g,"ajaxError",[d,e,a||b]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return""==b?a:(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data),b.data=void 0)}function n(b,c,d,e){return a.isFunction(c)&&(e=d,d=c,c=void 0),a.isFunction(d)||(e=d,d=void 0),{url:b,data:c,success:d,dataType:e}}function o(b,c,d,e){var f,g=a.isArray(c),h=a.isPlainObject(c);a.each(c,function(c,i){f=a.type(i),e&&(c=d?e:e+"["+(h||"object"==f||"array"==f?c:"")+"]"),!e&&g?b.add(i.name,i.value):"array"==f||!d&&"object"==f?o(b,i,d,c):b.add(c,i)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(b,c){if(!("type"in b))return a.ajax(b);var d,e,i=b.jsonpCallback,j=(a.isFunction(i)?i():i)||"jsonp"+ ++r,k=s.createElement("script"),l=window[j],m=function(b){a(k).triggerHandler("error",b||"abort")},n={abort:m};return c&&c.promise(n),a(k).on("load error",function(f,i){clearTimeout(e),a(k).off().remove(),"error"!=f.type&&d?g(d[0],n,b,c):h(null,i||"error",n,b,c),window[j]=l,d&&a.isFunction(l)&&l(d[0]),l=d=void 0}),f(n,b)===!1?(m("abort"),n):(window[j]=function(){d=arguments},k.src=b.url.replace(/\?(.+)=\?/,"?$1="+j),s.head.appendChild(k),b.timeout>0&&(e=setTimeout(function(){m("timeout")},b.timeout)),n)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c=a.extend({},b||{}),e=a.Deferred&&a.Deferred();for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),m(c),c.cache===!1&&(c.url=l(c.url,"_="+Date.now()));var i=c.dataType,n=/\?.+=\?/.test(c.url);if("jsonp"==i||n)return n||(c.url=l(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),a.ajaxJSONP(c,e);var o,r=c.accepts[i],s={},t=function(a,b){s[a.toLowerCase()]=[a,b]},u=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,v=c.xhr(),w=v.setRequestHeader;if(e&&e.promise(v),c.crossDomain||t("X-Requested-With","XMLHttpRequest"),t("Accept",r||"*/*"),(r=c.mimeType||r)&&(r.indexOf(",")>-1&&(r=r.split(",",2)[0]),v.overrideMimeType&&v.overrideMimeType(r)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&t("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(q in c.headers)t(q,c.headers[q]);if(v.setRequestHeader=t,v.onreadystatechange=function(){if(4==v.readyState){v.onreadystatechange=j,clearTimeout(o);var b,d=!1;if(v.status>=200&&v.status<300||304==v.status||0==v.status&&"file:"==u){i=i||k(c.mimeType||v.getResponseHeader("content-type")),b=v.responseText;try{"script"==i?(1,eval)(b):"xml"==i?b=v.responseXML:"json"==i&&(b=y.test(b)?null:a.parseJSON(b))}catch(f){d=f}d?h(d,"parsererror",v,c,e):g(b,v,c,e)}else h(v.statusText||null,v.status?"error":"abort",v,c,e)}},f(v,c)===!1)return v.abort(),h(null,"abort",v,c,e),v;if(c.xhrFields)for(q in c.xhrFields)v[q]=c.xhrFields[q];var x="async"in c?c.async:!0;v.open(c.type,c.url,x,c.username,c.password);for(q in s)w.apply(v,s[q]);return c.timeout>0&&(o=setTimeout(function(){v.onreadystatechange=j,v.abort(),h(null,"timeout",v,c,e)},c.timeout)),v.send(c.data?c.data:null),v},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var z=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(z(a)+"="+z(b))},o(c,a,b),c.join("&").replace(/%20/g,"+")}}(b),function(a){a.fn.serializeArray=function(){var b,c=[];return a([].slice.call(this.get(0).elements)).each(function(){b=a(this);var d=b.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&c.push({name:b.attr("name"),value:b.val()})}),c},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.isDefaultPrevented()||this.get(0).submit()}return this}}(b),function(a){"__proto__"in{}||a.extend(a.zepto,{Z:function(b,c){return b=b||[],a.extend(b,a.fn),b.selector=c||"",b.__Z=!0,b},isZ:function(b){return"array"===a.type(b)&&"__Z"in b}});try{getComputedStyle(void 0)}catch(b){var c=getComputedStyle;window.getComputedStyle=function(a){try{return c(a)}catch(b){return null}}}}(b),define("zepto",function(a){return function(){var b;return b||a.Zepto}}(this)),function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a){return function(b){return this.lang().ordinal(a.call(this,b))}}function d(){}function e(a){g(this,a)}function f(a){var b=this._data={},c=a.years||a.year||a.y||0,d=a.months||a.month||a.M||0,e=a.weeks||a.week||a.w||0,f=a.days||a.day||a.d||0,g=a.hours||a.hour||a.h||0,i=a.minutes||a.minute||a.m||0,j=a.seconds||a.second||a.s||0,k=a.milliseconds||a.millisecond||a.ms||0;this._milliseconds=k+1e3*j+6e4*i+36e5*g,this._days=f+7*e,this._months=d+12*c,b.milliseconds=k%1e3,j+=h(k/1e3),b.seconds=j%60,i+=h(j/60),b.minutes=i%60,g+=h(i/60),b.hours=g%24,f+=h(g/24),f+=7*e,b.days=f%30,d+=h(f/30),b.months=d%12,c+=h(d/12),b.years=c}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c){var d,e=b._milliseconds,f=b._days,g=b._months;e&&a._d.setTime(+a+e*c),f&&a.date(a.date()+f*c),g&&(d=a.date(),a.date(1).month(a.month()+g*c).date(Math.min(d,a.daysInMonth())))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function m(a,b){return b.abbr=a,J[a]||(J[a]=new d),J[a].set(b),J[a]}function n(a){return a?(!J[a]&&K&&require("./lang/"+a),J[a]):F.fn._lang}function o(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function p(a){var b,c,d=a.match(M);for(b=0,c=d.length;c>b;b++)d[b]=eb[d[b]]?eb[d[b]]:o(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+="function"==typeof d[b].call?d[b].call(e,a):d[b];return f}}function q(a,b){function c(b){return a.lang().longDateFormat(b)||b}for(var d=5;d--&&N.test(b);)b=b.replace(N,c);return bb[b]||(bb[b]=p(b)),bb[b](a)}function r(a){switch(a){case"DDDD":return Q;case"YYYY":return R;case"YYYYY":return S;case"S":case"SS":case"SSS":case"DDD":return P;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return T;case"X":return W;case"Z":case"ZZ":return U;case"T":return V;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return O;default:return new RegExp(a.replace("\\",""))}}function s(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":e[1]=null==b?0:~~b-1;break;case"MMM":case"MMMM":d=n(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=b&&(e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm="pm"===(b+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,d=(b+"").match($),d&&d[1]&&(c._tzh=~~d[1]),d&&d[2]&&(c._tzm=~~d[2]),d&&"+"===d[0]&&(c._tzh=-c._tzh,c._tzm=-c._tzm)}null==b&&(c._isValid=!1)}function t(a){var b,c,d=[];if(!a._d){for(b=0;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];d[3]+=a._tzh||0,d[4]+=a._tzm||0,c=new Date(0),a._useUTC?(c.setUTCFullYear(d[0],d[1],d[2]),c.setUTCHours(d[3],d[4],d[5],d[6])):(c.setFullYear(d[0],d[1],d[2]),c.setHours(d[3],d[4],d[5],d[6])),a._d=c}}function u(a){var b,c,d=a._f.match(M),e=a._i;for(a._a=[],b=0;b<d.length;b++)c=(r(d[b]).exec(e)||[])[0],c&&(e=e.slice(e.indexOf(c)+c.length)),eb[d[b]]&&s(d[b],c,a);a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),t(a)}function v(a){for(var b,c,d,f,h=99;a._f.length;){if(b=g({},a),b._f=a._f.pop(),u(b),c=new e(b),c.isValid()){d=c;break}f=l(b._a,c.toArray()),h>f&&(h=f,d=c)}g(a,d)}function w(a){var b,c=a._i;if(X.exec(c)){for(a._f="YYYY-MM-DDT",b=0;4>b;b++)if(Z[b][1].exec(c)){a._f+=Z[b][0];break}U.exec(c)&&(a._f+=" Z"),u(a)}else a._d=new Date(c)}function x(b){var c=b._i,d=L.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?w(b):k(c)?(b._a=c.slice(0),t(b)):b._d=new Date(c instanceof Date?+c:c)}function y(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function z(a,b,c){var d=I(Math.abs(a)/1e3),e=I(d/60),f=I(e/60),g=I(f/24),h=I(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",I(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,y.apply({},i)}function A(a,b,c){var d=c-b,e=c-a.day();return e>d&&(e-=7),d-7>e&&(e+=7),Math.ceil(F(a).add("d",e).dayOfYear()/7)}function B(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=n().preparse(b)),F.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?v(a):u(a):x(a),new e(a))}function C(a,b){F.fn[a]=F.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function D(a){F.duration.fn[a]=function(){return this._data[a]}}function E(a,b){F.duration.fn["as"+a]=function(){return+this/b}}for(var F,G,H="2.0.0",I=Math.round,J={},K="undefined"!=typeof module&&module.exports,L=/^\/?Date\((\-?\d+)/i,M=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,O=/\d\d?/,P=/\d{1,3}/,Q=/\d{3}/,R=/\d{1,4}/,S=/[+\-]?\d{1,6}/,T=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,U=/Z|[\+\-]\d\d:?\d\d/i,V=/T/i,W=/[\+\-]?\d+(\.\d{1,3})?/,X=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,Y="YYYY-MM-DDTHH:mm:ssZ",Z=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],$=/([\+\-]|\d\d)/gi,_="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ab={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},bb={},cb="DDD w W M D d".split(" "),db="M D H h m s w W".split(" "),eb={M:function(){return this.month()+1
},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return i(~~(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(a/60),2)+":"+i(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(10*a/6),4)},X:function(){return this.unix()}};cb.length;)G=cb.pop(),eb[G+"o"]=c(eb[G]);for(;db.length;)G=db.pop(),eb[G+G]=b(eb[G],2);for(eb.DDDD=b(eb.DDD,3),d.prototype={set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=F([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return A(a,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},F=function(a,b,c){return B({_i:a,_f:b,_l:c,_isUTC:!1})},F.utc=function(a,b,c){return B({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b})},F.unix=function(a){return F(1e3*a)},F.duration=function(a,b){var c,d=F.isDuration(a),e="number"==typeof a,g=d?a._data:e?{}:a;return e&&(b?g[b]=a:g.milliseconds=a),c=new f(g),d&&a.hasOwnProperty("_lang")&&(c._lang=a._lang),c},F.version=H,F.defaultFormat=Y,F.lang=function(a,b){return a?(b?m(a,b):J[a]||n(a),void(F.duration.fn._lang=F.fn._lang=n(a))):F.fn._lang._abbr},F.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),n(a)},F.isMoment=function(a){return a instanceof e},F.isDuration=function(a){return a instanceof f},F.fn=e.prototype={clone:function(){return F(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return F.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!l(this._a,(this._isUTC?F.utc(this._a):F(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(a){var b=q(this,a||F.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?F.duration(+b,a):F.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?F.duration(+b,a):F.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?F(a).utc():F(a).local(),g=6e4*(this.zone()-f.zone());return b&&(b=b.replace(/s$/,"")),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-F(this).startOf("month")-(f-F(f).startOf("month")))/d,"year"===b&&(e/=12)):(d=this-f-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?d/864e5:"week"===b?d/6048e5:d),c?e:h(e)},from:function(a,b){return F.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(F(),a)},calendar:function(){var a=this.diff(F().startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return a%4===0&&a%100!==0||a%400===0},isDST:function(){return this.zone()<F([this.year()]).zone()||this.zone()<F([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==a?b:this.add({d:a-b})},startOf:function(a){switch(a=a.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.day(0),this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+F(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+F(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+F(a).startOf(b)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return F.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=I((F(this).startOf("day")-F(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},isoWeek:function(a){var b=A(this,1,4);return null==a?b:this.add("d",7*(a-b))},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},lang:function(b){return b===a?this._lang:(this._lang=n(b),this)}},G=0;G<_.length;G++)C(_[G].toLowerCase().replace(/s$/,""),_[G]);C("year","FullYear"),F.fn.days=F.fn.day,F.fn.weeks=F.fn.week,F.fn.isoWeeks=F.fn.isoWeek,F.duration.fn=f.prototype={weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(a){var b=+this,c=z(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},lang:F.fn.lang};for(G in ab)ab.hasOwnProperty(G)&&(E(G,ab[G]),D(G.toLowerCase()));E("Weeks",6048e5),F.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),K&&(module.exports=F),"function"==typeof define&&define.amd&&define("moment",[],function(){return F})}.call(this),function(){var a={months:"Januar_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),longDateFormat:{L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm U\\hr",LLLL:"dddd, D. MMMM YYYY HH:mm U\\hr"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:"einer Minute",mm:"%d Minuten",h:"einer Stunde",hh:"%d Stunden",d:"einem Tag",dd:"%d Tagen",M:"einem Monat",MM:"%d Monaten",y:"einem Jahr",yy:"%d Jahren"},ordinal:function(){return"."}};"function"==typeof require&&require(["moment"],function(b){b.lang("de",a)})}(),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.6.0";var y=x.each=x.forEach=function(a,b,d){if(null==a)return a;if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return;return a};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,x.property(b))},x.where=function(a,b){return x.filter(a,x.matches(b))},x.findWhere=function(a,b){return x.find(a,x.matches(b))},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return y(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=x.values(a)),a[x.random(a.length-1)]):x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return null==a?x.identity:x.isFunction(a)?a:x.property(a)};x.sortBy=function(a,b,c){return b=B(b),x.pluck(x.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={};return c=B(c),y(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};x.groupBy=C(function(a,b,c){x.has(a,b)?a[b].push(c):a[b]=[c]}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.partition=function(a,b){var c=[],d=[];return y(a,function(a){(b(a)?c:d).push(a)}),[c,d]},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.contains(b,a)})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===x&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:x.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=x.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=x.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=x.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return x.partial(b,a)},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=function(a){if(!x.isObject(a))return[];if(v)return v(a);var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.constant=function(a){return function(){return a}},x.property=function(a){return function(b){return b[a]}},x.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},x.now=Date.now||function(){return(new Date).getTime()};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}.call(this),function(a,b){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c,d=require("underscore");try{c=require("jquery")}catch(e){}b(a,exports,d,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){{var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice}b.VERSION="1.1.1",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);
var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?(.*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),define("common",["require","zepto","underscore","backbone","moment"],function(a){"use strict";var b,c,d,e,f=a("zepto"),g=a("underscore"),h=a("backbone"),i=a("moment"),j={},k="aog-",l=3;return f(document).ready(function(){b=f("html,body"),c=f(document),d=f("#notification"),d.on("click",function(){d.hide().html("")})}),j=g.extend(j,{PAGED_EDIT_LOCK:!1,dateFormats:{de:{DATE_FORMAT:"YYYY-MM-DD",DATE_FORMAT_OUT:"DD.MM.YYYY HH:mm"},en:{DATE_FORMAT:"YYYY-MM-DD",DATE_FORMAT_OUT:"MM/DD/YYYY h:mm A"}},TodoFilter:"",showDefaultLoader:function(){return j.closeNotify(),f("#app-loader").show(),this},hideDefaultLoader:function(){return f("#app-loader").hide(),this},showLoader:function(){return this.showDefaultLoader(),this},hideLoader:function(){return this.hideDefaultLoader(),this},lockScreen:function(){j.PAGED_EDIT_LOCK=!0},unlockScreen:function(){j.PAGED_EDIT_LOCK=!1},isScreenLocked:function(){return j.PAGED_EDIT_LOCK},hideSplashscreen:function(){navigator&&navigator.splashscreen&&navigator.splashscreen.hide()},notify:function(a,b,c){return g.isFunction(c)||(c=function(){}),d?(e&&clearTimeout(e),j.closeNotify(),d.html("<p>"+a+"</p>").show(),void(e=setTimeout(function(){j.closeNotify()},b||7e3))):!1},closeNotify:function(){return d?void d.hide().html(""):!1},dialog:function(a,b,c){if(g.isFunction(b)||(b=function(){}),c)if(__app_config__.touch&&navigator.notification){var d=function(a){b(1===a)};navigator.notification.confirm(a,d,__("Confirm"),[__("yes"),__("no")])}else{var e=window.confirm(a);g.isFunction(b)&&b(e)}else __app_config__.touch&&navigator.notification?navigator.notification.alert(a,b,"Info",__("close")):window.alert(a)},hasDate:function(a){return"object"!=typeof a?!1:"undefined"==typeof a||"undefined"==typeof a.created_at||"undefined"==typeof a.updated_at||"string"!=typeof a.created_at&&"string"!=typeof a.updated_at?!1:!0},parseDate:function(a,b){try{return i(a).format(j.dateFormats[b].DATE_FORMAT_OUT)}catch(c){return""}},fromNow:function(a,b,c){try{a=parseInt(a,10);var d=new Date(a);return i.lang(c),i(d).fromNow(b)}catch(e){return""}},now:function(a){try{return i().format(j.dateFormats[a].DATE_FORMAT)}catch(b){return""}},diffInDaysFromNowTo:function(a,b){return i().format(j.dateFormats[b].DATE_FORMAT).diff(i(a,j.dateFormats[b].DATE_FORMAT),"days")},getUser:function(a,b){return g.isObject(a)&&a.updated_by&&a.created_by?b?a.updated_by.display_name:a.created_by.display_name:__("unknown")},getDateParser:function(a){switch(a){case"en":return{parse:function(a){var b;if(b=a.match(/^(\d{2,2})\/(\d{2,2})\/(\d{4,4}) (\d{1,2}):(\d{2,2}) (AM|PM)$/)){var c=b[6].toLowerCase(),d=parseInt(b[4],10),e=parseInt(b[5],10);return"pm"===c&&(d+=12),new Date(b[3],b[1]-1,b[2],d,e)}return null},format:function(a){var b="AM",c=(a.getMonth()+1).toString(),d=a.getDate().toString(),e=a.getHours(),f=a.getMinutes().toString();return 1===c.length&&(c="0"+c),1===d.length&&(d="0"+d),e>=12&&(b="PM",e-=12),e=e.toString(),1===e.length&&(e="0"+e),1===f.length&&(f="0"+f),c+"/"+d+"/"+a.getFullYear()+" "+e+":"+f+" "+b}};case"de":return{parse:function(a){var b;if(b=a.match(/^(\d{2,2})\.(\d{2,2})\.(\d{4,4}) (\d{2,2}):(\d{2,2})$/)){var c=parseInt(b[4],10),d=parseInt(b[5],10);return new Date(b[3],b[2]-1,b[1],c,d)}return null},format:function(a){var b=(a.getMonth()+1).toString(),c=a.getDate().toString(),d=a.getHours().toString(),e=a.getMinutes().toString();return 1===b.length&&(b="0"+b),1===c.length&&(c="0"+c),1===d.length&&(d="0"+d),1===e.length&&(e="0"+e),c+"."+b+"."+a.getFullYear()+" "+d+":"+e}}}},getUserActiveDays:function(a,b){var c=i(a.active_since).add("days",l),d=j.fromNow(c.toDate().getTime(),!0,b);return d},scrollTop:function(){var a=f("#app-main .content")[0];return a?(a.scrollTop=0,this):!1},scrollBottom:function(){if(!c)return!1;var a=f("#app-main .content")[0];return a?(a.scrollTop=c.height(),this):!1},isValidMail:function(a){return"string"!=typeof a?!1:/^[a-zA-Z0-9._\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,4}$/.test(a)},generateNameFromEmail:function(a){if(!j.isValidMail(a))return"---";var b=a.split("@")[0];return b},store:{set:function(a,b){if(!g.isString(b))throw"must provide a string";return localStorage.setItem(k+a,b)},get:function(a){if(!a)return null;var b=localStorage.getItem(k+a);return b?b:null},drop:function(a){return localStorage.removeItem(k+a)}},notifyIOUpdate:function(a){if(__app_config__.isPaused||!a)return!1;var b=500;if(!__app_config__.touch||!navigator.notification)return j.notify(__("ioUpdate"));j.vibrate(b,a);try{}catch(c){}},vibrate:function(a,b){if(!navigator.notification||!navigator.notification.vibrate)return!1;if("object"!=typeof b)return!1;if(b.vibrate!==!0)return!1;try{navigator.notification.vibrate(a)}catch(c){}},random:function(a){var b,c,d=[],e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",f=e.length;for(b=0;a>b;b++)c=Math.floor(Math.random()*f),d.push(e.charAt(c));return d.join("")},escape:function(a){return a.replace(/&/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},base64Encode:function(a){if(!window.btoa)throw"Native Base64 encoding not supported in this browser";if(!g.isString(a))throw"Base64 encoding - no string: "+a;var b=window.btoa(unescape(encodeURIComponent(a)));return b}},h.Events)}),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd&&define("i18next",[],b)}(this,function(){function a(a,b){if(!b||"function"==typeof b)return a;for(var c in b)a[c]=b[c];return a}function b(a,b,c){var d,e=0,f=a.length,g=void 0===f||"function"==typeof a;if(c)if(g){for(d in a)if(b.apply(a[d],c)===!1)break}else for(;f>e&&b.apply(a[e++],c)!==!1;);else if(g){for(d in a)if(b.call(a[d],d,a[d])===!1)break}else for(;f>e&&b.call(a[e],e,a[e++])!==!1;);return a}function c(a){var b=function(a){if(window.XMLHttpRequest)return a(null,new XMLHttpRequest);if(window.ActiveXObject)try{return a(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){return a(null,new ActiveXObject("Microsoft.XMLHTTP"))}return a(new Error)},c=function(a){if("string"==typeof a)return a;var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},d=function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},e=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a=d(a);var c,e,f,g,h,i,j,k="",l=0;do c=a.charCodeAt(l++),e=a.charCodeAt(l++),f=a.charCodeAt(l++),g=c>>2,h=(3&c)<<4|e>>4,i=(15&e)<<2|f>>6,j=63&f,isNaN(e)?i=j=64:isNaN(f)&&(j=64),k+=b.charAt(g)+b.charAt(h)+b.charAt(i)+b.charAt(j),c=e=f="",g=h=i=j="";while(l<a.length);return k},f=function(){for(var a=arguments[0],b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a},g=function(a,d,e,h){"function"==typeof e&&(h=e,e={}),e.cache=e.cache||!1,e.data=e.data||{},e.headers=e.headers||{},e.jsonp=e.jsonp||!1,e.async=void 0===e.async?!0:e.async;var i,j=f({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},g.headers,e.headers);if(i="application/json"===j["content-type"]?JSON.stringify(e.data):c(e.data),"GET"===a){var k=[];if(i&&(k.push(i),i=null),e.cache||k.push("_="+(new Date).getTime()),e.jsonp&&(k.push("callback="+e.jsonp),k.push("jsonp="+e.jsonp)),k=k.join("&"),k.length>1&&(d+=d.indexOf("?")>-1?"&"+k:"?"+k),e.jsonp){var l=document.getElementsByTagName("head")[0],m=document.createElement("script");return m.type="text/javascript",m.src=d,void l.appendChild(m)}}b(function(b,c){if(b)return h(b);c.open(a,d,e.async);for(var f in j)j.hasOwnProperty(f)&&c.setRequestHeader(f,j[f]);c.onreadystatechange=function(){if(4===c.readyState){var a=c.responseText||"";if(!h)return;h(c.status,{text:function(){return a},json:function(){return JSON.parse(a)}})}},c.send(i)})},h={authBasic:function(a,b){g.headers.Authorization="Basic "+e(a+":"+b)},connect:function(a,b,c){return g("CONNECT",a,b,c)},del:function(a,b,c){return g("DELETE",a,b,c)},get:function(a,b,c){return g("GET",a,b,c)},head:function(a,b,c){return g("HEAD",a,b,c)},headers:function(a){g.headers=a||{}},isAllowed:function(a,b,c){this.options(a,function(a,d){c(-1!==d.text().indexOf(b))})},options:function(a,b,c){return g("OPTIONS",a,b,c)},patch:function(a,b,c){return g("PATCH",a,b,c)},post:function(a,b,c){return g("POST",a,b,c)},put:function(a,b,c){return g("PUT",a,b,c)},trace:function(a,b,c){return g("TRACE",a,b,c)}},i=a.type?a.type.toLowerCase():"get";h[i](a.url,a,function(b,c){200===b?a.success(c.json(),b,null):a.error(c.text(),b,null)})}function d(a,b){"function"==typeof a&&(b=a,a={}),a=a||{},D.extend(A,a),"string"==typeof A.ns&&(A.ns={namespaces:[A.ns],defaultNs:A.ns}),A.interpolationPrefixEscaped=D.regexEscape(A.interpolationPrefix),A.interpolationSuffixEscaped=D.regexEscape(A.interpolationSuffix),A.lng||(A.lng=D.detectLanguage()),A.lng?A.useCookie&&D.cookie.create(A.cookieName,A.lng,A.cookieExpirationTime):(A.lng=A.fallbackLng,A.useCookie&&D.cookie.remove(A.cookieName)),z=D.toLanguages(A.lng),u=z[0],D.log("currentLng set to: "+u),F.setCurrentLng(u),v&&A.setJqueryExt&&m();var c;if(v&&v.Deferred&&(c=v.Deferred()),!A.resStore){var d=D.toLanguages(A.lng);"string"==typeof A.preload&&(A.preload=[A.preload]);for(var e=0,f=A.preload.length;f>e;e++)for(var g=D.toLanguages(A.preload[e]),h=0,i=g.length;i>h;h++)d.indexOf(g[h])<0&&d.push(g[h]);return w.sync.load(d,A,function(a,d){x=d,b&&b(r),c&&c.resolve()}),c?c.promise():void 0}return x=A.resStore,b&&b(r),c&&c.resolve(),c?c.promise():void 0}function e(a,b){"string"==typeof a&&(a=[a]);for(var c=0,e=a.length;e>c;c++)A.preload.indexOf(a[c])<0&&A.preload.push(a[c]);return d(b)}function f(a,b,c){"string"!=typeof b&&(c=b,b=A.ns.defaultNs),x[a]=x[a]||{},x[a][b]=x[a][b]||{},D.extend(x[a][b],c)}function g(a){A.ns.defaultNs=a}function h(a,b){i([a],b)}function i(a,b){var c={dynamicLoad:A.dynamicLoad,resGetPath:A.resGetPath,getAsync:A.getAsync,ns:{namespaces:a,defaultNs:""}},d=D.toLanguages(A.lng);"string"==typeof A.preload&&(A.preload=[A.preload]);for(var e=0,f=A.preload.length;f>e;e++)for(var g=D.toLanguages(A.preload[e]),h=0,i=g.length;i>h;h++)d.indexOf(g[h])<0&&d.push(g[h]);for(var j=[],k=0,l=d.length;l>k;k++){var m=!1,n=x[d[k]];if(n)for(var o=0,p=a.length;p>o;o++)n[a[o]]||(m=!0);else m=!0;m&&j.push(d[k])}j.length?w.sync._fetch(j,c,function(c,d){var e=a.length*j.length;D.each(a,function(a,c){D.each(j,function(a,f){x[f]=x[f]||{},x[f][c]=d[f][c],e--,0===e&&b&&(A.useLocalStorage&&w.sync._storeLocal(x),b())})})}):b&&b()}function j(a,b){return d({lng:a},b)}function l(){return u}function m(){function a(a,b,c){if(0!==b.length){var d="text";if(0===b.indexOf("[")){var e=b.split("]");b=e[1],d=e[0].substr(1,e[0].length-1)}b.indexOf(";")===b.length-1&&(b=b.substr(0,b.length-2));var f;"html"===d?(f=A.defaultValueFromContent?v.extend({defaultValue:a.html()},c):c,a.html(v.t(b,f))):"text"===d?(f=A.defaultValueFromContent?v.extend({defaultValue:a.text()},c):c,a.text(v.t(b,f))):(f=A.defaultValueFromContent?v.extend({defaultValue:a.attr(d)},c):c,a.attr(d,v.t(b,f)))}}function b(b,c){var d=b.attr(A.selectorAttr);if(d){var e=b,f=b.data("i18n-target");if(f&&(e=b.find(f)||b),c||A.useDataAttrOptions!==!0||(c=b.data("i18n-options")),c=c||{},d.indexOf(";")<=d.length-1){var g=d.split(";");v.each(g,function(b,d){a(e,d,c)})}else a(e,k,c);A.useDataAttrOptions===!0&&b.data("i18n-options",c)}}v.t=v.t||r,v.fn.i18n=function(a){return this.each(function(){b(v(this),a);var c=v(this).find("["+A.selectorAttr+"]");c.each(function(){b(v(this),a)})})}}function n(a,b,c,d){if(d=d||b,a.indexOf(d.interpolationPrefix||A.interpolationPrefix)<0)return a;var e=d.interpolationPrefix?D.regexEscape(d.interpolationPrefix):A.interpolationPrefixEscaped,f=d.interpolationSuffix?D.regexEscape(d.interpolationSuffix):A.interpolationSuffixEscaped;return D.each(b,function(b,g){a="object"==typeof g&&null!==g?n(a,g,c?c+A.keyseparator+b:b,d):a.replace(new RegExp([e,c?c+A.keyseparator+b:b,f].join(""),"g"),g)}),a}function o(a,b){var c=",",d="{",e="}",f=D.extend({},b);for(delete f.postProcess;-1!=a.indexOf(A.reusePrefix)&&(y++,!(y>A.maxRecursion));){var g=a.indexOf(A.reusePrefix),h=a.indexOf(A.reuseSuffix,g)+A.reuseSuffix.length,i=a.substring(g,h),j=i.replace(A.reusePrefix,"").replace(A.reuseSuffix,"");if(-1!=j.indexOf(c)){var k=j.indexOf(c);if(-1!=j.indexOf(d,k)&&-1!=j.indexOf(e,k)){var l=j.indexOf(d,k),m=j.indexOf(e,l)+e.length;try{f=D.extend(f,JSON.parse(j.substring(l,m))),j=j.substring(0,k)}catch(n){}}}var o=s(j,f);a=a.replace(i,o)}return a}function p(a){return a.context&&"string"==typeof a.context}function q(a){return void 0!==a.count&&"string"!=typeof a.count&&1!==a.count}function r(a,b){return y=0,s(a,b)}function s(a,b){if(b=b||{},!x)return e;var c,d,e=b.defaultValue||a,f=z;if(b.lng&&(f=D.toLanguages(b.lng),!x[f[0]])){var g=A.getAsync;A.getAsync=!1,w.sync.load(f,A,function(a,b){D.extend(x,b),A.getAsync=g})}var h=b.ns||A.ns.defaultNs;if(a.indexOf(A.nsseparator)>-1){var i=a.split(A.nsseparator);h=i[0],a=i[1]}if(p(b)){c=D.extend({},b),delete c.context,c.defaultValue=A.contextNotFound;var j=h+A.nsseparator+a+"_"+b.context;if(d=r(j,c),d!=A.contextNotFound)return n(d,{context:b.context})}if(q(b)){c=D.extend({},b),delete c.count,c.defaultValue=A.pluralNotFound;var k=h+A.nsseparator+a+A.pluralSuffix,l=F.get(u,b.count);if(l>=0?k=k+"_"+l:1===l&&(k=h+A.nsseparator+a),d=r(k,c),d!=A.pluralNotFound)return n(d,{count:b.count})}for(var m,t=a.split(A.keyseparator),v=0,y=f.length;y>v&&!m;v++){for(var B=f[v],C=0,H=x[B]&&x[B][h];t[C];)H=H&&H[t[C]],C++;if(void 0!==H){if("string"==typeof H)H=n(H,b),H=o(H,b);else if("[object Array]"!==Object.prototype.toString.apply(H)||A.returnObjectTrees||b.returnObjectTrees)if(A.returnObjectTrees||b.returnObjectTrees){var I={};for(var J in H)I[J]=s(h+A.nsseparator+a+A.keyseparator+J,b);H=I}else H="key '"+h+":"+a+" ("+B+")' returned a object instead of string.",D.log(H);else H=H.join("\n"),H=n(H,b),H=o(H,b);m=H}}void 0===m&&A.fallbackToDefaultNS&&(m=s(a,b)),void 0===m&&A.sendMissing&&(b.lng?E.postMissing(f[0],h,a,e,f):E.postMissing(A.lng,h,a,e,f));var K=b.postProcess||A.postProcess;return void 0!==m&&K&&G[K]&&(m=G[K](m,a,b)),void 0===m&&(e=n(e,b),e=o(e,b)),void 0!==m?m:e}function t(){var a,b=[];if("undefined"!=typeof window&&(!function(){for(var a=window.location.search.substring(1),c=a.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("=");if(e>0){var f=c[d].substring(0,e),g=c[d].substring(e+1);b[f]=g}}}(),b[A.detectLngQS]&&(a=b[A.detectLngQS])),!a&&"undefined"!=typeof document&&A.useCookie){var c=D.cookie.read(A.cookieName);c&&(a=c)}return a||"undefined"==typeof navigator||(a=navigator.language?navigator.language:navigator.userLanguage),a}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&1/0!=d&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1});var u,v=void 0,w={},x={},y=0,z=[],A={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",detectLngQS:"setLng",ns:"translation",fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",postProcess:void 0},B={create:function(a,b,c){var d;if(c){var e=new Date;e.setTime(e.getTime()+60*c*1e3),d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"},read:function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},remove:function(a){this.create(a,"",-1)}},C={create:function(){},read:function(){return null},remove:function(){}},D={extend:v?v.extend:a,each:v?v.each:b,ajax:v?v.ajax:c,cookie:"undefined"!=typeof document?B:C,detectLanguage:t,log:function(a){A.debug&&"undefined"!=typeof console&&console.log(a)},toLanguages:function(a){var b=[];if("string"==typeof a&&a.indexOf("-")>-1){var c=a.split("-");a=A.lowerCaseLng?c[0].toLowerCase()+"-"+c[1].toLowerCase():c[0].toLowerCase()+"-"+c[1].toUpperCase(),"unspecific"!==A.load&&b.push(a),"current"!==A.load&&b.push(c[0])}else b.push(a);return-1===b.indexOf(A.fallbackLng)&&A.fallbackLng&&b.push(A.fallbackLng),b},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},E={load:function(a,b,c){b.useLocalStorage?E._loadLocal(a,b,function(d,e){for(var f=[],g=0,h=a.length;h>g;g++)e[a[g]]||f.push(a[g]);f.length>0?E._fetch(f,b,function(a,b){D.extend(e,b),E._storeLocal(b),c(null,e)}):c(null,e)}):E._fetch(a,b,function(a,b){c(null,b)})},_loadLocal:function(a,b,c){var d={},e=(new Date).getTime();if(window.localStorage){var f=a.length;D.each(a,function(a,g){var h=window.localStorage.getItem("res_"+g);h&&(h=JSON.parse(h),h.i18nStamp&&h.i18nStamp+b.localStorageExpirationTime>e&&(d[g]=h)),f--,0===f&&c(null,d)})}},_storeLocal:function(a){if(window.localStorage)for(var b in a)a[b].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+b,JSON.stringify(a[b]))},_fetch:function(a,b,c){var d=b.ns,e={};if(b.dynamicLoad){var f=n(b.resGetPath,{lng:a.join("+"),ns:d.namespaces.join("+")});D.ajax({url:f,success:function(a){D.log("loaded: "+f),c(null,a)},error:function(a,b,d){D.log("failed loading: "+f),c("failed loading resource.json error: "+d)},dataType:"json",async:b.getAsync})}else{var g,h=d.namespaces.length*a.length;D.each(d.namespaces,function(d,f){D.each(a,function(a,d){var i=function(a,b){a&&(g=g||[],g.push(a)),e[d]=e[d]||{},e[d][f]=b,h--,0===h&&c(g,e)};"function"==typeof b.customLoad?b.customLoad(d,f,b,i):E._fetchOne(d,f,b,i)})})}},_fetchOne:function(a,b,c,d){var e=n(c.resGetPath,{lng:a,ns:b});D.ajax({url:e,success:function(a){D.log("loaded: "+e),d(null,a)},error:function(a,b,c){D.log("failed loading: "+e),d(c,{})},dataType:"json",async:c.getAsync})},postMissing:function(a,b,c,d,e){var f={};f[c]=d;var g=[];if("fallback"===A.sendMissingTo)g.push({lng:A.fallbackLng,url:n(A.resPostPath,{lng:A.fallbackLng,ns:b})});else if("current"===A.sendMissingTo)g.push({lng:a,url:n(A.resPostPath,{lng:a,ns:b})});else if("all"===A.sendMissingTo)for(var h=0,i=e.length;i>h;h++)g.push({lng:e[h],url:n(A.resPostPath,{lng:e[h],ns:b})});for(var j=0,k=g.length;k>j;j++){var l=g[j];D.ajax({url:l.url,type:A.sendType,data:f,success:function(){D.log("posted missing key '"+c+"' to: "+l.url);for(var a=c.split("."),e=0,f=x[l.lng][b];a[e];)f=f[a[e]]=e===a.length-1?d:f[a[e]]||{},e++},error:function(){D.log("failed posting missing key '"+c+"' to: "+l.url)},dataType:"json",async:A.postAsync})}}},F={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(a>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(a>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(a>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(0===a?0:1==a?1:2==a?2:a%100>=3&&10>=a%100?3:a%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ay:{name:"AymarÃ¡",numbers:[1],plurals:function(){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(1!=a)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},bo:{name:"Tibetan",numbers:[1],plurals:function(){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(a>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},cgg:{name:"Chiga",numbers:[1],plurals:function(){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:a>=2&&4>=a?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)
}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(1==a?0:2==a?1:8!=a&&11!=a?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(1!=a)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(1!=a)}},en:{name:"English",numbers:[1,2],plurals:function(a){return Number(1!=a)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fa:{name:"Persian",numbers:[1],plurals:function(){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(a>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(a>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(1==a?0:2==a?1:7>a?2:11>a?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(1==a||11==a?0:2==a||12==a?1:a>2&&20>a?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(1!=a)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(1!=a)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(1!=a)}},id:{name:"Indonesian",numbers:[1],plurals:function(){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(a%10!=1||a%100==11)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ja:{name:"Japanese",numbers:[1],plurals:function(){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(0!==a)}},ka:{name:"Georgian",numbers:[1],plurals:function(){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ko:{name:"Korean",numbers:[1],plurals:function(){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(1==a?0:2==a?1:3==a?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(a){return Number(a>1)}},lo:{name:"Lao",numbers:[1],plurals:function(){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&(10>a%100||a%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(a){return Number(a%10==1&&a%100!=11?0:0!==a?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(a>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(a>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(a>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(1==a||a%10==1?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(1==a?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ms:{name:"Malay",numbers:[1],plurals:function(){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(1==a?0:0===a||a%100>1&&11>a%100?1:a%100>10&&20>a%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(1!=a)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(1!=a)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(a){return Number(a>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(1!=a)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(1!=a)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(1==a?0:0===a||a%100>0&&20>a%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(a){return Number(1!=a)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(1!=a)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(1==a?0:a>=2&&4>=a?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(a%100==1?1:a%100==2?2:a%100==3||a%100==4?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(1!=a)}},son:{name:"Songhay",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(1!=a)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(1!=a)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(a){return Number(1!=a)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(a>1)}},th:{name:"Thai",numbers:[1],plurals:function(){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(a>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(1!=a)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(a>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(1!=a)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(a>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(a>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(1!=a)}},zh:{name:"Chinese",numbers:[1],plurals:function(){return 0}}},addRule:function(a,b){F.rules[a]=b},setCurrentLng:function(a){if(!F.currentRule||F.currentRule.lng!==a){var b=a.split("-");F.currentRule={lng:a,rule:F.rules[b[0]]}}},get:function(a,b){function c(b,c){var d;if(d=F.currentRule&&F.currentRule.lng===a?F.currentRule.rule:F.rules[b]){var e=d.plurals(c),f=d.numbers[e];return 2===d.numbers.length&&1===d.numbers[0]&&(2===f?f=-1:1===f&&(f=1)),f}return 1===c?"1":"-1"}var d=a.split("-");return c(d[0],b)}},G={},H=function(a,b){G[a]=b},I=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function b(a,b){for(var c=[];b>0;c[--b]=a);return c.join("")}var c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var e,f,g,h,i,j,k,l=1,m=c.length,n="",o=[];for(f=0;m>f;f++)if(n=a(c[f]),"string"===n)o.push(c[f]);else if("array"===n){if(h=c[f],h[2])for(e=d[l],g=0;g<h[2].length;g++){if(!e.hasOwnProperty(h[2][g]))throw I('[sprintf] property "%s" does not exist',h[2][g]);e=e[h[2][g]]}else e=h[1]?d[h[1]]:d[l++];if(/[^s]/.test(h[8])&&"number"!=a(e))throw I("[sprintf] expecting number but found %s",a(e));switch(h[8]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e,10);break;case"e":e=h[7]?e.toExponential(h[7]):e.toExponential();break;case"f":e=h[7]?parseFloat(e).toFixed(h[7]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&h[7]?e.substring(0,h[7]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(h[8])&&h[3]&&e>=0?"+"+e:e,j=h[4]?"0"==h[4]?"0":h[4].charAt(1):" ",k=h[6]-String(e).length,i=h[6]?b(j,k):"",o.push(h[5]?e+i:i+e)}return o.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw"[sprintf] huh?";if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw"[sprintf] huh?";for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw"[sprintf] huh?";f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";d.push(c)}b=b.substring(c[0].length)}return d},c}(),J=function(a,b){return b.unshift(a),I.apply(null,b)};return H("sprintf",function(a,b,c){return c.sprintf?"[object Array]"===Object.prototype.toString.apply(c.sprintf)?J(a,c.sprintf):"object"==typeof c.sprintf?I(a,c.sprintf):a:a}),w.init=d,w.setLng=j,w.preload=e,w.addResourceBundle=f,w.loadNamespace=h,w.loadNamespaces=i,w.setDefaultNamespace=g,w.t=r,w.translate=r,w.detectLanguage=D.detectLanguage,w.pluralExtensions=F,w.sync=E,w.functions=D,w.lng=l,w.addPostProcessor=H,w.options=A,w}),define("libs/locales/de/helptext",[],function(){"use strict";var a=["<h2>Aufgaben (Todos)</h2>","<p>Lege Listen an, in denen du deine Vorhaben verwaltest. Innerhalb einer Liste kannst du ","dann beliebig viele Aufgaben erstellen, jederzeit Ã¤ndern und als erledigt abhaken.</p>","<h2>Listen Teilen</h2>","<p>Lade deine VerbÃ¼ndeten zu ausgewÃ¤hlten Listen ein, um Aufgaben gemeinsam zu meistern ","und jederzeit auf dem Laufenden zu sein. Nach BestÃ¤tigung der Einladung sind die Beteiligten auch berechtigt die Listen zu bearbeiten, nur du als EigentÃ¼mer kannst sie jedoch lÃ¶schen. ","Alle Aufgaben werden dann zwischen Dir und den erlaubten Teilnehmern pro Liste automatisch synchronisiert!</p>","<h2>Benachrichtigungen</h2>","<p>Du kannst pro Aufgabe ein Datum mit Uhrzeit angeben und festlegen, welche Benutzer innerhalb der Liste benachrichtigt werden sollen.</p>","<h2>Ãber AtOneGo</h2>","<p>Anregungen, Fragen, Lob oder Kritik? Besuche uns im Internet unter: ",'<br/><a class="external-url" target="_blank" href="http://at-one-go.com?lang=de">www.at-one-go.com</a></p>'];return a.join("")}),define("libs/locales/de/translation",["require","libs/locales/de/helptext"],function(a){"use strict";var b=a("libs/locales/de/helptext");return{error:"Es ist ein Fehler aufgetreten, das tut uns Leid. Check deine Internetverbindung und versuch's nochmal!",validationError:"Fehler bei der Validierung. Vielleicht ist der Text zu lang?",success:"Alles klar!",serverError:"Etwas stimmt mit dem Server nicht, das tut uns Leid. Versuch's nochmal!",browserNotSupported:"Sorry, dieser Browser wird noch nicht unterstÃ¼tzt.",settings:"Einstellungen",userSettings:"Benutzer",langSettings:"Sprache",notifySettings:"Benachrichtigungen",notificationQuestion:"Welche Benutzer sollen benachrichtigt werden?",notifyEmail:"Via E-Mail?",notifyPush:"Via PUSH?",notifyVibrate:"Vibrieren bei externen Ãnderungen?",selectLang:"WÃ¤hle deine Sprache",todolistTitle:"Titel der Liste",todoDate:"Datum [optional]",save:"Speichern",saved:"Erfolgreich gespeichert",cancel:"Abbrechen",back:"ZurÃ¼ck",about:"About",startWithoutAccount:"Ohne Account",signup:"Registrieren",signupButton:"Registrieren",signupTitle:"Neuen Account erstellen",accountNotActivatedYet:"Dein Account wurde noch nicht aktiviert und lÃ¤uft in __days__ ab. All deine Daten werden dann wieder gelÃ¶scht. Check deine E-Mails und klicke einfach auf den Link.",signupSuccessMessage:"Registrierung erfolgreich! Wir haben Dir eine E-Mail mit einem Link zum Aktivieren deines Accounts gesendet.",welcome_message_after_signup:'Hier siehst du Nachrichten bei externen AktivitÃ¤ten wie z.B. "Du wurdest zu einer Liste eingeladen", oder wenn ein anderer Benutzer eine Aufgabe in einer geteilten Liste Ã¤ndert. Vergiss nicht, deinen Account zu aktivieren indem du auf den Link in der Willkommens-EMail klickst!',created:"Erstellt",updated:"Aktualisiert",unknown:"Unbekannt",yes:"Ja",no:"Nein",me:"Ich",by:"von",Confirm:"BestÃ¤tigen",remove:"entfernen",removeAll:"alle entfernen",start:"Startscreen",help:"Hilfe",helpAndAbout:"Hilfe  & About",really:"Bist du sicher?",reallyLeave:"Wirklich verlassen? Es kann sein, dass ungespeicherte Daten verloren gehen.",reallyAddUser:"MÃ¶chtest du den Benutzer mit der E-Mail Adresse `__email__` zu dieser Liste einladen? Wenn der Benutzer noch nicht existiert wird eine Einladungs-Email an diese Adresse gesendet.",login:"Login",logout:"Logout",deleteAccount:"Account lÃ¶schen",deleteList:"Liste lÃ¶schen",shareList:"Liste teilen",reallyDeleteAccount:"Wirklich lÃ¶schen? All deine Daten werden ebenfalls gelÃ¶scht!",successfullyDeleted:"Der Account wurde erfolgreich gelÃ¶scht.",loginError:"Es ist ein Fehler beim Login aufgetreten, versuch es nochmal.",all:"Alle",active:"Aktiv",completed:"Erledigt",completedTodos:"Erledigte Aufgaben (__completed__)",notLoggedIn:'Du bist nicht eingeloggt! <a href="#start">Hier</a> geht\'s zur Startseite.',helpText:b,show:"Zeigen",edit:"Bearbeiten",editList:"Listen-Einstellungen","delete":"LÃ¶schen",close:"Schliessen",notices:"Notizen...",welcome:"Home-Spashscreen",userDoesNotExist:"Benutzer existiert nicht!",userDisplayName:"Beliebiger Name",userDisplayEmail:"Email-Adresse",noValidEMail:"Keine valide E-Mail Adresse!",userEmailWasChanged:"Du hast deine E-Mail Adresse geÃ¤ndert. Du musst diese Adresse erneut bestÃ¤tigen, indem du auf den Link in der gerade gesendeten Aktivierungsmail klickst.",userDisplayPassword:"Passwort",userDisplayPasswordAgain:"Passwort wiederholen",passwordError:"Beide PasswÃ¶rter mÃ¼ssen Ã¼bereinstimmen und mindestens 6 Zeichen besitzen",newList:"Neue Todoliste",newTodo:"Neue Aufgabe",userItems:"Du hast __count__ Todoliste.",userItems_plural:"Du hast __count__ Todolisten.",todosOfList:"Todos in Liste __title__",allowedUsers:"Berechtigte Personen",owner:"EigentÃ¼mer",whoWorksWithThisList:"Mit welchen Personen mÃ¶chtest du diese Liste teilen?",searchForUsers:"Einladen via E-Mail Adresse...",addUserToList:"__name__ einladen",ClearCompleted:"LÃ¶sche Erledigte",items:"__count__ Todo",items_plural:"__count__ Todos",noInternetConnection:"Das hat nicht geklappt. Bist du mit dem Internet verbunden?",termsAcceptText:'Wenn du auf âRegistrierenâ klickst, akzeptierst du unsere <a target="_blank" href="http://at-one-go.com/terms?lang=de">Nutzungsbedingungen</a>.',recoverPasswort:"Passwort vergessen",from:"Von",list:"Liste",lists:"Todolisten",activities:"Ereignisse",no_activities:"Keine AktivitÃ¤ten",invitations:"__count__ Einladung",invitations_plural:"__count__ Einladungen",inviteSuccess:"Einladung erfolgreich. Der Benutzer muss diese jedoch noch bestÃ¤tigen.",inviteError:"Das hat nicht geklappt - Vielleicht hast du diesen Benutzer bereits eingeladen?",acceptInvitationQuestion:"Einladung zu dieser Liste annehmen?",invitation:"Der Benutzer __username__ hat dich zur Liste __list__ eingeladen!",newIns:"Du hast neue Einladungen zu Listen, welche du nun bestÃ¤tigen oder ablehnen kannst.",invitation_accepted:"Der Benutzer __username__ hat die Einladung zur Liste __list__ angenommen",invitation_rejected:"Der Benutzer __username__ hat die Einladung zur Liste __list__ abgelehnt",list_access_removed:"Der Benutzer __username__ hat deine Berechtigung an der Liste __list__ zu arbeiten entfent",update_list:"Die Liste __list__ wurde geÃ¤ndert.",delete_list:"Die Liste __list__ wurde gelÃ¶scht.",create_todo:"Die Aufgabe __todo__ in der Liste __list__ wurde erstellt.",update_todo:"Die Aufgabe __todo__ in der Liste __list__ wurde geÃ¤ndert.",delete_todo:"Die Aufgabe __todo__ in der Liste __list__ wurde gelÃ¶scht.",delete_todos:"Die Aufgaben __str__ in der Liste __list__ wurden gelÃ¶scht.",ioUpdate:"Sync-Update-Browser",sameTitleNoSense:"Zweimal der selbe Titel ist nicht mÃ¶glich",listTitleError:"Der Titel ist entweder zu kurz oder zu lang (hÃ¶chstens. 32 Zeichen)",listTitleTooLong:"Der Titel der Liste ist zu lang",todoTitleTooLong:"Der Titel ist zu lang",usernameTooLong:"Der Name ist zu lang",userExists:"Der Benutzer existiert bereits",test:"hello __foo__"}}),define("libs/locales/en/helptext",[],function(){"use strict";var a=["<h2>Tasks (Todos)</h2>","<p>Create lists in which you manage your tasks. Within a list, you can ","then create as many tasks as you want and mark them as done. </p>","<h2>Working together</h2>","<p>Invite your friends and team colleagues to selected lists to work on tasks together. After confirmation of ","the invitation, the parties are also entitled to edit the lists, only you as the owner can delete them, however. ","All tasks will then be automatically synchronized between you and the participants allowed per list!</p>","<h2>Notifications</h2>","<p>You can specify a date and time per task and choose users within the list, which should be notified.</p>","<h2>About</h2>","<p>Suggestions, questions, criticism? Visit us at: ",'<br/><a class="external-url" target="_blank" href="http://at-one-go.com">www.at-one-go.com</a></p>'];return a.join("")}),define("libs/locales/en/translation",["require","libs/locales/en/helptext"],function(a){"use strict";var b=a("libs/locales/en/helptext");return{error:"Sorry, this is an error. Check your internet connectipon and try again!",validationError:"Validation-Error. Maybe some text is too long?",success:"Alright!",serverError:"There's something wrong with the server. Try again!",browserNotSupported:"Sorry, this browser is currently not supported.",settings:"Settings",userSettings:"User",langSettings:"Language",notifySettings:"Notifications",notificationQuestion:"Which users should be notified?",notifyEmail:"Via email?",notifyPush:"Via PUSH?",notifyVibrate:"Vibrate on any external changes?",selectLang:"Choose your language",todolistTitle:"Title of the list",todoDate:"Date [optional]",save:"Save",saved:"Successfully saved",cancel:"Cancel",back:"Go back",about:"About",startWithoutAccount:"Without account",signup:"Signup",signupButton:"Signup",signupTitle:"Create an account",accountNotActivatedYet:"Your account has not been activated yet and will be deleted in __days__. Please check your emails and click on the link.",signupSuccessMessage:"Registration successful! We sent you an email to activate your account.",welcome_message_after_signup:'This is the activity stream. Here, you will see all kind of messages from outside, e.g. "you are invited to a list" or when another user changes a task in a shared list. Don\'t forget to activate your account by clicking on the link in the welcome email we sent you!',created:"Created",updated:"Updated",unknown:"Unknown",yes:"Yes",no:"No",me:"You",by:"by",Confirm:"Confirm",remove:"remove",removeAll:"remove all",start:"Startscreen",help:"Help",helpAndAbout:"Help & About",really:"Are you sure?",reallyLeave:"Really leave? Maybe unsaved data will be lost.",reallyAddUser:"Do you want to invite the user with the email address `__email__` to this list? If that user does not exist, we will send an invitation email.",login:"Login",logout:"Logout",deleteAccount:"Delete my account",deleteList:"Delete list",shareList:"Share list",reallyDeleteAccount:"Really delete? All your data will be gone!",successfullyDeleted:"Account deleted successfully. ",loginError:"Oops, there was an error while trying to log you in, try again!",all:"All",active:"Active",completed:"Completed",completedTodos:"Completed tasks (__completed__)",notLoggedIn:'You\'re not logged in! Go to the <a href="#start">login page</a>.',helpText:b,show:"Show",edit:"Edit",editList:"List settings","delete":"Delete",close:"Close",notices:"Notes...",welcome:"Home-Spashscreen",userDoesNotExist:"User does not exist!",userDisplayName:"Your name",userDisplayEmail:"Email address",noValidEMail:"No valid email address!",userEmailWasChanged:"You changed your email address. Please verify that this is your email address by clicking on the link in the activation email which we just sent to you.",userDisplayPassword:"Password",userDisplayPasswordAgain:"Password (again)",passwordError:"Both passwords must be identical and have at least 6 characters",newList:"Create todolist",newTodo:"Create task",userItems:"You have __count__  todolist.",userItems_plural:"You have __count__  todolists.",todosOfList:"Todos of list __title__",allowedUsers:"Assigned users",owner:"owner",whoWorksWithThisList:"Who can work with this list?",searchForUsers:"invite via email address...",addUserToList:"Invite __name__",ClearCompleted:"Clear completed",items:"__count__ todo",items_plural:"__count__ todos",noInternetConnection:"You're not connected to the internet!",termsAcceptText:'By signing up you agree to the <a target="_blank" href="http://at-one-go.com/terms">Terms of Use</a>.',recoverPasswort:"Recover password",from:"From",list:"List",lists:"Todolists",activities:"Events",no_activities:"No activities",invitations:"__count__ invitation",invitations_plural:"__count__ invitations",inviteSuccess:"Invitation successfull. The other user now has to accept it.",inviteError:"Error - Maybe you already invited this user?",acceptInvitationQuestion:"Accept the invitation to this list?",invitation:"__username__ has invited you to the list __list__",newIns:"You have new invitations to lists, which you can accept or decline.",invitation_accepted:"__username__ has accepted your invitation to the list __list__",invitation_rejected:"__username__ has rejected your invitation to the list __list__",list_access_removed:"__username__ has removed your access to the list __list__",update_list:"The list __list__ was updated.",delete_list:"The list __list__ was deleted.",create_todo:"The task __todo__ in the list __list__ was created.",update_todo:"The task __todo__ in the list __list__ was updated.",delete_todo:"The task __todo__ in the list __list__ was deleted.",delete_todos:"The tasks __str__ in the list __list__ were deleted.",ioUpdate:"Sync-Update-Browser",sameTitleNoSense:"Same title is not allowed",listTitleError:"The title is either too short or too long (max. 32 characters)",listTitleTooLong:"The title is too long",todoTitleTooLong:"The title is too long",usernameTooLong:"The name is too long",userExists:"This user already exists",test:"hello __foo__"}}),define("app",["require","version","zepto","moment","common","underscore","backbone","i18next","libs/locales/de/translation","libs/locales/en/translation"],function(a){"use strict";function b(){return!m.isUndefined(window.cordova)}function c(){return b()?!1:!0}function d(){if(c())return!1;var a=navigator.userAgent.toLowerCase();log("user agent: "+a);var b=/(iPad)/.test(a)&&/AppleWebKit/.test(a),d=!/(mobile)/.test(a)&&/android/.test(a);return b||d}function e(){var a=navigator.userAgent;return b()?!1:/(iPod|iPhone|iPad)/.test(a)&&/AppleWebKit/.test(a)}function f(){var a=navigator.userAgent;if(b())return!1;var c=e(),d=/Android/.test(a);return c||d}function g(a){var b=k.store.get("app-language"),c=function(b){return b=i.trim(b).toLowerCase(),log("========= LANGUAGE PRE CHECK ======== LANGUAGE IS: "+b),/en/.test(b)&&(b="en"),/deutsch/.test(b)&&(b="de"),b!==r&&"de"!==b&&(b=r),k.store.set("app-language",b),v.lang=b,v.user&&"function"==typeof v.user.set&&v.user.set("lang",b,{silent:!0}),a(b)};return b?a(b):void(m.isUndefined(navigator.globalization)?(b||(b=navigator.userLanguage||navigator.language||r),c(b)):navigator.globalization.getPreferredLanguage(function(a){b=a.value,c(b)},function(){return a(r)}))}var h=a("version"),i=a("zepto"),j=a("moment"),k=a("common"),l=null,m=a("underscore"),n=a("backbone"),o=a("i18next"),p=a("libs/locales/de/translation"),q=a("libs/locales/en/translation"),r="en",s=/phantomjs/.test(navigator.userAgent.toLowerCase()),t=__app_config__.touch&&!s,u=t&&f(),v={VERSION:h,API_ROOT:__app_config__.API_ROOT,AJAX_TIMEOUT:6e4,root:__app_config__.APP_ROOT,defaultClickEvent:"click",user:null,isLoggedIn:!1,isMobile:t,isPhantomJS:s,isBrowser:c(),isMobile_Browser:u,isiOSBrowser:e(),isPhonegapAvailable:b(),isTablet:d(),isIOS:!1,isAndroid:!1,activities:[],socketWrapper:null};return v=m.extend(v,{module:function(a){return m.extend({Views:{}},a)},setUserModel:function(a){l=a},handleError:function(a,b){return"string"!=typeof a&&(a+=""),log("app.handleError() -> "+a),b?void i.ajax({type:"POST",dataType:"json",url:v.API_ROOT+"/api/v1/logs",data:{m:a}}):!1},initGlobalization:function(){g(function(a){j.lang(a),o.init({customLoad:function(a,b,c,d){switch(a){case"de":d(null,p);break;case"en":d(null,q);break;default:d(null,q)}v.trigger("translationsLoaded")},lng:a,fallbackLng:r,useLocalStorage:!1})})},changeLang:function(a){return a===v.lang?!1:(v.lang=a,"en"!==a&&"de"!==a&&(v.lang="en"),k.store.set("app-language",v.lang),j.lang(v.lang),void o.init({lng:v.lang}))},login:function(a,b,c){i.ajax({cache:!1,timeout:v.AJAX_TIMEOUT,type:"POST",dataType:"json",data:{email:a,password:b},url:v.API_ROOT+"/api/v1/login",success:function(a){return a.error||a.message?c(a.error||a.message):(v.router.setAuthenticated(a),c(null,!0))},error:function(){return c(__("loginError"))}})},fetchUser:function(a){if(!v.user)return"function"==typeof a?a("no user"):!1;if(v.isStillFetchingUser===!0)return"function"==typeof a?a("still fetching"):!1;var b=v.user.get("invite_list_ids");b&&(b=b.length),v.isStillFetchingUser=!0,v.user.fetch({success:function(c,d){v.isStillFetchingUser=!1,v.API_TOKEN=d.API_TOKEN,log(">>> fetched user in backgrnd "+d.email+" API TOKEN: "+d.API_TOKEN),v.todolists.reset(),v.todolists.add(d.todolists),v.storage.storeUser(d);var e=d.invite_list_ids;e&&(e=e.length),e>b&&k.dialog(__("newIns")),"function"==typeof a&&a(null,d)},error:function(){v.isStillFetchingUser=!1,"function"==typeof a&&a(!0)}})},checkInternetConnection:function(){if(m.isUndefined(navigator.connection))return!0;var a=navigator.connection;return v.isAndroid&&0===a.type?!0:v.isAndroid?!0:a.type&&"none"!==a.type&&"unknown"!==a.type?!0:!1},initAndRegisterPushNotifications:function(){if(!window.plugins||!window.plugins.pushNotification)return!1;v.pushNotification=window.plugins.pushNotification;var a,b=function(){v.todosContainer&&v.todosContainer.refetchTodos(),setTimeout(function(){v.fetchUser()},200)},c=function(a){log("GCM PUSH ERROR: "),v.handleError(a)},d=function(a){var b=new l,c={_id:v.user.get("_id"),apn_device_token:a};b.save(c,{patch:!0})},e=function(a){var b=new l,c={_id:v.user.get("_id"),gcm_reg_id:a};b.save(c,{patch:!0})};if(window.onNotificationAPN=function(a){b(),a.alert&&(k.vibrate(500,v.user.get("notify_settings")),k.notify(a.alert,2e4),v.activityCollection.addActivity({key:"push_notification",data:{body:a.alert,timestamp:(new Date).getTime()}})),a.badge&&v.pushNotification.setApplicationIconBadgeNumber(function(){},function(a){log(a)},a.badge)},window.onNotificationGCM=function(a){switch(a.event){case"registered":a.regid.length>0&&(setTimeout(function(){e(a.regid)},1e3),log("REGISTERED -> REGID:"+a.regid));break;case"message":b();var c=a&&a.payload?a.payload.message:"no message";(a.foreground||a.coldstart)&&(k.vibrate(500,v.user.get("notify_settings")),setTimeout(function(){k.notify(c,2e4)},1500)),v.activityCollection.addActivity({key:"push_notification",data:{body:c,timestamp:(new Date).getTime()}});break;case"error":log("onNotificationGCM ERROR: "+a.msg),v.handleError(a.msg,!0);break;default:log("EVENT -> Unknown, an event was received and we do not know what it is")}},v.isAndroid){var f=function(){log("PUSH: =================> ANDROID PUSH SUCCESS")};a={senderID:"231725508602",ecb:"onNotificationGCM"},v.pushNotification.register(f,c,a)}else if(v.isIOS){var g=function(a){log("PUSH: ==> IOS PUSH SUCCESS -> token: "+a),setTimeout(function(){d(a)},1e3)};a={badge:"true",sound:"true",alert:"true",ecb:"onNotificationAPN"},log("#register call now................................................");var h=function(b,d){log("====== UNREGISTER ERROR ======"),log(b),log(d),v.pushNotification.register(g,c,a)},i=function(b,d){log("====== UNREGISTER FIRST ======"),log(b),log(d),log("=========> REGISTERING IOS PUSH..."),v.pushNotification.register(g,c,a)};v.pushNotification.unregister(i,h)}},unregisterPUSHNotifications:function(){if(!window.plugins||!window.plugins.pushNotification)return!1;if(!v.pushNotification)return!1;v.pushNotification=null;var a=function(){},b=function(){var a=new l,b={_id:v.user.get("_id"),delete_push_tokens:!0};a.save(b,{patch:!0})};b(),window.plugins.pushNotification.unregister(a,a)}},n.Events)}),a.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,a.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),a.prototype.deviceIsIOS4=a.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a.prototype.deviceIsIOSWithBadTarget=a.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),a.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)
}},a.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){"use strict";return this.deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){"use strict";var b;this.deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],this.deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!this.deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<200&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},a.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},a.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),this.deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||this.deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.deviceIsIOS4&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},a.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},a.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){"use strict";var a=this.layer;this.deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(b){"use strict";var c,d;if("undefined"==typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!a.prototype.deviceIsAndroid)return!0;if(c=document.querySelector("meta[name=viewport]")){if(-1!==c.content.indexOf("user-scalable=no"))return!0;if(d>31&&window.innerWidth<=window.screen.width)return!0}}return"none"===b.style.msTouchAction?!0:!1},a.attach=function(b){"use strict";return new a(b)},"undefined"!=typeof define&&define.amd?define("fastclick",[],function(){"use strict";return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a,define("models/user",["require","backbone","app"],function(a){"use strict";var b=a("backbone"),c=a("app"),d=b.Model.extend({idAttribute:"_id",urlRoot:c.API_ROOT+"/api/v1/users",defaults:{active:!0,active_since:new Date,display_name:"",name:"",email:"",password:null,lang:"en",notify_settings:{email:!0,vibrate:!0,sound:!0},img_url:null,todolists:[],added_users:[],invite_list_ids:[]}});return d}),define("JrFork",["require","backbone","zepto","underscore","app"],function(a){"use strict";var b,c,d=a("backbone"),e=a("zepto"),f=a("underscore"),g=a("app"),h=h||{};return e(function(){b=e("#app-main"),c=e("#app-container")}),function(a){a.Navigator={isAnimating:!1,backButtonFlag:!0,history:[],directions:{UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT"},opposites:{UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"},animations:{SLIDE_STACK:"SLIDE_STACK",SLIDE_OVER:"SLIDE_OVER"},navigate:function(b,c){return a.Navigator.isAnimating&&!g.isPhantomJS?!1:(this.history.push(c),this.backButtonFlag=!1,d.history.navigate(b,{trigger:!0}))},renderScreen:function(a,b,c,d){var f,g=this.history.length>0?this.history[this.history.length-1].animation:null;return c||(g=null),g?(f=e("<div></div>"),f.append(b.render().el),this.animate(a,f,g.type,g.direction,d),this.afterAnimation()):(this.resetContent(a,b),this.normalRenderView(a,b),"function"==typeof d&&d(),void 0)},normalRenderView:function(a,b){return a.append(b.render().el)},resetContent:function(a){return a.empty()},animate:function(a,b,c,d,e){if(this.animations.hasOwnProperty(c))return this.doAnimation(a,b,c,d,e);throw new Error("Animation Not Available")},doAnimation:function(b,d,e,g,h){a.Navigator.isAnimating=!0;var i,j;c.prepend(d),d.addClass("animate-to-view").addClass(g).addClass("initial"),c.addClass("animate").addClass(g),i=function(){return d.removeClass("initial")},setTimeout(i,1),j=function(){b.remove(),d.attr("id","app-main").removeClass("animate-to-view").removeClass(g),c.removeClass("animate").removeClass(g),setTimeout(function(){a.Navigator.isAnimating=!1},500),f.isFunction(h)&&h()},c.one("webkitTransitionEnd",j)},afterAnimation:function(){var a,b,c=this.history.pop();a=c.animation,b=this.opposites[a.direction],c.animation.direction=b,this.history.push(c),this.backButtonFlag&&this.history.pop(),this.backButtonFlag=!0}},a.Router=d.Router.extend({renderScreen:function(c,d,f){return b=e("#app-main"),a.Navigator.renderScreen(b,c,d,f)}})}(h),h}),define("text",["module"],function(a){"use strict";var b,c,d,e,f,g=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],h=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,j="undefined"!=typeof location&&location.href,k=j&&location.protocol&&location.protocol.replace(/\:/,""),l=j&&location.hostname,m=j&&(location.port||void 0),n={},o=a.config&&a.config()||{};return b={version:"2.0.10",strip:function(a){if(a){a=a.replace(h,"");var b=a.match(i);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:o.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;3>b;b+=1){c=g[b];try{a=new ActiveXObject(c)}catch(d){}if(a){g=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return i?(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e)):!0},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,o.isBuild&&(n[a]=d),e(d)},load:function(a,c,d,e){if(e.isBuild&&!e.inlineText)return void d();o.isBuild=e.isBuild;var f=b.parseName(a),g=f.moduleName+(f.ext?"."+f.ext:""),h=c.toUrl(g),i=o.useXhr||b.useXhr;return 0===h.indexOf("empty:")?void d():void(!j||i(h,k,l,m)?b.get(h,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([g],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)}))},write:function(a,c,d){if(n.hasOwnProperty(c)){var e=b.jsEscape(n[c]);d.asModule(a+"!"+c,"define(function () { return '"+e+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(){var c=function(a){return e(j,a)};c.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,c,f)},f)}},"node"===o.env||!o.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(c=require.nodeRequire("fs"),b.get=function(a,b,d){try{var e=c.readFileSync(a,"utf8");0===e.indexOf("ï»¿")&&(e=e.substring(1)),b(e)}catch(f){d(f)}}):"xhr"===o.env||!o.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);o.onXhr&&o.onXhr(g,a),g.onreadystatechange=function(){var b,e;4===g.readyState&&(b=g.status,b>399&&600>b?(e=new Error(a+" HTTP status: "+b),e.xhr=g,d(e)):c(g.responseText),o.onXhrComplete&&o.onXhrComplete(g,a))},g.send(null)}:"rhino"===o.env||!o.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),null!==d&&c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===o.env||!o.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(d=Components.classes,e=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),f="@mozilla.org/windows-registry-key;1"in d,b.get=function(a,b){var c,g,h,i={};f&&(a=a.replace(/\//g,"\\")),h=new FileUtils.File(a);try{c=d["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream),c.init(h,1,0,!1),g=d["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream),g.init(c,"utf-8",c.available(),e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),g.readString(c.available(),i),g.close(),c.close(),b(i.value)}catch(j){throw new Error((h&&h.path||"")+": "+j)}}),b}),define("text!templates/start.html",[],function(){return'<div class="content">\n    <div id="logo-wrap"></div>\n\n    <br/>\n    <div class="divider"></div>\n\n    <!--<a href="#todolists" class="no-account-btn aog-button aog-green aog-big">< % - __(\'startWithoutAccount\') %></a>-->\n    <a href="#login"  class="login-btn  aog-button aog-white aog-big"><%- __(\'login\') %></a>\n    <a href="#signup" class="signup-btn aog-button aog-white aog-big"><%- __(\'signup\') %></a>\n</div>\n'}),define("text!templates/header.html",[],function(){return'<!-- This markup will go in a <header/> -->\n<div class="header-animated">\n    <a id="gotolists" href="#todolists"\n        class="<%- showHomeButton ? \'\' : \'hidden\' %> goto-lists back-link"></a>\n\n    <a id="goback" href="#"\n        class="<%- showBackButton ? \'\' : \'hidden\' %> back-btn"></a>\n\n    <a id="list-settings" href="#todolists/edit/<%- listID %>"\n        class="<%- showListEditButton ? \'\' : \'hidden\' %> "></a>\n\n    <div id="app-loader" style="top: 3px; right: <%- showListEditButton || showSaveButton ? \'50px\' : \'5px\' %>;"></div>\n\n    <h1 class="title" id="title"><%- title %></h1>\n\n    <a id="header-save" href="#"\n        class="<%- showSaveButton ? \'\' : \'hidden\' %> disabled"></a>\n</div>\n'}),define("views/header",["require","underscore","zepto","app","text!templates/header.html","backbone"],function(a){"use strict";var b=a("underscore"),c=a("zepto"),d=a("app"),e=a("text!templates/header.html"),f=a("backbone"),g={};return g[d.defaultClickEvent+" #header-save"]="onHeaderSaveClick",f.View.extend({events:g,initialize:function(a){this.template=b.template(e),this.title=a.title,this.showBackButton=a.showBackButton||!1,this.showHomeButton=a.showHomeButton||!1,this.showListEditButton=a.showListEditButton||!1,this.showSaveButton=a.showSaveButton||!1,this.showListEditButton&&(this.listID=a.listID)},render:function(){return this.$el.html(this.template({title:this.title,showBackButton:this.showBackButton,showHomeButton:this.showHomeButton,showListEditButton:this.showListEditButton,showSaveButton:this.showSaveButton,listID:this.listID})),this.$el.addClass("bar-title"),this},onHeaderSaveClick:function(a){a.preventDefault();var b=c(a.currentTarget);return b.hasClass("disabled")||b.attr("disabled")?!1:(d.trigger("header-save",a),!1)}})}),define("views/base",["require","underscore","backbone","views/header"],function(a){"use strict";var b=a("underscore"),c=a("backbone"),d=a("views/header"),e=function(a){this.defaultViewData={},c.View.apply(this,[a])};return b.extend(e.prototype,c.View.prototype,{initialize:function(){},dispose:function(){return this.remove()},renderSelf:function(a){var b=this.template(a||this.defaultViewData);this.$el.html(b)},renderHeader:function(a){this.headerView=new d(a),this.headerView.render()}}),e.extend=c.View.extend,e}),define("views/start",["require","underscore","app","text!templates/start.html","views/base"],function(a){"use strict";var b=a("underscore"),c=a("app"),d=a("text!templates/start.html"),e=a("views/base"),f={};return e.extend({id:"startview",title:function(){return __("start")},events:f,initialize:function(){this.template=b.template(d)},render:function(){return this.renderSelf({app:c}),this}})}),define("text!templates/userview.html",[],function(){return'<h2><%= __(\'userSettings\') %></h2>\n\n<% if(!user.active) { %>\n<p class="error small"><%= __(\'accountNotActivatedYet\', {days: days}) %></p>\n<% } %>\n\n<input type="text" id="display_name"\n    placeholder="<%- __(\'userDisplayName\') %>" value="<%- user.display_name %>">\n\n<input type="email" id="email"\n    placeholder="<%- __(\'userDisplayEmail\') %>" value="<%- user.email %>">\n\n<input type="password" placeholder="<%- __(\'userDisplayPassword\') %>" id="password">\n<input type="password" placeholder="<%- __(\'userDisplayPasswordAgain\') %>" id="password2">\n<p id="pw-error" class="error-msg small hidden"><%- __(\'passwordError\') %></p>\n\n<!-- language select -->\n<p class="aog-green-text green-header"><%= __(\'selectLang\') %></p>\n<select id="select-lang">\n    <option value="en"\n    <%= (app.lang === \'en\' || app.lang !== \'de\') ? \'selected\' : \'\' %>>\n    English\n    </option>\n\n    <option value="de"\n    <%= app.lang === \'de\' ? \'selected\' : \'\' %>>\n    Deutsch\n    </option>\n</select>\n\n<!-- notification settings-->\n<p class="aog-green-text green-header"><%= __(\'notifySettings\') %></p>\n<ul class="aog-list notify-settings-list">\n    <li class="no-link">\n        <div class="ago-toggle-wrap">\n            <span class="ago-toggle email-checkbox <%= user.notify_settings.email ? \'checked\' : \'\' %>">\n            </span>\n        </div>\n\n        <div class="title-wrap">\n            <p class="title"><%= __(\'notifyEmail\') %></p>\n        </div>\n    </li>\n\n    <!--\n    <li class="no-link">\n        <div class="ago-toggle-wrap">\n            <span class="ago-toggle push-checkbox <%= user.notify_settings.push ? \'checked\' : \'\' %>">\n            </span>\n        </div>\n\n        <div class="title-wrap">\n            <p class="title">< % = __(\'notifyPush\') % ></p>\n        </div>\n    </li>\n    -->\n\n    <% if(!app.isBrowser) { %>\n    <li class="no-link">\n        <div class="ago-toggle-wrap">\n            <span class="ago-toggle vibrate-checkbox <%= user.notify_settings.vibrate ? \'checked\' : \'\' %>">\n            </span>\n        </div>\n\n        <div class="title-wrap">\n            <p class="title"><%= __(\'notifyVibrate\') %></p>\n        </div>\n    </li>\n    <% } %>\n</ul>\n'}),define("views/userview",["app","common","zepto","underscore","text!templates/userview.html","views/base"],function(a,b,c,d,e,f){"use strict";var g={};return g["keyup input"]="validate",g["blur #password2"]="validateOnFormInputBlur",g["change #select-lang"]="changeLang",g[a.defaultClickEvent+" .ago-toggle-wrap"]="toggleCheckbox",f.extend({events:g,initialize:function(){var b=this;this.template=d.template(e),a.off("header-save"),a.on("header-save",function(a){b.saveUser(a)})},render:function(){var d=this.model.toJSON(),e=b.getUserActiveDays(d,a.lang);return this.renderSelf({user:d,app:a,days:e}),this.$display_name=c("#display_name",this.el),this.$email=c("#email",this.el),this.$pw=c("#password",this.el),this.$pw2=c("#password2",this.el),this.$selLanguage=c("#select-lang",this.el),this.$notifySettingsList=c(".notify-settings-list",this.el),this.$saveBtn=c("#header-save"),this},validate:function(){b.lockScreen();var a=c.trim(this.$pw.val()),d=c.trim(this.$pw2.val()),e=this.$display_name.val().length>0&&this.$display_name.val().length<=32&&/@/.test(this.$email.val());this.$saveBtn=c("#header-save");var f=a.length>0||d.length>0;return f&&a!==d&&(e=!1),f&&(a.length<6||d.length<6)&&(e=!1),this.$saveBtn.length>0&&this.$saveBtn.toggleClass("disabled",!e),e&&c("#pw-error",this.el).addClass("hidden"),e},validateOnFormInputBlur:function(){var a=c.trim(this.$pw.val()),b=c.trim(this.$pw2.val()),d=a.length>0||b.length>0,e=c("#pw-error",this.el);e.toggleClass("hidden",!(d&&!this.validate()))},saveUser:function(e){e.preventDefault();var f=this,g=this.$pw.val(),h=this.$pw2.val(),i=this.$email.val(),j=this.$display_name.val(),k=c.trim(this.$email.val()),l=a.user.get("email"),m=d.bind(function(){this.$pw.val(""),this.$pw2.val("")},this),n=a.user.get("active");l!==k&&(n=!1),a.user.set({active:n,active_since:new Date},{silent:!0});var o={email:this.$notifySettingsList.find(".email-checkbox").hasClass("checked"),push:this.$notifySettingsList.find(".push-checkbox").hasClass("checked"),vibrate:this.$notifySettingsList.find(".vibrate-checkbox").hasClass("checked"),sound:!0},p={display_name:j,email:k,lang:a.lang,notify_settings:o},q={_id:a.user.get("_id"),display_name:j,email:k,API_TOKEN:a.user.get("API_TOKEN"),todolists:a.user.get("todolists"),active:n,invite_list_ids:a.user.get("invite_list_ids"),lang:a.lang,notify_settings:o};g.length>0&&g===h&&(p.password=g),b.showLoader(),this.$saveBtn.addClass("disabled"),b.unlockScreen(),this.model.save(p,{patch:!0,success:function(){b.hideLoader(),m(),l!==k&&b.dialog(__("userEmailWasChanged")),b.store.set("email",i),a.storage.storeUser(q,function(){})},error:function(a,c){b.hideLoader(),f.$saveBtn.removeClass("disabled");var d=__("error");c&&c.message&&(d=c.message),b.notify(d)}})},toggleCheckbox:function(a){c(a.currentTarget).find(".ago-toggle").toggleClass("checked"),this.__enableSaveButton()},changeLang:function(b){b.preventDefault();var d=this.$selLanguage.val();a.changeLang(d),this.__enableSaveButton(),c("#title").html(__("settings"))},__enableSaveButton:function(){b.lockScreen(),this.$saveBtn=c("#header-save"),this.$saveBtn.removeClass("disabled")}})}),define("text!templates/settings.html",[],function(){return'<header></header>\n\n<div class="content">\n    <div id="user-sub-view"></div>\n\n    <div class="divider"></div>\n\n    <button id="logout" class="aog-button aog-big aog-white">\n        <%= __(\'logout\') %>\n    </button>\n\n    <button id="delete-account" class="aog-button aog-big aog-red">\n        <%= __(\'deleteAccount\') %>\n    </button>\n</div>\n'}),define("views/settings",["require","zepto","underscore","app","common","views/userview","text!templates/settings.html","views/base"],function(a){"use strict";var b=a("zepto"),c=a("underscore"),d=a("app"),e=a("common"),f=a("views/userview"),g=a("text!templates/settings.html"),h=a("views/base"),i={};return i[d.defaultClickEvent+" #logout"]="logout",i[d.defaultClickEvent+" #delete-account"]="deleteAccount",h.extend({id:"settings-view",title:function(){return __("settings")},events:i,initialize:function(){this.template=c.template(g),this.userView=null,this.alreadyRendered=!1},dispose:function(){this.alreadyRendered=!1,this.userView&&this.userView.dispose(),h.prototype.dispose.call(this)},render:function(){if(this.alreadyRendered)return this.userView.render(),this;this.alreadyRendered=!0;var a=d.isLoggedIn,c=d.user?d.user.toJSON():{email:""};return this.renderSelf({app:d,user:c,isLoggedIn:a}),this.renderHeader({showBackButton:!0,showSaveButton:!0,el:b("header",this.el)[0],title:this.title()}),this.userView=new f({el:b("#user-sub-view",this.el)[0],model:d.user}),this.userView.render(),this},logout:function(a){return a.preventDefault(),setTimeout(function(){e.dialog(__("really"),function(a){a&&d.router.go("logout")},!0)},20),!1},deleteAccount:function(a){a.preventDefault();var b=function(a){return a?(d.router.deauthenticateUser(),void d.user.destroy({success:function(){setTimeout(function(){e.notify(__("successfullyDeleted"))},100)},error:function(a,b){var c=__("error");b&&b.message&&(c=b.message),e.notify(c)}})):!1};return setTimeout(function(){e.dialog(__("reallyDeleteAccount"),b,!0)},20),!1}})}),define("text!templates/help.html",[],function(){return'<header></header>\n\n<div class="content">\n    <%= __(\'helpText\') %>\n\n    <div class="divider"></div>\n\n    <h2>Version</h2>\n    <p><%- app.VERSION %></p>\n\n    <div class="divider"></div>\n\n    <h2>Copyright Information</h2>\n    <p><strong><a target="_blank" href="http://zeptojs.com">Zepto</a></strong><br/>Copyright &copy; 2010-2013 Thomas Fuchs (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://backbonejs.org">Backbone.js</a></strong><br/>Copyright &copy; 2010-2013 Jeremy Ashkenas, DocumentCloud Inc. (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://lodash.com">Lodash</a></strong><br/>Copyright &copy; 2012-2013 The Dojo Foundation (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://h5bp.com">HTML5 Boilerplate</a></strong><br/>Copyright &copy; HTML5 Boilerplate (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://requirejs.org">Require.js</a></strong><br/>Copyright &copy; 2010-2013, The Dojo Foundation All Rights Reserved. (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://momentjs.com">Moment.js</a></strong><br/>Copyright &copy; 2011-2013 Tim Wood (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://mobiscroll.com">MobiScroll Date & Time Scroller</a></strong><br/>Copyright &copy; 2010-2013, Acid Media (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://maker.github.io/ratchet">Ratchet</a></strong><br/>Copyright &copy; 2012 DHG, CONNORS, FAT and other contributors (MIT Licence)</p>\n    <br/>\n    <p><a target="_blank" href="https://github.com/mwager/atonego">...and many more</a></p>\n\n    <div class="divider"></div>\n\n    <h2>Credits</h2>\n    <p>Development: <a target="_blank" href="http://mwager.de">Michael Wager</a></p>\n    <p>Design: <a target="_blank" href="http://projekthelden.de">Projekthelden</a></p>\n    <br/>\n</div>'}),define("views/help",["underscore","app","zepto","text!templates/help.html","views/base"],function(a,b,c,d,e){"use strict";var f={};return e.extend({id:"help-view",title:function(){return __("help")},events:f,initialize:function(){this.template=a.template(d)},dispose:function(){e.prototype.dispose.call(this)},render:function(){return this.renderSelf({app:b}),this.renderHeader({showBackButton:!0,el:c("header",this.el)[0],title:this.title()}),this}})}),define("models/todo",["require","backbone","app"],function(a){"use strict";var b=a("backbone"),c=a("app");return b.Model.extend({idAttribute:"_id",urlRoot:c.API_ROOT+"/api/v1/todos",defaults:{title:"",completed:!1,notice:"",date:null,users_to_notify:[],order:0}})}),define("text!templates/todos/todoscontainer.html",[],function(){return'<header></header>\n\n<!-- "RootView" - renders all relevant containers only once -->\n<div class="content">\n    <input id="new-todo-title"  type="text"\n           placeholder="<%= __(\'newTodo\') %>">\n\n    <div class="divider"></div>\n\n    <div id="todosview">\n        <ul id="uncompleted-list" class="aog-list"></ul>\n\n        <div class="divider"></div>\n\n        <div id="clear-completed-btn-view"></div>\n\n        <ul id="completed-list" class="aog-list"></ul>\n    </div>\n\n    <br />\n</div>\n'}),define("text!templates/todos/editlayer.html",[],function(){return'<div id="edit-layer-wrapper" class="modal">\n    <header class="bar-title modal-header">\n        <h1 class="title"><%- todo.title.substr(0, 7) + \'...\' %></h1>\n\n        <!-- this save btn is never disabled as it also closes the modal -->\n        <a id="header-save" href="#"\n            class="close-layer save"></a>\n\n    </header>\n\n    <div class="content content-padded">\n\n        <input type="text" id="todo-title" value="<%- todo.title %>">\n\n        <p id="timestamp" class="aog-green-text centered small"><%- __(\'updated\') %> <%- common.fromNow(todo.updated_at, false, app.lang) %> <%- __(\'by\') %> <%- common.getUser(todo, true) %></p>\n\n        <div class="centered">\n            <textarea id="notice" rows="3" placeholder="<%- __(\'notices\') %>"\n                readonly><%- todo.notice %></textarea>\n        </div>\n\n        <!-- bei completed todos gibts keine Benachrichtigungen mehr -->\n        <div class="<%- todo.completed ? \'hidden\' : \'\' %>">\n            <h2 class="centered"><%= __(\'notifySettings\') %></h2>\n\n            <input type="text" id="date-input" style="margin-bottom: 0px;"\n                placeholder="<%- __(\'todoDate\') %>"\n                value="<%- date %>" readonly>\n\n            <br /><br />\n\n            <div class="choose-participants hidden">\n                <p class="aog-green-text centered"><%- __(\'notificationQuestion\') %></p>\n\n                <ul class="aog-list">\n                    <% _.each(todolist.participants, function(user) { %>\n                    <li class="no-link">\n                        <div class="ago-toggle-wrap">\n                        <%\n                        var isChecked = _.indexOf(todo.users_to_notify, user._id) >= 0;\n                        %>\n                        <span class="ago-toggle <%- isChecked ? \'checked\' : \'\' %>"\n                            data-user-id="<%- user._id %>"></span>\n                        </div>\n\n                        <div class="title-wrap">\n                            <p class="title">\n                                <%- theUser._id == user._id ? __(\'me\') : user.display_name + \' (\' + user.email + \')\' %>\n                            </p>\n                        </div>\n                    </li>\n                    <% }); %>\n                </ul>\n\n                <br /><br />\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/todos/editlayer",["require","app","zepto","common","views/base","text!templates/todos/editlayer.html","underscore"],function(a){"use strict";var b=a("app"),c=a("zepto"),d=a("common"),e=a("views/base"),f=a("text!templates/todos/editlayer.html"),g=a("underscore"),h={};h["focus input"]="switchToEditMode",h["focus textarea"]="switchToEditMode",h[b.defaultClickEvent+" .close-layer"]="close",h[b.defaultClickEvent+" .ago-toggle-wrap"]="toggleCheckbox",h[b.defaultClickEvent+" #date-input"]="onClickDate";var i=e.extend({template:g.template(f),__id:"todo-edit-layer",events:h,initialize:function(a){this.editMode=!1,this.todo=a.todo,this.listenTo(this.todo,"change",this.render),this.$el=c("#"+this.__id),this.$el.length>0&&this.$el.remove();var b=c("body");b.append('<div id="'+this.__id+'"></div>'),this.$el=c("#"+this.__id),this.el=this.$el[0]},open:function(){this.render();var a=this.$el.find(".modal");setTimeout(function(){a.addClass("active")},30)},close:function(){if(!this.$el||0===this.$el.length)return!1;var a=this,b=this.$el.find(".modal");b.length>0?(b.removeClass("active"),this.editMode&&setTimeout(function(){a.saveTodo()},0),setTimeout(function(){a.$el.length>0&&a.dispose()},500)):this.dispose()},render:function(){var a=this,e=this.todo.toJSON(),f=e.date?d.parseDate(new Date(e.date),b.lang):"",h=b.todolists.get(e.todolist);h||(h=b.todolists.get(e.todolist._id));var i=h.toJSON(),j=b.user.toJSON();return 0===f.length&&g.each(i.participants,function(a){e.users_to_notify.push(a._id)}),this.renderSelf({_:g,common:d,app:b,todo:e,date:f,todolist:i,theUser:j}),this.$headerTitle=c(".bar-title .title",this.el),this.$todoTitle=c("#todo-title",this.el),this.$notice=c("#notice",this.el),this.$date=c("#date-input",this.el),this.$chooseParticipants=c(".choose-participants",this.el),e.date&&setTimeout(function(){a.$chooseParticipants.removeClass("hidden")},10),setTimeout(function(){a.$notice.attr("readonly",null),a.__initDatepicker()},700),this},__initDatepicker:function(){var a=this,d=new Date,e={preset:"datetime",minDate:d,maxDate:new Date(d.getFullYear()+2,d.getMonth(),d.getDay()),stepMinute:5};this.$date.scroller("destroy").scroller(c.extend(e,{theme:"default",mode:"clickpick",lang:b.lang,display:"top",animate:"",onCancel:function(){setTimeout(function(){a.$chooseParticipants.addClass("hidden")},1e3),a.$date.val("")},onSelect:function(){setTimeout(function(){a.$chooseParticipants.removeClass("hidden")},10)}}))},saveTodo:function(){var a=this,e=this.$todoTitle.val().trim(),f=this.$notice.val().trim(),g=this.$date.val().trim(),h=null,i=d.getDateParser(b.lang);if(g.length>0&&(h=i.parse(g)),f.length>1024)return!1;var j,k=[];c(".ago-toggle",this.el).each(function(){j=c(this),j.hasClass("checked")&&k.push(j.attr("data-user-id"))});var l=null===h?"":h.getTime(),m={title:e,notice:f,date:l,users_to_notify:k,updated_at:(new Date).getTime(),updated_by:b.user.toJSON()};this.todo.set(m,{silent:!0});var n=this.todo.collection,o=this.todo.get("todolist"),p=b.todolists.get(o);p&&n&&(n=n.toJSON(),p.set({todos:n},{silent:!0}));var q=this.todo.hasChanged("title")||this.todo.hasChanged("notice")||this.todo.hasChanged("date")||this.todo.hasChanged("users_to_notify");return q?(d.showLoader(),void this.todo.save(m,{patch:!0,success:function(){a.trigger("save-success",a.todo.toJSON()),d.hideLoader()},error:function(){d.notify(__("error")),d.hideLoader()}})):!1},toggleCheckbox:function(a){return c(a.currentTarget).find(".ago-toggle").toggleClass("checked"),this.switchToEditMode(),!1},switchToEditMode:function(){this.editMode=!0},onClickDate:function(a){var b=c(a.currentTarget);
b.focus()}});return i}),define("text!templates/todos/todoview.html",[],function(){return'<div class="ago-toggle-wrap">\n    <span class="ago-toggle <%- todo.completed ? \'checked\' : \'\' %>"></span>\n</div>\n\n<div class="title-wrap">\n    <p class="title"><%- todo.title %></p>\n</div>\n\n<div class="edit-wrap hidden">\n    <input type="text" class="edit">\n</div>\n'}),define("views/todos/todoview",["require","app","common","zepto","underscore","views/todos/editlayer","text!templates/todos/todoview.html","views/base"],function(a){"use strict";var b=a("app"),c=a("common"),d=a("zepto"),e=a("underscore"),f=a("views/todos/editlayer"),g=a("text!templates/todos/todoview.html"),h=a("views/base"),i={};i[b.defaultClickEvent+" .ago-toggle-wrap"]="toggleCompleted",i[b.defaultClickEvent+" .title-wrap"]="openEditLayer",b.isMobile&&(i["longTap .title-wrap"]="edit"),i["blur .edit"]="close",i["keyup .edit"]="updateOnEnter";var j=h.extend({tagName:"li",attributes:{},template:e.template(g),events:i,initialize:function(a){if(!a.parentView)throw"todoview.js: no parentView provided";this.editMode=!1,this.parentView=a.parentView,this.listenToModel()},listenToModel:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"remove",this.remove)},rebindAllEvents:function(){this.listenToModel(),this.delegateEvents()},dispose:function(){h.prototype.dispose.call(this)},render:function(){var a=this.model.toJSON();return this.renderSelf({common:c,todo:a}),this.$completedCheckbox=d(".ago-toggle",this.el),this.$title=d(".title",this.el),this.$input=d(".edit",this.el),this.$inputWrap=d(".edit-wrap",this.el),this.$el.toggleClass("completed",this.model.get("completed")),this},edit:function(a){var b=this;return a&&(a.preventDefault(),a.stopPropagation()),this.editMode=!0,this.$input.val(this.$title.html()),this.$inputWrap.removeClass("hidden"),this.$completedCheckbox.addClass("hidden"),this.$el.addClass("editing"),setTimeout(function(){b.$input.focus()},0),!1},close:function(a){if(a&&a.preventDefault(),this.model.isNew())return!1;var b=this.$input.val().trim(),c=this.model.get("title");b&&b!==c&&(this.$title.html(b),this.saveTodo()),this.$inputWrap.addClass("hidden"),this.$el.removeClass("editing"),this.$completedCheckbox.removeClass("hidden")},updateOnEnter:function(a){var b=a.keyCode||a.which;return 13===b?(this.close(),!1):void 0},openEditLayer:function(a){if(this.model.isNew())return!1;a&&(a.preventDefault(),a.stopPropagation());var b=new f({todo:this.model});return b.on("save-success",e.bind(function(a){this.model.set(a,{silent:!0}),this.render()},this)),b.open(),!1},toggleCompleted:function(){var a=this;return this.editMode?(this.editMode=!1,!1):this.model.isNew()?!1:(this.$completedCheckbox.toggleClass("checked",this.model.get("checked")),this.$el.animate({opacity:0,translate3d:"0,0%,0"},{duration:200,easing:"ease",complete:function(){a.saveTodo(null,!0)}}),!1)},saveTodo:function(a,e){a&&a.preventDefault();var f=d.trim(this.$title.html());if(f.length<=0||f.length>1024)return!1;var g={title:f,completed:e?!this.model.get("completed"):this.model.get("completed")};this.model.set(g);var h=this.model.collection,i=this.model.get("todolist"),j=b.todolists.get(i);j&&h&&(h=h.toJSON(),j.set({todos:h},{silent:!0})),c.showLoader(),this.model.save(g,{patch:!0,success:function(){c.hideLoader()},error:function(a,b){var d=__("error"),e=JSON.parse(b.responseText);e&&e.message&&e.message.key&&(d=__(e.message.key)),c.hideLoader(),c.notify(d)}})},destroy:function(a,b){a&&a.preventDefault();var d=this,e=function(a){return a?(c.showLoader(),void d.model.destroy({success:function(){c.hideLoader()},error:function(a,b){var d=__("error");b&&b.message&&(d=b.message),c.hideLoader(),c.notify(d,6e3)}})):!1};return b?e(!0):(setTimeout(function(){c.dialog(__("really"),e,!0)},20),!1)},preventDefault:function(a){a.preventDefault()}});return j}),define("text!templates/todos/todosview.html",[],function(){return""}),define("views/todos/todosview",["require","app","common","zepto","underscore","views/base","views/todos/todoview","text!templates/todos/todosview.html"],function(a){"use strict";var b=a("app"),c=a("common"),d=a("zepto"),e=a("underscore"),f=a("views/base"),g=a("views/todos/todoview"),h=a("text!templates/todos/todosview.html"),i={};return f.extend({events:i,template:e.template(h),todoSubViews:{},initialize:function(a){if(!a||!a.listID)throw{message:"no list id provided"};if(!a||!a.todosInstance)throw{message:"no todos-collection instance provided"};if(this.listID=a.listID,this.isFetching=!1,this.list=b.todolists.get(this.listID),!this.list)throw{message:"no todolist found for ID = "+this.listID};if(this.todos=a.todosInstance,this.$input=d("#new-todo"),this.$title=d("#title"),this.$uncompletedList=d("#uncompleted-list",this.el),this.$completedList=d("#completed-list",this.el),this.uncompletedListEl=this.$uncompletedList[0],this.completedListEl=this.$completedList[0],b&&b.todolists){var e=b.todolists.get(this.listID).get("title");this.$title.html(c.escape(e))}this.listenToCollection(),this.fetchTodos()},dispose:function(){e.each(this.todoSubViews,function(a){a&&e.isFunction(a.dispose)&&a.dispose()}),f.prototype.dispose.call(this)},listenToCollection:function(){var a=this;this.listenTo(this.todos,"fetched",function(){var b,c,d;e.each(a.todos.models,function(f){d=f.get("_id")||f.cid,c=a.todoSubViews[d],c&&e.isFunction(c.dispose)&&c.dispose(),b=new g({model:f,parentView:a}),a.todoSubViews[d]=b}),a.addAll()},this),this.listenTo(this.todos,"add",function(a){this.addOne(a)},this),this.listenTo(this.todos,"change:completed",function(a){this.addOne(a)},this),this.listenTo(this.todos,"remove",function(a){var b=a.get("_id")||a.cid;delete this.todoSubViews[b]},this),this.listenTo(this.todos,"create_success",function(a){this.todoSubViews[a.get("_id")]=this.todoSubViews[a.cid],delete this.todoSubViews[a.cid],this.addOne(a)})},fetchTodos:function(){var a=this,c=this.list.get("todos");c&&c.length>0&&(log("local todos: "+c.length),a.todos.reset(void 0,{silent:!0}),a.todos.add(c,{silent:!0}),a.todos.trigger("fetched"));var d=b.router.getLastRoute();/todolists\/edit/.test(d)||setTimeout(function(){a.__fetchTodosFromServer()},200)},__fetchTodosFromServer:function(){var a=this;return b.checkInternetConnection()?this.isFetching?!1:(this.isFetching=!0,c.showLoader(),void this.todos.fetch({data:{list_id:this.listID},success:function(d,e){if(a.isFetching=!1,a.trigger("fetch-success"),c.hideLoader(),a.todos.trigger("fetched"),e&&e.length>0){var f=b.todolists.get(a.listID);f&&f.set({todos:e},{silent:!0})}},error:function(){a.isFetching=!1,c.hideLoader(),c.notify(__("error"))}})):!1},render:function(){return this},getTodoSubview:function(a){var b=a.get("_id")||a.cid,c=this.todoSubViews[b];return c?c.model=a:c=this.todoSubViews[b]=new g({model:a,parentView:this}),c?c:!1},addOne:function(a,b){var c=this.getTodoSubview(a);c&&(b||c.$el.prependTo(a.get("completed")?this.$completedList:this.$uncompletedList),c.render(),c.$el.css("opacity",1))},addAll:function(){this.$uncompletedList.empty(),this.$completedList.empty();var a,b=this,c=document.createDocumentFragment(),d=document.createDocumentFragment();this.todos.each(function(e){a=b.getTodoSubview(e),a.render(),e.get("completed")?d.appendChild(a.el):c.appendChild(a.el)},this),this.uncompletedListEl.appendChild(c),this.completedListEl.appendChild(d)}})}),define("text!templates/todos/clearcompletedbtn.html",[],function(){return"\n<a id=\"clear-completed\" href=\"#\" class=\"<%= completed ? '' : 'disabled' %> destructive\">\n<%- __('delete') %>\n</a>\n\n<p class=\"aog-green-text green-header\"><%- __('completedTodos', {completed: completed}) %></p>\n"}),define("views/todos/clearcompletedbtn",["require","app","views/base","text!templates/todos/clearcompletedbtn.html","underscore","zepto","common"],function(a){"use strict";var b=a("app"),c=a("views/base"),d=a("text!templates/todos/clearcompletedbtn.html"),e=a("underscore"),f=a("zepto"),g=a("common"),h={};return h[b.defaultClickEvent+" #clear-completed"]="clearCompleted",c.extend({template:e.template(d),events:h,initialize:function(a){if(this.collapsed=!0,!a||!a.listID)throw"clearcompletedbtn.js: no list id provided";this.listID=a.listID,this.todosColl=b.todosCollectionInstance,this.listenTo(this.todosColl,"all",this.render)},render:function(){var a=this.todosColl.completed().length;this.renderSelf({completed:a})},clearCompleted:function(a){var c=this;a.preventDefault();var d=f(a.currentTarget);if(d.hasClass("disabled"))return!1;var e=function(a){return a?(g.showLoader(),void c.todosColl.destroyCompleted(function(a,d){if(g.hideLoader(),a&&g.notify(__("error")),d){var e=c.todosColl,f=c.listID;if(e&&f){e=e.toJSON();var h=b.todolists.get(f);h&&h.set({todos:e},{silent:!0})}}})):!1};return setTimeout(function(){g.dialog(__("really"),e,!0)},20),!1}})}),define("views/todos/todoscontainer",["require","underscore","app","common","zepto","models/todo","text!templates/todos/todoscontainer.html","views/base","views/todos/todosview","views/todos/clearcompletedbtn"],function(a){"use strict";var b=a("underscore"),c=a("app"),d=a("common"),e=a("zepto"),f=a("models/todo"),g=a("text!templates/todos/todoscontainer.html"),h=a("views/base"),i=a("views/todos/todosview"),j=a("views/todos/clearcompletedbtn"),k={};return k["keyup #new-todo-title"]="validateAndSaveOnEnter",k["blur #new-todo-title"]="createTodo",h.extend({id:"todoscontainer",template:b.template(g),events:k,initialize:function(a){if(!a||!a.listID)throw"no list id provided";this.listID=a.listID,this.todolist=c.todolists.get(a.listID),c.todosCollectionInstance.reset(this.todolist.get("todos")),this.todos=c.todosCollectionInstance},dispose:function(){var a=function(a){a&&b.isFunction(a.dispose)&&a.dispose()};a(this.todosView),a(this.clearBtn),h.prototype.dispose.call(this)},render:function(){var a=c.todolists.get(this.listID);return this.renderSelf({listID:this.listID,common:d,todolist:this.todolist?this.todolist.toJSON():{}}),this.renderHeader({showHomeButton:!0,showListEditButton:!0,listID:this.listID,el:e("header",this.el)[0],title:a.get("title")}),this.todosView=new i({el:e("#todosview",this.el)[0],todosInstance:this.todos,listID:this.listID}),this.$input=e("#new-todo-title",this.el),this.$save=e("#save-todo",this.el),this.clearBtn=new j({el:e("#clear-completed-btn-view",this.el),listID:this.listID}),this.clearBtn.render(),this},validateNewTodo:function(){var a=this.$input.val().length>0&&this.$input.val().length<=1024;return a},validateAndSaveOnEnter:function(a){if(this.validateNewTodo()){var b=a?a.keyCode||a.which:null;13===b&&this.createTodo()}},createTodo:function(a){var b=this;if(a&&a.preventDefault(),!this.validateNewTodo())return!1;var e=new f({list_id:this.listID,title:this.$input.val(),completed:!1});b.todos.add(e),c.todosCollectionInstance.trigger("reset"),d.showLoader(),this.$input.val(""),e.save(null,{success:function(a){d.hideLoader(),a.trigger("create_success",a);var c=a.collection,e=a.get("todolist");c&&e&&(c=c.toJSON(),b.__updateTodosCollection(e,c))},error:function(a,c){var f=JSON.parse(c.responseText),g=__("error");f&&f.message&&f.message.key&&(g=__(f.message.key)),d.hideLoader(),d.notify(g),b.todos.remove(e)}})},pushUpdate:function(a,b){switch(a){case"create_todo":this.todos.add(new f(b));break;case"update_todo":var c=this.todos.get(b._id);if(!c)return!1;c.set(b);break;case"delete_todo":this.todos.remove(b._id);break;case"delete_todos":var d=this,e=b;e.forEach(function(a){d.todos.remove(a._id)})}var g=this.todos.toJSON();this.__updateTodosCollection(this.listID,g)},refetchTodos:function(){this.todosView&&this.todosView.__fetchTodosFromServer()},__updateTodosCollection:function(a,b){var d=c.todolists.get(a);d&&d.set({todos:b},{silent:!0})}})}),define("text!templates/login.html",[],function(){return'<header></header>\n\n<div id="login-form" class="content">\n    <input class="login-input" placeholder="<%= __(\'userDisplayEmail\') %>"    type="email"    id="email">\n    <input class="login-input" placeholder="<%= __(\'userDisplayPassword\') %>" type="password" id="password">\n\n    <button id="login-btn" class="aog-button aog-big aog-green" disabled><%= __(\'login\') %></button>\n\n    <br/>\n    <div class="aog-centered">\n        <a href="<%- __app_config__.WEBSITE_BASE_URL + \'password/recover?lang=\' + app.lang %>">\n            <%= __(\'recoverPasswort\') %>\n        </a>\n    </div>\n</div>\n'}),define("views/login",["require","zepto","underscore","app","common","text!templates/login.html","views/base"],function(a){"use strict";var b=a("zepto"),c=a("underscore"),d=a("app"),e=a("common"),f=a("text!templates/login.html"),g=a("views/base"),h={};return h["keyup .login-input"]="validate",h[d.defaultClickEvent+" #login-btn"]="login",g.extend({id:"login-view",title:function(){return __("login")},events:h,initialize:function(){this.template=c.template(f)},dispose:function(){g.prototype.dispose.call(this)},render:function(){this.renderSelf({app:d}),this.renderHeader({showBackButton:!0,el:b("header",this.el)[0],title:this.title()});var a=e.store.get("email");return this.$email=b("#email",this.el),this.$pw=b("#password",this.el),this.$loginBtn=b("#login-btn",this.el),a&&this.$email.val(a),this},validate:function(a){var b=a.keyCode||a.which,c=this.$email.val().length>0&&this.$pw.val().length>0;try{this.$loginBtn.attr("disabled",c?null:!0)}catch(a){}return 13===b&&this.login(),c},_toggleButtons:function(a){try{this.$loginBtn.attr("disabled",a?null:!0)}catch(b){}},login:function(a){a&&a.preventDefault();var b=this;if(this.$loginBtn.attr("disabled"))return!1;var c=e.escape(this.$email.val()),f=e.escape(this.$pw.val());return e.store.set("email",c),d.checkInternetConnection()?(this._toggleButtons(!1),e.showDefaultLoader(),this.$email.blur(),this.$pw.blur(),d.login(c,f,function(a,c){return e.hideDefaultLoader(),a?(b._toggleButtons(!0),e.notify(a,5e3)):void(c&&d.router.go("todolists"))}),!1):(e.notify(__("noInternetConnection")),!1)}})}),define("text!templates/signup.html",[],function(){return'<header></header>\n\n<div id="signup-form" class="content">\n    <input placeholder="<%= __(\'userDisplayName\') %>"\n        class="signup-input" type="text" id="display_name">\n\n    <input placeholder="<%= __(\'userDisplayEmail\') %>"\n        class="signup-input" type="email" id="email">\n\n    <input placeholder="<%= __(\'userDisplayPassword\') %>" class="signup-input" type="password" id="password">\n    <input placeholder="<%= __(\'userDisplayPasswordAgain\') %>" class="signup-input" type="password" id="password2">\n    <p id="pw-error" class="error-msg small hidden"><%- __(\'passwordError\') %></p>\n\n    <p><%= __(\'termsAcceptText\') %></p>\n    <button id="signup" class="aog-button aog-big aog-green" disabled>\n        <%= __(\'signupButton\') %>\n    </button>\n</div>\n'}),define("views/signup",["require","underscore","zepto","app","common","text!templates/signup.html","views/base"],function(a){"use strict";var b=a("underscore"),c=a("zepto"),d=a("app"),e=a("common"),f=a("text!templates/signup.html"),g=a("views/base"),h={};return h["keyup .signup-input"]="validate",h["blur #password2"]="validateOnFormInputBlur",h[d.defaultClickEvent+" #signup"]="signup",g.extend({id:"signup-view",title:function(){return __("signup")},events:h,initialize:function(){this.template=b.template(f)},render:function(){return this.renderSelf(),this.renderHeader({showBackButton:!0,el:c("header",this.el)[0],title:this.title()}),this.$display_name=c("#display_name",this.el),this.$email=c("#email",this.el),this.$pw=c("#password",this.el),this.$pw2=c("#password2",this.el),this.$pwErr=c("#pw-error",this.el),this.$signupBtn=c("#signup",this.el),this.$cancelBtn=c(".cancel",this.el),this},validate:function(){var a=this.$email.val().length>0&&this.$pw.val().length>5&&this.$pw2.val().length>5&&/@/.test(this.$email.val());return c.trim(this.$pw.val())!==c.trim(this.$pw2.val())&&(a=!1),this.$signupBtn.attr("disabled",a?null:!0),a&&this.$pwErr.addClass("hidden"),a},validateOnFormInputBlur:function(){var a=c("#pw-error",this.el);a.toggleClass("hidden",this.validate())},_toggleButtons:function(a){this.$cancelBtn.attr("disabled",a?null:!0),this.$signupBtn.attr("disabled",a?null:!0)},signup:function(a){a.preventDefault();var b=c(a.currentTarget);if(b.attr("disabled"))return!1;if(!d.checkInternetConnection())return e.notify(__("noInternetConnection")),!1;if(!this.validate())return!1;var f=this,g=e.escape(c.trim(this.$display_name.val())),h=e.escape(c.trim(this.$email.val())),i=e.escape(c.trim(this.$pw.val())),j=e.escape(c.trim(this.$pw2.val()));return i!==j?!1:(this._toggleButtons(!1),this.$display_name.blur(),this.$email.blur(),this.$pw.blur(),this.$pw2.blur(),e.showDefaultLoader(),c.ajax({cache:!1,timeout:d.AJAX_TIMEOUT,type:"POST",dataType:"json",data:{display_name:g,email:h,p1:i,lang:d.lang},url:d.API_ROOT+"/api/v1/signup",success:function(a){return e.hideDefaultLoader(),a.error?(f._toggleButtons(!0),void e.notify(__(a.error),8e3)):(e.store.set("email",h),setTimeout(function(){e.notify(__("signupSuccessMessage"),8e3)},100),d.router.setAuthenticated(a),d.router.go("todolists"),void d.activityCollection.addActivity({key:"welcome_message_after_signup"}))},error:function(){e.hideDefaultLoader(),e.notify(__("error"),3e3),f._toggleButtons(!0)}}),!1)}})}),define("text!templates/lists/listview.html",[],function(){return'<header></header>\n\n<div class="content">\n    <% var len = app.todolists.length; %>\n\n    <h1 id="welcome">\n    <% if(user.display_name && user.display_name.length > 0) { %>\n    Hi <%- user.display_name %> !\n    <% } else { %>\n    loading...\n    <% } %>\n    </h1>\n\n    <input type="text" id="create-list" placeholder="<%- __(\'newList\') %>">\n\n    <div class="divider"></div>\n\n    <h2><%= __("lists") + \' (<span id="list-len">\' + len + \'</span>)\' %></h2>\n\n    <ul id="todolists" class="aog-list"></ul>\n\n    <div class="divider"></div>\n\n    <div id="activities"></div>\n    <br /><br />\n    <div class="divider"></div>\n\n    <a href="#settings" class="aog-button aog-big aog-white nav-settings">\n        <%= __(\'settings\') %>\n    </a>\n\n    <a href="#help" class="aog-button aog-big aog-white nav-help">\n        <%= __(\'help\') %>\n    </a>\n</div>\n'}),define("models/todolist",["require","backbone","app"],function(a){"use strict";var b=a("backbone"),c=a("app"),d=b.Model.extend({idAttribute:"_id",urlRoot:c.API_ROOT+"/api/v1/lists",defaults:{title:"",user:null,todos:[],participants:[]},validate:function(a){return"string"==typeof a.title&&(0===a.title.length||a.title.length>32)?__("listTitleError"):void 0},getUncompletedTodosCount:function(){var a=0,b=this.get("todos");return 0===b.length?0:(b.forEach(function(b){b.completed||(a+=1)}),a)}});return d}),define("text!templates/lists/todolist.html",[],function(){return""}),define("text!templates/lists/todolistitem.html",[],function(){return'<a class="show-list" href="#todolists/<%- todolist._id %>">\n    <%- todolist.title %><span class="count"><%- uncompletedTodosCount %></span>\n</a>\n'}),define("views/lists/todolistitem",["require","underscore","app","views/base","text!templates/lists/todolistitem.html"],function(a){"use strict";var b=a("underscore"),c=a("app"),d=a("views/base"),e=a("text!templates/lists/todolistitem.html"),f={};return d.extend({tagName:"li",events:f,template:b.template(e),initialize:function(a){var b=this;if(!a||!a.todolist)throw"todolistitem.js: no todolist model provided!";this.todolist=a.todolist,this.listenTo(this.todolist,"change",this.render),this.listenTo(this.todolist,"destroy",function(a){b._onDelete(a.get("_id"))})},render:function(){var a=this.todolist.toJSON();return this.renderSelf({todolist:a,uncompletedTodosCount:this.todolist.getUncompletedTodosCount()}),this},_onDelete:function(a){c.router.go("todolists"),c.todolists.remove(a)}})}),define("views/lists/todolist",["require","app","underscore","text!templates/lists/todolist.html","models/todolist","views/base","views/lists/todolistitem"],function(a){"use strict";var b=a("app"),c=a("underscore"),d=a("text!templates/lists/todolist.html"),e=a("models/todolist"),f=a("views/base"),g=a("views/lists/todolistitem"),h={};return f.extend({events:h,initialize:function(){this.template=c.template(d),this.listenTo(b.todolists,"add",this.addTodolistItem),this.listenTo(b.todolists,"remove",this.render),this.listenTo(b.todolists,"reset",this.reset)},reset:function(){this.$el.empty()},render:function(){var a=this;this.$el.empty();var d,e=document.createDocumentFragment();return c.each(b.todolists.models,function(b){d=a.getTodolistSubViewFromModel(b),d.render(),e.appendChild(d.el)}),this.el.appendChild(e),this},getTodolistSubViewFromModel:function(a){var b;return c.isFunction(a.trigger)||(a=new e(a)),b=new g({todolist:a})},addTodolistItem:function(a){var b=this.getTodolistSubViewFromModel(a);b.$el.appendTo(this.$el),b.render()}})}),define("text!templates/lists/activities.html",[],function(){return"<!-- AktivitÃ¤ten: nur zeigen wenn auch welche vorhanden -->\n<div class=\"divider\"></div>\n<h2><%- __('activities') %></h2>\n\n<% if(activities && activities.length === 0) { %>\n<p class=\"aog-green-text\"><%- __('no_activities') %></p>\n<% } else if(activities && activities.length > 1) { %>\n<a href=\"#\" class=\"remove-activities destructive\"><%- __('removeAll') %></a>\n<% } %>\n\n\n<% if(activities.length > 0) { %>\n<ul class=\"aog-list white-list\">\n    <% _.each(activities, function(activity) { %>\n    <li class=\"no-link\" id=\"activity-<%- activity.id %>\">\n        <% switch(activity.key) {\n            case 'invitation': %>\n            <p><%- __('acceptInvitationQuestion') %></p>\n\n            <p><%- __('from') %>:\n            <strong><%- activity.data.user.display_name || activity.data.user.email %></strong>\n            </p>\n\n            <p><%- __('list') %>:\n                <strong><%- activity.data.list.title %></strong>\n            </p>\n\n            <div>\n                <button class=\"accept-invitation aog-button aog-green\"\n                        data-user-id=\"<%- activity.data.user._id %>\"\n                        data-list-id=\"<%- activity.data.list._id %>\"\n                        data-activity-id=\"<%- activity.id %>\">\n                    <%- __('yes') %>\n                </button>\n                <button class=\"reject-invitation aog-button aog-red\"\n                        data-user-id=\"<%- activity.data.user._id %>\"\n                        data-list-id=\"<%- activity.data.list._id %>\"\n                        data-activity-id=\"<%- activity.id %>\">\n                    <%- __('no') %>\n                </button>\n            </div>\n            <% break; %>\n\n            <% case 'invitation_accepted': %>\n            <p><%- __('invitation_accepted', {username: activity.data.user.display_name, list: activity.data.list.title}) %></p>\n            <% break; %>\n\n            <% case 'invitation_rejected': %>\n            <p><%- __('invitation_rejected', {username: activity.data.user.display_name, list: activity.data.list.title}) %></p>\n            <% break; %>\n\n            <% case 'update_list': %>\n            <p><%- __('update_list', {list: activity.data.title}) %></p>\n            <% break; %>\n\n            <% case 'delete_list': %>\n            <p><%- __('delete_list', {list: activity.data.title}) %></p>\n            <% break; %>\n\n            <% case 'create_todo': %>\n            <p><%- __('create_todo', {todo: activity.data.title, list: activity.data.todolist.title}) %></p>\n            <% break; %>\n\n            <% case 'delete_todo': %>\n            <p><%- __('delete_todo', {todo: activity.data.title, list: activity.data.todolist.title}) %></p>\n            <% break; %>\n\n            <% case 'delete_todos': %>\n            <p><%- __('delete_todos', {str: activity.data.str, list: activity.data.list}) %></p>\n            <% break; %>\n\n            <% case 'list_access_removed': %>\n            <p><%- __('list_access_removed', {username: activity.data.user.display_name, list: activity.data.list.title}) %></p>\n            <% break; %>\n\n            <% case 'push_notification': %>\n            <p><%= activity.data.body + ' (' + common.fromNow(activity.data.timestamp, false, app.lang) + ')' %></p>\n            <% break; %>\n\n            <% case 'welcome_message_after_signup': %>\n            <p>Hi <%- app.user.get('display_name') %>!</p>\n            <p><%= __('welcome_message_after_signup') %></p>\n            <% break; %>\n        <% } /* end switch*/ %>\n\n        <% if(activity.key !== 'invitation') { %>\n        <!-- jede Notification (auÃer vom typ \"invitation\") hat einen \"remove-button\" -->\n        <div class=\"divider\"></div>\n        <a href=\"#\" class=\"remove-activity destructive\" data-activity-id=\"<%- activity.id %>\"><%- __('remove') %></a>\n        <% } %>\n    </li>\n    <% }); %>\n</ul>\n<% } %>\n"}),define("views/lists/activities",["require","underscore","zepto","app","common","text!templates/lists/activities.html","models/user","views/base"],function(a){"use strict";var b=a("underscore"),c=a("zepto"),d=a("app"),e=a("common"),f=a("text!templates/lists/activities.html"),g=a("models/user"),h=a("views/base"),i={};return i[d.defaultClickEvent+" .accept-invitation"]="acceptInvitation",i[d.defaultClickEvent+" .reject-invitation"]="rejectInvitation",i[d.defaultClickEvent+" .remove-activity"]="removeOneActivity",i[d.defaultClickEvent+" .remove-activities"]="removeAllActivities",h.extend({template:b.template(f),events:i,initialize:function(){this.template=b.template(f),this.user=d.user,this.listenTo(d.user,"change",this.render),this.listenTo(d.activityCollection,"add",this.render),this.listenTo(d.activityCollection,"remove",this.render),this.listenTo(d.activityCollection,"reset",this.render)},render:function(){var a=this.user?this.user.toJSON():new g;b.each(a.invite_list_ids,function(a){a.user&&a.list&&d.activityCollection.addActivity({key:"invitation",data:a,id:a.list._id+"_"+a.user._id},!0)});var c=d.activityCollection.toJSON();return this.renderSelf({app:d,common:e,activities:c}),this},acceptInvitation:function(a){a.preventDefault();var b=this,f=c(a.currentTarget),h=f.attr("data-user-id"),i=f.attr("data-list-id"),j=f.attr("data-activity-id"),k=function(a){if(!a)return!1;var c=new g({_id:b.user.get("_id"),issuer_user_id:h,list_id:i,add:!0});e.showLoader(),c.save(null,{success:function(a,b){e.hideLoader();var c=b.list,f=b.user;log("SUCCESS ADD: ",b),d.user.set(f),d.todolists.remove(c._id),d.todolists.add(c),d.storage.storeUser(f,function(){}),d.storage.storeListsForUser(d.user.get("_id"),d.todolists.toJSON(),function(){}),d.router.go("todolists/"+i),d.activityCollection.remove(j),d.socketWrapper&&d.socketWrapper.subscribeToList(i),e.notify(__("success"))},error:function(a,b){var c=__("error");b&&b.message&&(c=b.message),e.hideLoader(),e.notify(c)}})};e.dialog(__("really"),k,!0)},rejectInvitation:function(a){a.preventDefault();var b=this,f=c(a.currentTarget),h=f.attr("data-user-id"),i=f.attr("data-list-id"),j=f.attr("data-activity-id"),k=function(a){if(!a)return!1;var c=new g({_id:b.user.get("_id"),issuer_user_id:h,list_id:i,reject:!0});e.showLoader(),c.save(null,{success:function(a,b){e.hideLoader(),f.parent().parent().parent().parent().remove(),d.user.set(b),d.activityCollection.remove(j),e.notify(__("success"))},error:function(a,b){var c=__("error");b&&b.message&&(c=b.message),e.hideLoader(),e.notify(c)}})};e.dialog(__("really"),k,!0)},removeOneActivity:function(a){a.preventDefault();var b=c(a.currentTarget).attr("data-activity-id"),e=d.activityCollection.get(b);return e?"invitation"===e.key?!1:(c("#activity-"+b).remove(),void setTimeout(function(){d.activityCollection.remove(b)},10)):!1},removeAllActivities:function(a){a.preventDefault(),setTimeout(b.bind(function(){d.activityCollection.toJSON().forEach(function(a){a&&"invitation"!==a.key&&d.activityCollection.remove(a.id,{silent:!0})}),this.render()},this),10)}})}),define("views/lists/listview",["underscore","zepto","app","common","text!templates/lists/listview.html","models/user","models/todolist","views/base","views/lists/todolist","views/lists/activities","moment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k={};return k["keyup #create-list"]="createTodolist",k["blur #create-list"]="createTodolistOnBlur",h.extend({id:"todolist-main-view",title:function(){return __("lists")},dispose:function(){this.todolistsView&&a.isFunction(this.todolistsView.dispose)&&this.todolistsView.dispose(),this.activitiesView&&a.isFunction(this.activitiesView.dispose)&&this.activitiesView.dispose(),h.prototype.dispose.call(this)},events:k,initialize:function(){this.template=a.template(e),this.user=c.user,this.listenTo(c.user,"change",function(){this.$welcome&&this.$welcome.html("Hi "+this.user.get("display_name")),this.$listLen&&this.$listLen.html(c.todolists.length)},this),this.todolists=c.todolists,this.listenTo(this.todolists,"remove",this.render)},render:function(){var a=this.user?this.user.toJSON():new f;return this.renderSelf({user:a,app:c}),this.renderHeader({el:b("header",this.el)[0],title:this.title()}),this.$title=b("#create-list",this.el),this.$welcome=b("#welcome",this.el),this.$listLen=b("span#list-len",this.el),this.todolistsView=new i({el:b("ul#todolists",this.el)[0]}),this.todolistsView.render(),this.activitiesView=new j({el:b("#activities",this.el)[0]}),this.activitiesView.render(),this},createTodolist:function(a){var b=a.keyCode||a.which;return 13===b?this.$title.blur():void 0},createTodolistOnBlur:function(a){a&&a.preventDefault();var b=this.$title.val().trim();return b&&(0===b.length||b.length>32)?!1:void this._createList(b)},_createList:function(a){if(!a||0===b.trim(a).length)return!1;var e=this,f={user_id:this.user.get("_id"),todos:[],title:a},h=new g(f);setTimeout(function(){e.$title.val("")},10),d.showLoader(),h.save(null,{success:function(a,b){d.hideLoader(),c.todolists.add(b),c.router.go("todolists/"+b._id);var e=c.todolists.toJSON();c.storage.storeListsForUser(c.user.get("_id"),e,function(){}),c.socketWrapper&&c.socketWrapper.subscribeToList(a.get("_id"))},error:function(a,b){var c=JSON.parse(b.responseText),e=__("error");c&&c.message&&c.message.key&&(e=__(c.message.key)),d.hideLoader(),d.notify(e)}})},pushUpdate:function(a,b){switch(a){case"update_list":var d=c.todolists.get(b._id);d.set(b);break;case"delete_list":c.todolists.remove(b._id)}var e=c.todolists.toJSON();c.storage.storeListsForUser(c.user.get("_id"),e,function(){})}})}),define("text!templates/todos/todolist.editview.html",[],function(){return'<header></header>\n\n<div class="content">\n    <% if(todolist && todolist.title) { %>\n    <input id="list-title" type="text"\n           placeholder="<%= __(\'todolistTitle\') %>"\n           value="<%- todolist.title %>">\n\n   <p id="timestamp" class="aog-green-text centered small"><%- __(\'updated\') %> <%- common.fromNow(todolist.updated_at, false, app.lang) %> <%- __(\'by\') %> <%- common.getUser(todolist, true) %></p>\n\n    <button class="delete-list aog-button aog-red aog-big">\n    <%- __(\'deleteList\') %>\n    </button>\n    <% } %>\n\n    <div class="divider"></div>\n\n    <h2><%- __(\'shareList\') %></h2>\n\n    <small class="aog-green-text"><%= __(\'whoWorksWithThisList\') %></small>\n    <input id="search-input" type="email"\n           placeholder="<%= __(\'searchForUsers\') %>">\n\n    <div id="search-results"></div>\n\n    <div class="divider"></div>\n\n    <% if(todolist && todolist.participants && todolist.participants.length > 0) { %>\n    <p class="aog-green-text"><%= __(\'allowedUsers\') %></p>\n    <% } %>\n    <div class="share-settings">\n        <ul class="aog-list white-list">\n        <% _.each(todolist.participants, function(u) { %>\n        <li class="no-link">\n            <p><%- u.display_name + \' (\' + u.email + \')\'  %><%- u.is_owner ? \'(\' + __(\'owner\') + \')\' : \'\' %></p>\n\n            <% // cannot remove himself or owner\n            if(!u.is_owner && (u._id != theUser._id)) { %>\n            <div class="divider"></div>\n\n            <a href="#" id="<%- \'user_\' + u._id %>"\n                class="destroy destructive centered"\n                    data-user-id="<%- u._id %>"><%- __(\'remove\') %></a>\n            <% } %>\n        </li>\n        <% }); %>\n        </ul>\n\n        <br/>\n\n    </div>\n</div>\n'
}),define("views/todos/todolist.editview",["underscore","zepto","app","common","text!templates/todos/todolist.editview.html","views/base","models/user"],function(a,b,c,d,e,f,g){"use strict";var h={};return h[c.defaultClickEvent+" .delete-list"]="deleteList",h["keyup #list-title"]="validateAndSaveOnEnter",h["keyup #search-input"]="searchUsers",h[c.defaultClickEvent+" .add-user-to-list"]="inviteUser",h[c.defaultClickEvent+" .destroy"]="dropAddedUser",f.extend({id:"todolist-edit-view",template:a.template(e),title:function(){return this.todolist.get("title")},events:h,initialize:function(a){var e=this;if(!a.todolist)throw"TodolistEditView: no todolist provided";this.todolist=a.todolist,this.listenTo(this.todolist,"change:title",function(){b("#title",this.el).html(d.escape(this.todolist.get("title")))},this),this.lastUserSearchQuery="",c.off("header-save"),c.on("header-save",function(a){e.saveList(a)})},render:function(){var a=this.todolist.toJSON();return this.renderSelf({app:c,common:d,todolist:a,theUser:c.user.toJSON()}),this.renderHeader({showBackButton:!0,showSaveButton:!0,el:b("header",this.el)[0],title:this.title()}),this.$listTitle=b("#list-title",this.el),this.$searchInput=b("#search-input",this.el),this.$searchResults=b("#search-results",this.el),this.$timestamp=b("#timestamp",this.el),this},validate:function(a){a&&a.preventDefault();var c=!0,e=this.$listTitle.val().trim();return(0===e.length||e.length>32)&&(c=!1),e===this.todolist.get("title")&&(c=!1),this.$saveList=b("#header-save"),this.$saveList.length>0&&this.$saveList.toggleClass("disabled",!c),d.lockScreen(),c},validateAndSaveOnEnter:function(a){var b=a.keyCode||a.which,c=this.validate();13===b&&c&&this.saveList()},saveList:function(a){var b=this;a&&a.preventDefault();var e=this.$listTitle.val().trim(),f=c.user.toJSON(),g={user_id:c.user.get("_id"),title:e,updated_at:(new Date).getTime(),updated_by:f};return this.todolist.set(g),this.todolist.hasChanged("title")?(b.$saveList.addClass("disabled"),d.showLoader(),this.$timestamp.html(__("updated")+" "+d.fromNow((new Date).getTime(),!1,c.lang)+" "+__("by")+" "+f.display_name),d.unlockScreen(),void this.todolist.save(null,{patch:!0,success:function(){if(d.hideLoader(),c.todolists){var a=c.todolists.toJSON();c.storage.storeListsForUser(c.user.get("_id"),a,function(){})}},error:function(a,c){d.hideLoader(),b.$saveList.removeClass("disabled");var e=__("error");c&&c.message&&(e=c.message),d.notify(e,5e3)}})):!1},searchUsers:function(a){a.preventDefault();var c,e=this;if(c=this.$searchInput.val(),0===b.trim(c).length)return this.$searchResults.html(""),!1;if(this.lastUserSearchQuery===c)return!1;if(this.lastUserSearchQuery=c,d.isValidMail(c)){var f=[];f.push('<button class="add-user-to-list aog-button aog-green" '),f.push('data-email="'+c+'">'),f.push(__("addUserToList",{name:c.replace("@"," [at] ")})),f.push("</button></li>"),e.$searchResults.html(f.join("")),d.scrollBottom(),d.lockScreen()}else d.unlockScreen(),e.$searchResults.empty()},inviteUser:function(a){a.preventDefault();var e=this,f=b(a.currentTarget),h=f.attr("data-email"),i=this.todolist.get("_id");if(!h||!i)return c.handleError("shit no user-id and no list id found - todolistdialog.js"),!1;var j=function(a){if(!a)return!1;d.unlockScreen();var b=new g({_id:c.user.get("_id"),invite:!0,email:h,list_id:i});e.$searchResults.html(""),e.$searchInput.val(""),d.showLoader(),b.save(null,{success:function(){d.hideLoader(),d.notify(__("inviteSuccess"))},error:function(){d.hideLoader(),d.notify(__("inviteError"))}})};this.$searchInput.blur(),setTimeout(function(){d.dialog(__("reallyAddUser",{email:h}),j,!0)},10)},dropAddedUser:function(a){a.preventDefault();var e=this,f=b(a.currentTarget);if(f.attr("disabled"))return!1;var h=f.attr("data-user-id"),i=this.todolist.get("_id"),j=new g({remove:!0,_id:c.user.get("_id"),user_id_to_be_removed:h,list_id:i}),k=function(a){return a?(d.showLoader(),void j.save(null,{success:function(a,g){if(d.hideLoader(),setTimeout(function(){b("#"+f.attr("id")).remove()},10),g&&g.list){var h=g.list;c.todolists.remove(h._id),c.todolists.add(h),c.storage.storeListsForUser(c.user.get("_id"),c.todolists.toJSON(),function(){})}e.todolist.trigger("change"),e.render()},error:function(a,b){var c=__("error");b&&b.message&&(c=b.message),d.hideLoader(),d.notify(c)}})):!1};d.dialog(__("really"),k,!0)},deleteList:function(a){a.preventDefault();var e=b(a.currentTarget);if(e.attr("disabled"))return!1;var f=this,g=function(a){return a?(d.showLoader(),void f.todolist.destroy({success:function(){if(d.hideLoader(),c.todolists){var a=c.todolists.toJSON();c.storage.storeListsForUser(c.user.get("_id"),a,function(){})}},error:function(a,b){var c=__("error");b&&b.message&&(c=b.message),d.hideLoader(),d.notify(c)}})):!1};d.dialog(__("really"),g,!0)}})}),define("router",["require","app","common","underscore","zepto","backbone","models/user","JrFork","views/start","views/settings","views/help","views/todos/todoscontainer","views/login","views/signup","views/lists/listview","views/todos/todolist.editview"],function(a){"use strict";var b,c,d=a("app"),e=a("common"),f=a("underscore"),g=a("zepto"),h=a("backbone"),i=a("models/user"),j=a("JrFork"),k=a("views/start"),l=a("views/settings"),m=a("views/help"),n=a("views/todos/todoscontainer"),o=a("views/login"),p=a("views/signup"),q=a("views/lists/listview"),r=a("views/todos/todolist.editview");return c={"":"index",start:"index",signup:"signup",login:"login",logout:"logout",settings:"settings",help:"help",todolists:"showTodolists","todolists/edit/:id":"editTodolist","todolists/:id":"showTodosOfList"},b=j.Router.extend({routes:c,initialize:function(a){this.lastRoute="",this.currentView=null,this.isAuth=a,this.$ghostbusterLayer=g("#ghostbuster-overlay")},onTranslationsLoaded:function(){this.startView?this.startView.render():this.currentView&&this.currentView.render()},checkLocalDatabaseAndSync:function(){var a=this;return log("=== CHECKING LOCAL DB!"),d.storage&&this.isAuth?void d.storage.fetchUser(function(b,c){b&&log("error fetching user: "+b);var e=h.history.fragment;return!c&&"start"!==e&&e.length>0?(setTimeout(function(){a.go(e)},100),!1):c?(log("=== GOT USER, NOW RENDERING: ",c),void d.storage.fetchListsForUser(c._id,function(b,e){!b&&e&&(c.todolists=e);var f=!0;d.router.setAuthenticated(c,f),setTimeout(function(){window.io||d.fetchUser(function(b,c){return b?a.deauthenticateUser():(d.storage.storeListsForUser(d.user.get("_id"),c.todolists),void(d.socketWrapper&&null!==d.socketWrapper.socket&&d.socketWrapper.subscribeToLists(d.todolists)))})},1)})):!1}):!1},setAuthenticated:function(a,b){log("=== AppRouter.setAuthenticated() YUHU I AM LOGGED IN: ",a.email,a),d.API_TOKEN=a.API_TOKEN,d.todolistView||this.go("todolists",!0),d.isLoggedIn=!0,this.isAuth=!0,e.store.set("is-auth","1");var c=[];if(f.each(a.todolists,function(a){c.push(a)}),d.todolists.reset(),d.todolists.add(c),d.changeLang(a.lang?a.lang:d.lang),a.lang||(a.lang=d.lang),d.user.set(a),d.initAndRegisterPushNotifications(),!b){var g=d.user.get("_id");console.log("STORING USER, LISTS AND TODOS IN LOCAL DB"),d.storage.storeUser(a,function(a,b){b===!0&&c.length>0&&d.storage.storeListsForUser(g,c,function(){f.each(d.todolists.toJSON(),function(a){var b=a.todos;if(b&&b.length>0){var c=d.todolists.get(a._id);c&&c.set({todos:b},{silent:!0})}})})})}},deauthenticateUser:function(){var a=this;d.unregisterPUSHNotifications(),setTimeout(function(){a.go("start")},1),this.isAuth=!1,d.isLoggedIn=!1,e.store.drop("is-auth"),e.unlockScreen(),d.todolists.reset(),d.user=new i,g(".hide-me").each(function(){g(this).addClass("hidden")}),d.storage&&d.storage.nukeAll(function(){}),d.socketWrapper&&setTimeout(function(){d.socketWrapper.disconnect(!0,!0)},1e3),d.activityCollection.reset()},index:function(){return this.isAuth===!0?this.go("todolists"):(this.startView=new k,void this.renderView(this.startView))},signup:function(){if(this.isAuth===!0)return this.go("todolists");var a=new p;this.renderView(a)},login:function(){if(this.isAuth===!0)return this.go("todolists");var a=new o;this.renderView(a)},logout:function(){return this.deauthenticateUser(),g.ajax({type:"POST",dataType:"json",url:d.API_ROOT+"/api/v1/logout",success:function(){},error:function(){e.notify(__("error"))}}),!1},showTodolists:function(){d.todolistView=new q({user:d.user}),this.renderView(d.todolistView)},settings:function(){this.settingsView=new l,this.renderView(this.settingsView)},showTodosOfList:function(a){d.todosContainer=new n({listID:a}),this.renderView(d.todosContainer)},editTodolist:function(a){var b=d.todolists.get(a);b||(e.notify(__("error")),this.go("todolists/"+a)),d.todolistEditView=new r({todolist:b}),this.renderView(d.todolistEditView)},help:function(){var a=new m;this.renderView(a)},renderView:function(a){var b=this;this.__toggleGhostBusterOverlay(!0),this.renderScreen(a,d.useSlideAnimation,function(){e.unlockScreen(),b.__toggleGhostBusterOverlay(!1),setTimeout(function(){b.currentView&&f.isFunction(b.currentView.dispose)&&b.currentView.dispose(),b.currentView=a},200)}),e.closeNotify()},__toggleGhostBusterOverlay:function(a){return d.isBrowser?!1:void(a?this.$ghostbusterLayer.show():this.$ghostbusterLayer.hide())},go:function(a,b){if(!a)throw"app.router.go(route) - no route provided";j.Navigator.navigate(a,{animation:b?null:{type:j.Navigator.animations.SLIDE_STACK,direction:j.Navigator.directions.LEFT}})},setLastRoute:function(a){this.lastRoute=a},getLastRoute:function(){return this.lastRoute}})}),define("collections/todos",["require","underscore","zepto","backbone","app","models/todo"],function(a){"use strict";var b=a("underscore"),c=a("zepto"),d=a("backbone"),e=a("app"),f=a("models/todo"),g=d.Collection.extend({model:f,url:e.API_ROOT+"/api/v1/todos",completed:function(){return this.filter(function(a){return a.get("completed")})},remaining:function(){return this.without.apply(this,this.completed())},comparator:function(a){var b=parseInt(a.get("updated_at"),10);return b?-b:a.get("completed")},destroyCompleted:function(a){var d=this.completed(),f=[];this.remove(d,{}),b.each(d,function(a){f.push(a.get("_id"))}),c.ajax({cache:!1,timeout:e.AJAX_TIMEOUT,type:"DELETE",dataType:"json",data:{todo_ids:f},url:e.API_ROOT+"/api/v1/todos",success:function(c){return c&&(c.error||c.message)?a(c.error||c.message):(b.each(d,function(a){a.trigger("destroy")}),void a(null,{success:!0}))},error:function(){a(__("error"))}})}});return new g}),define("collections/todolists",["app","underscore","backbone","models/todolist"],function(a,b,c,d){"use strict";var e=c.Collection.extend({model:d,url:a.API_ROOT+"/api/v1/lists",comparator:function(a){var b=a.get("updated_at");return-b}});return e}),define("models/activity",["app","underscore","backbone"],function(a,b,c){"use strict";var d=c.Model.extend({idAttribute:"id",defaults:{key:"",data:{},created_at:null}});return d}),define("collections/activities",["app","underscore","backbone","common","models/activity"],function(a,b,c,d,e){"use strict";var f=c.Collection.extend({model:e,__invitationAlreadyExists:function(a){var c=!1;return this.each(function(d){return d=d.toJSON(),a.key===d.key&&b.isEqual(a.data,d.data)?void(c=!0):void 0}),c},addActivity:function(b,c){if("undefined"==typeof c&&(c=!1),this.__invitationAlreadyExists(b))return!1;b=new e(b);var f=d.random(16);b.set({id:f,created_at:d.now(a.lang)},{silent:!0}),this.add(b,{silent:c})},comparator:function(a){var b=new Date(a.get("created_at")).getTime();return-b}});return f}),function(){"use strict";var a={ensureCallback:function(a){return"function"!=typeof a?function(){}:a},parseKey:function(a){return a=a.replace(/\//g,""),a=a.replace(/[:]/g,""),a=a.replace(/[.]/g,"")},out:function(){return window.console&&console.log?(arguments[0]="[Vanilla LOG] "+arguments[0],void console.log.apply(console,arguments)):!1}};"function"==typeof define&&define.amd?define("storageHelpers",[],function(){return a}):window.storageHelpers=a}(),function(){"use strict";function a(a){var b=a.ensureCallback,c=a.parseKey,d=function(a,b){return this.isValid()?(this.db=null,this.DATABASE_NAME=a||"websqlstore",this.DATABASE_VERSION=b||"1.0",this.TABLE_NAME=this.DATABASE_NAME+"__data",void(this.DATABASE_SIZE=5242880)):!1};return d.prototype={isValid:function(){return!!window.openDatabase},init:function(a){a=b(a);try{this.isValid()&&(this.db=window.openDatabase(this.DATABASE_NAME,this.DATABASE_VERSION,this.DATABASE_NAME,this.DATABASE_SIZE))}catch(c){return a(c.message)}if(!this.db)return a("No db available");var d="CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)";this.db.transaction(function(a){a.executeSql(d,[])},function(b){return a(b),!0},function(){a(null)})},get:function(a,d){if(d=b(d),a=c(a),!this.db)return d("No db available");var e="SELECT id, value FROM "+this.TABLE_NAME+" WHERE id = ?";this.db.transaction(function(b){b.executeSql(e,[a],function(b,c){var e=null;if(c.rows.length>0){e=c.rows.item(0).value;try{e=JSON.parse(e)}catch(f){return d("JSON Parse error: "+e)}}e?d(null,e):d("No data found for key: "+a)})},function(a){return d(a),!0})},save:function(a,d,e){if(e=b(e),a=c(a),!this.db)return e("No db available");var f;try{f=JSON.stringify(d)}catch(g){return e("JSON Parse error: "+d)}var h="INSERT OR REPLACE INTO "+this.TABLE_NAME+" (id, value, timestamp) VALUES (?,?,?)",i=[a,f,(new Date).getTime()];this.db.transaction(function(a){a.executeSql(h,i,function(){e(null,d)})},function(a){return e(a),!0})},drop:function(a,d){if(d=b(d),a=c(a),!this.db)return d("No db available");var e="DELETE FROM "+this.TABLE_NAME+" WHERE id = ?";this.db.transaction(function(b){b.executeSql(e,[a],function(){d(null)})},function(a){return d(a),!0})},nuke:function(a){if(a=b(a),!this.db)return a("No db available");var c="DELETE FROM "+this.TABLE_NAME;this.db.transaction(function(b){b.executeSql(c,[],function(){a(null)})},function(b){return a(b),!0})}},d}"function"==typeof define&&define.amd?define("WebSQLStorage",["storageHelpers"],function(b){return a(b)}):window.WebSQLStorage=a(window.storageHelpers)}(),function(){"use strict";function a(a){var c=a.ensureCallback,d=a.parseKey,e=a.out,f=function(a,b){if(!this.isValid())return!1;try{b=parseInt(b,10)}catch(c){b=1}(1>b||isNaN(b))&&(b=1),this.db=null,this.DATABASE_VERSION=b,this.DATABASE_NAME=a||"idbstore",this.OBJECT_STORE_NAME=this.DATABASE_NAME+"__data"};return f.prototype={isValid:function(){return!!b&&"indexedDB"in window},init:function(a){a=c(a);var d,e=this,f=this.OBJECT_STORE_NAME;try{d=b.open(this.DATABASE_NAME,this.DATABASE_VERSION)}catch(g){return a(g)}d.onupgradeneeded=function(b){if(!b||!b.target||!b.target.result)return a("IDBStorage.js - request.onupgradeneeded: no database instance in e.target.result");var c=b.target.result;try{c.objectStoreNames.contains(f)&&c.deleteObjectStore(f),c.createObjectStore(f,{keyPath:"id",autoIncrement:!1})}catch(b){a(b)}},d.onsuccess=function(b){return b&&b.target&&b.target.result?(e.db=b.target.result,void a(null)):a("IDBStorage.js - request.onsuccess: no database instance in e.target.result")},d.onerror=function(b){if(!b||!b.target||!b.target.error)return a("IDBStorage.js - request.onupgradeneeded: no error info in e.target.error");try{var c=b&&b.target&&b.target.error?b.target.error:b;a(c)}catch(b){a(b)}}},get:function(a,b){b=c(b),a=d(a);var e,f,g=this.OBJECT_STORE_NAME;if(!this.db)return b("IDBStorage.js this.db is undefined");try{e=this.db.transaction([g],"readonly"),f=e.objectStore(g);var h=f.get(a);h.onsuccess=function(c){var d=c.target.result,e=!!d,f=e===!1||!d||!d.data;return f?b("No data found for key: "+a):b(null,d.data)},h.onerror=function(a){b(a)}}catch(i){return b(i)}},save:function(a,b,f){if(f=c(f),a=d(a),!this.db)return f("IDBStorage.js this.db is undefined");var g,h,i,j=this.OBJECT_STORE_NAME;try{g=this.db.transaction([j],"readwrite"),h=g.objectStore(j);try{i=h.put({id:a,data:b}),i.onsuccess=function(){f(null,b)},i.onerror=function(a){return f(a),!1}}catch(k){return e("IDB Error save at key="+a,k," data: ",b,"KEY: "+a),f(k)}}catch(k){return e(a,k),f(k)}},drop:function(a,b){if(b=c(b),a=d(a),!this.db)return b("IDBStorage.js this.db is undefined");var f=this.OBJECT_STORE_NAME;try{var g=this.db.transaction([f],"readwrite"),h=g.objectStore(f);try{var i=h["delete"](a);i.onsuccess=function(){b(null)},i.onerror=function(a){b(a)}}catch(j){return e("IDB Error delete: ",j," key ",a),b(j)}}catch(j){return b(j)}},nuke:function(a){if(a=c(a),!this.db)return a("IDBStorage.js this.db is undefined");var b=this.OBJECT_STORE_NAME;try{var d=this.db.transaction([b],"readwrite"),f=d.objectStore(b),g=f.clear();g.onsuccess=function(){a(null)},g.onerror=function(b){a(b)}}catch(h){return e("IDB Error nuke: ",h),a(h)}}},f}var b=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;"function"==typeof define&&define.amd?define("IDBStorage",["storageHelpers"],function(b){return a(b)}):window.IDBStorage=a(window.storageHelpers)}(),function(){"use strict";function a(a,b,c){var d=c.ensureCallback,e=function(){console&&console.error&&console.error.apply(console,arguments)},f={"indexeddb-storage":new b,"websql-storage":new a},g=function(c,g){var h=this;if(this.adapter=null,c=c||{},c.storeName=c.storeName||"vanilla_store",c.version=c.version||"1.0",g=d(g),f={"indexeddb-storage":new b(c.storeName,c.version),"websql-storage":new a(c.storeName,c.version)},c&&c.adapterID)this.adapter=f[c.adapterID],this.adapterID=c.adapterID;else for(var i in f){var j="function"==typeof f[i].isValid;if(j&&f[i].isValid()){this.adapter=f[i],this.adapterID=i;break}}var k=this.adapterID;if("undefined"!=typeof window.cordova&&(k="websql-storage",this.adapter=f[k],this.adapterID=k),!this.adapter||!this.adapter.isValid())return g.apply(h,["no adapter or adapter not valid - id="+k]);try{this.adapter.init(function(a){return a?(e("VanillaStorage.js error initializing adapter",a),g.apply(h,["error in init of adapter id="+k])):void g.call(h)})}catch(l){return e(l),g.apply(h,["exception in init of adapter id="+k])}};return g.prototype={isValid:function(){return this.adapter.isValid()},get:function(a,b){b=d(b),this.adapter.get(a,b)},save:function(a,b,c){c=d(c),this.adapter.save(a,b,c)},drop:function(a,b){b=d(b),this.adapter.drop(a,b)},nuke:function(a){a=d(a),this.adapter.nuke(a)}},g.isValid=function(a){var b=f[a];return b?b.isValid():!1},g}"function"==typeof define&&define.amd?define("VanillaStorage",["WebSQLStorage","IDBStorage","storageHelpers"],function(b,c,d){var e=a(b,c,d);return e}):window.VanillaStorage=a(window.WebSQLStorage,window.IDBStorage,window.storageHelpers)}(),define("libs/storage",["require","VanillaStorage"],function(a){"use strict";var b=function(a){return"function"==typeof a?a:function(){}},c=a("VanillaStorage"),d=function(a){var b={version:"1.0",storeName:"aog_store"};this.vanilla=new c(b,function(b){return b?a(b):void a()})};return d.prototype={hasBrowserSupport:function(){return this.vanilla.isValid()},storeUser:function(a,c){return c=b(c),this.hasBrowserSupport()&&this.vanilla?void this.vanilla.save("user",a,c):c("no support")},fetchUser:function(a){return a=b(a),this.hasBrowserSupport()&&this.vanilla?void this.vanilla.get("user",function(b,c){if(b)return a(b);var d=c;a(null,d)}):a("no support")},storeListsForUser:function(a,c,d){return d=b(d),this.hasBrowserSupport()&&this.vanilla?a?void this.vanilla.save("lists-of-"+a,c,d):d("no user id : "+a):d("no support")},fetchListsForUser:function(a,c){return c=b(c),this.hasBrowserSupport()&&this.vanilla?void this.vanilla.get("lists-of-"+a,c):c("no support")},storeTodosOfList:function(a,c,d){return d=b(d),this.hasBrowserSupport()&&this.vanilla?void this.vanilla.save("todos-of-"+a,c,d):d("no support")},fetchTodosOfList:function(a,c){return c=b(c),this.hasBrowserSupport()&&this.vanilla?void this.vanilla.get("todos-of-"+a,c):c("no support")},nukeAll:function(a){return this.hasBrowserSupport()&&this.vanilla?void this.vanilla.nuke(a):a("no support")}},d}),define("mobiscroll",["zepto"],function(a){var b=a;return!function(a){["width","height"].forEach(function(b){a.fn[b]=function(c){var d,e=document.body,f=document.documentElement,g=b.replace(/./,function(a){return a[0].toUpperCase()});return void 0===c?this[0]==window?f["client"+g]:this[0]==document?Math.max(e["scroll"+g],e["offset"+g],f["client"+g],f["scroll"+g],f["offset"+g]):(d=this.offset())&&d[b]:this.each(function(){var d=a(this);d.css(b,c)})}}),["width","height"].forEach(function(b){var c=b.replace(/./,function(a){return a[0].toUpperCase()});a.fn["outer"+c]=function(a){var d=this;if(d){var e=d[0]["offset"+c],f={width:["left","right"],height:["top","bottom"]};return f[b].forEach(function(b){a&&(e+=parseInt(d.css("margin-"+b),10))}),e}return null}}),["Left","Top"].forEach(function(b,c){function d(a){return a&&"object"==typeof a&&"setInterval"in a}function e(a){return d(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var f="scroll"+b;a.fn[f]=function(b){var d,g;return void 0===b?(d=this[0])?(g=e(d),g?"pageXOffset"in g?g[c?"pageYOffset":"pageXOffset"]:g.document.documentElement[f]||g.document.body[f]:d[f]):null:void this.each(function(){if(g=e(this)){var d=c?a(g).scrollLeft():b,h=c?b:a(g).scrollTop();g.scrollTo(d,h)}else this[f]=b})}}),a._extend=a.extend,a.extend=function(){return arguments[0]=arguments[0]||{},a._extend.apply(this,arguments)}}(b),function(a){function b(b,c){function d(b){if(a.isArray(gb.readonly)){var c=a(".dwwl",U).index(b);return gb.readonly[c]}return gb.readonly}function e(a){var b,c='<div class="dw-bf">',d=1;for(b in ib[a])d%20==0&&(c+='</div><div class="dw-bf">'),c+='<div class="dw-li dw-v" data-val="'+b+'" style="height:'+S+"px;line-height:"+S+'px;"><div class="dw-i">'+ib[a][b]+"</div></div>",d++;return c+="</div>"}function h(b){m=a(".dw-li",b).index(a(".dw-v",b).eq(0)),n=a(".dw-li",b).index(a(".dw-v",b).eq(-1)),s=a(".dw-ul",U).index(b),l=S,o=cb,speedUnit=gb.speedUnit}function j(a){var b=gb.headerText;return b?"function"==typeof b?b.call(eb,a):b.replace(/\{value\}/i,a):""}function B(){cb.temp=lb&&null!==cb.val&&cb.val!=fb.val()||null===cb.values?gb.parseValue(fb.val()||"",cb):cb.values.slice(0),cb.setValue(!0)}function D(b,c,d,e,f){L("validate",[U,c,b])!==!1&&(a(".dw-ul",U).each(function(d){var g=a(this),h=a('.dw-li[data-val="'+cb.temp[d]+'"]',g),i=a(".dw-li",g),j=i.index(h),k=i.length,l=d==c||void 0===c;if(!h.hasClass("dw-v")){for(var m=h,n=h,o=0,p=0;j-o>=0&&!m.hasClass("dw-v");)o++,m=i.eq(j-o);for(;k>j+p&&!n.hasClass("dw-v");)p++,n=i.eq(j+p);(o>p&&p&&2!==e||!o||0>j-o||1==e)&&n.hasClass("dw-v")?(h=n,j+=p):(h=m,j-=o)}(!h.hasClass("dw-sel")||l)&&(cb.temp[d]=h.attr("data-val"),a(".dw-sel",g).removeClass("dw-sel"),h.addClass("dw-sel"),cb.scroll(g,d,j,l?b:.1,l?f:void 0))}),cb.change(d))}function E(b){if(!("inline"==gb.display||V===a(window).width()&&X===a(window).height()&&b||L("onPosition",[U])===!1)){var c,d,e,f,g,h,i,j,k,l,m,n,o=0,p=0,q=a(window).scrollTop(),r=a(".dwwr",U),s=a(".dw",U),t={},u=void 0===gb.anchor?fb:gb.anchor;V=a(window).width(),X=a(window).height(),W=window.innerHeight,W=W||X,/modal|bubble/.test(gb.display)&&(a(".dwc",U).each(function(){c=a(this).outerWidth(!0),o+=c,p=c>p?c:p}),c=o>V?p:o,r.width(c)),Y=s.outerWidth(),Z=s.outerHeight(!0),"modal"==gb.display?(d=(V-Y)/2,e=q+(W-Z)/2):"bubble"==gb.display?(n=!0,k=a(".dw-arrw-i",U),h=u.offset(),i=h.top,j=h.left,f=u.outerWidth(),g=u.outerHeight(),d=j-(s.outerWidth(!0)-f)/2,d=d>V-Y?V-(Y+20):d,d=d>=0?d:20,e=i-Z,q>e||i>q+W?(s.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),e=i+g):s.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),l=k.outerWidth(),m=j+f/2-(d+(Y-l)/2),a(".dw-arr",U).css({left:m>l?l:m})):(t.width="100%","top"==gb.display?e=q:"bottom"==gb.display&&(e=q+W-Z)),t.top=0>e?0:e,t.left=d,s.css(t),a(".dw-persp",U).height(0).height(e+Z>a(document).height()?e+Z:a(document).height()),n&&(e+Z>q+W||i>q+W)&&a(window).scrollTop(e+Z-W)}}function F(a){if("touchstart"===a.type)A=!0,setTimeout(function(){A=!1},500);else if(A)return A=!1,!1;return!0}function L(b,d){var e;return d.push(cb),a.each([ab.defaults,hb,c],function(a,c){c[b]&&(e=c[b].apply(eb,d))}),e}function P(a){var b=+a.data("pos"),c=b+1;i(a,c>n?m:c,1,!0)}function Q(a){var b=+a.data("pos"),c=b-1;i(a,m>c?n:c,2,!0)}var R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb=this,db=a.mobiscroll,eb=b,fb=a(eb),gb=I({},N),hb={},ib=[],jb={},kb={},lb=fb.is("input"),mb=!1;cb.enable=function(){gb.disabled=!1,lb&&fb.prop("disabled",!1)},cb.disable=function(){gb.disabled=!0,lb&&fb.prop("disabled",!0)},cb.scroll=function(a,b,c,d,e){function f(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b}function g(){clearInterval(jb[b]),delete jb[b],a.data("pos",c).closest(".dwwl").removeClass("dwa")}var h,i=(R-c)*S,j=H.replace(/^\-/,"").replace("moz","Moz"),k=a[0].style;i==kb[b]&&jb[b]||(d&&i!=kb[b]&&L("onAnimStart",[U,b,d]),kb[b]=i,k[j+"Transition"]="all "+(d?d.toFixed(3):0)+"s ease-out",G?k[j+"Transform"]="translate3d(0,"+i+"px,0)":k.top=i+"px",jb[b]&&g(),d&&void 0!==e?(h=0,a.closest(".dwwl").addClass("dwa"),jb[b]=setInterval(function(){h+=.1,a.data("pos",Math.round(f(h,e,c-e,d))),h>=d&&g()},100)):a.data("pos",c))},cb.setValue=function(b,c,d,e){a.isArray(cb.temp)||(cb.temp=gb.parseValue(cb.temp+"",cb)),mb&&b&&D(d),T=gb.formatResult(cb.temp),e||(cb.values=cb.temp.slice(0),cb.val=T),c&&lb&&fb.val(T).trigger("change")},cb.getValues=function(){var a,b=[];for(a in cb._selectedValues)b.push(cb._selectedValues[a]);return b},cb.validate=function(a,b,c,d){D(c,a,!0,b,d)},cb.change=function(b){T=gb.formatResult(cb.temp),"inline"==gb.display?cb.setValue(!1,b):a(".dwv",U).html(j(T)),b&&L("onChange",[T])},cb.changeWheel=function(b,c){if(U){var d,f,g=0,h=b.length;for(d in gb.wheels)for(f in gb.wheels[d]){if(a.inArray(g,b)>-1&&(ib[g]=gb.wheels[d][f],a(".dw-ul",U).eq(g).html(e(g)),h--,!h))return E(),void D(c,void 0,!0);g++}}},cb.isVisible=function(){return mb},cb.tap=function(a,b){var c,d;gb.tap&&a.bind("touchstart",function(a){a.preventDefault(),c=f(a,"X"),d=f(a,"Y")}).bind("touchend",function(a){Math.abs(f(a,"X")-c)<20&&Math.abs(f(a,"Y")-d)<20&&b.call(this,a),z=!0,setTimeout(function(){z=!1},300)}),a.bind("click",function(a){z||b.call(this,a)})},cb.show=function(b){if(gb.disabled||mb)return!1;"top"==gb.display&&($="slidedown"),"bottom"==gb.display&&($="slideup"),B(),L("onBeforeShow",[]);var c,g,j=0,l="";$&&!b&&(l="dw-"+$+" dw-in");var m='<div class="dw-trans '+gb.theme+" dw-"+gb.display+" dw"+H+'">'+("inline"==gb.display?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dw-persp"><div class="dwo"></div><div class="dw dwbg '+l+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(gb.headerText?'<div class="dwv"></div>':""));for(c=0;c<gb.wheels.length;c++){m+='<div class="dwc'+("scroller"!=gb.mode?" dwpm":" dwsc")+(gb.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(g in gb.wheels[c])ib[j]=gb.wheels[c][g],m+='<td><div class="dwwl dwrc dwwl'+j+'">'+("scroller"!=gb.mode?'<div class="dwwb dwwbp" style="height:'+S+"px;line-height:"+S+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+S+"px;line-height:"+S+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+g+'</div><div class="dwww"><div class="dww" style="height:'+gb.rows*S+"px;min-width:"+gb.width+'px;"><div class="dw-ul">',m+=e(j),m+='</div><div class="dwwol"></div></div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',j++;m+="</tr></table></div></div>"}m+=("inline"!=gb.display?'<div class="dwbc'+(gb.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+gb.setText+"</span></span>"+(gb.button3?'<span class="dwbw dwb-n"><span class="dwb">'+gb.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+gb.cancelText+"</span></span></div></div>":'<div class="dwcc"></div>')+"</div></div></div>",U=a(m),D(),L("onMarkupReady",[U]),"inline"!=gb.display?(U.appendTo("body"),setTimeout(function(){U.removeClass("dw-trans").find(".dw").removeClass(l)},350)):fb.is("div")?fb.html(U):U.insertAfter(fb),L("onMarkupInserted",[U]),mb=!0,ab.init(U,cb),"inline"!=gb.display&&(cb.tap(a(".dwb-s span",U),function(){cb.hide(!1,"set")!==!1&&(cb.setValue(!1,!0),L("onSelect",[cb.val]))}),cb.tap(a(".dwb-c span",U),function(){cb.cancel()}),gb.button3&&cb.tap(a(".dwb-n span",U),gb.button3),gb.scrollLock&&U.bind("touchmove",function(a){W>=Z&&V>=Y&&a.preventDefault()}),a("input,select,button").each(function(){a(this).prop("disabled")||a(this).addClass("dwtd").prop("disabled",!0)}),E(),a(window).bind("orientationchange.dw resize.dw",function(){clearTimeout(_),_=setTimeout(function(){E(!0)},100)})),U.delegate(".dwwl","DOMMouseScroll mousewheel",function(b){if(!d(this)){b.preventDefault(),b=b.originalEvent;var c=b.wheelDelta?b.wheelDelta/120:b.detail?-b.detail/3:0,e=a(".dw-ul",this),f=+e.data("pos"),g=Math.round(f-c);h(e),i(e,g,0>c?1:2)}}).delegate(".dwb, .dwwb",J,function(){a(this).addClass("dwb-a")}).delegate(".dwwb",J,function(b){b.stopPropagation(),b.preventDefault();var c=a(this).closest(".dwwl");if(F(b)&&!d(c)&&!c.hasClass("dwa")){q=!0;var e=c.find(".dw-ul"),f=a(this).hasClass("dwwbp")?P:Q;h(e),clearInterval(k),k=setInterval(function(){f(e)},gb.delay),f(e)}}).delegate(".dwwl",J,function(b){b.preventDefault(),!F(b)||p||d(this)||q||(p=!0,a(document).bind(K,M),r=a(".dw-ul",this),y="clickpick"!=gb.mode,w=+r.data("pos"),h(r),x=void 0!==jb[s],t=f(b,"Y"),v=new Date,u=t,cb.scroll(r,s,w,.001),y&&r.closest(".dwwl").addClass("dwa"))}),L("onShow",[U,T])},cb.hide=function(b,c){return mb&&L("onClose",[T,c])!==!1?(a(".dwtd").prop("disabled",!1).removeClass("dwtd"),fb.blur(),void(U&&("inline"!=gb.display&&$&&!b?(U.addClass("dw-trans").find(".dw").addClass("dw-"+$+" dw-out"),setTimeout(function(){U.remove(),U=null},350)):(U.remove(),U=null),mb=!1,kb={},a(window).unbind(".dw")))):!1},cb.cancel=function(){cb.hide(!1,"cancel")!==!1&&L("onCancel",[cb.val])},cb.init=function(a){ab=I({defaults:{},init:C},db.themes[a.theme||gb.theme]),bb=db.i18n[a.lang||gb.lang],I(c,a),I(gb,ab.defaults,bb,c),cb.settings=gb,fb.unbind(".dw");var b=db.presets[gb.preset];b&&(hb=b.call(eb,cb),I(gb,hb,c),I(O,hb.methods)),R=Math.floor(gb.rows/2),S=gb.height,$=gb.animate,void 0!==fb.data("dwro")&&(eb.readOnly=g(fb.data("dwro"))),mb&&cb.hide(),"inline"==gb.display?cb.show():(B(),lb&&gb.showOnFocus&&(fb.data("dwro",eb.readOnly),eb.readOnly=!0,fb.bind("focus.dw",function(){cb.show()})))},cb.trigger=function(a,b){return L(a,b)},cb.values=null,cb.val=null,cb.temp=null,cb._selectedValues={},cb.init(c)}function c(a){var b;for(b in a)if(void 0!==F[a[b]])return!0;return!1}function d(){var a,b=["Webkit","Moz","O","ms"];for(a in b)if(c([b[a]+"Transform"]))return"-"+b[a].toLowerCase();return""}function e(a){return B[a.id]}function f(a,b){var c=a.originalEvent,d=a.changedTouches;return d||c&&c.changedTouches?c?c.changedTouches[0]["page"+b]:d[0]["page"+b]:a["page"+b]}function g(a){return a===!0||"true"==a}function h(a,b,c){return a=a>c?c:a,a=b>a?b:a}function i(b,c,d,e,f){c=h(c,m,n);var g=a(".dw-li",b).eq(c),i=void 0===f?c:f,j=s,k=e?c==i?.1:Math.abs((c-i)*o.settings.timeUnit):0;o.temp[j]=g.attr("data-val"),o.scroll(b,j,c,k,f),setTimeout(function(){o.validate(j,d,k,f)},10)}function j(a,b,c){return O[b]?O[b].apply(a,Array.prototype.slice.call(c,1)):"object"==typeof b?O.init.call(a,b):a}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B={},C=function(){},D=new Date,E=D.getTime(),F=document.createElement("modernizr").style,G=c(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),H=d(),I=a.extend,J="touchstart mousedown",K="touchmove mousemove",L="touchend mouseup",M=function(a){y&&(a.preventDefault(),u=f(a,"Y"),o.scroll(r,s,h(w+(t-u)/l,m-1,n+1))),x=!0},N={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:!0,tap:!0,speedUnit:.0012,timeUnit:.1,formatResult:function(a){return a.join(" ")},parseValue:function(a,b){var c,d,e,f=b.settings.wheels,g=a.split(" "),h=[],i=0;
for(c=0;c<f.length;c++)for(d in f[c]){if(void 0!==f[c][d][g[i]])h.push(g[i]);else for(e in f[c][d]){h.push(e);break}i++}return h}},O={init:function(a){return void 0===a&&(a={}),this.each(function(){this.id||(E+=1,this.id="scoller"+E),B[this.id]=new b(this,a)})},enable:function(){return this.each(function(){var a=e(this);a&&a.enable()})},disable:function(){return this.each(function(){var a=e(this);a&&a.disable()})},isDisabled:function(){var a=e(this[0]);return a?a.settings.disabled:void 0},isVisible:function(){var a=e(this[0]);return a?a.isVisible():void 0},option:function(a,b){return this.each(function(){var c=e(this);if(c){var d={};"object"==typeof a?d=a:d[a]=b,c.init(d)}})},setValue:function(a,b,c,d){return this.each(function(){var f=e(this);f&&(f.temp=a,f.setValue(!0,b,c,d))})},getInst:function(){return e(this[0])},getValue:function(){var a=e(this[0]);return a?a.values:void 0},getValues:function(){var a=e(this[0]);return a?a.getValues():void 0},show:function(){var a=e(this[0]);return a?a.show():void 0},hide:function(){return this.each(function(){var a=e(this);a&&a.hide()})},destroy:function(){return this.each(function(){var b=e(this);b&&(b.hide(),a(this).unbind(".dw"),delete B[this.id],a(this).is("input")&&(this.readOnly=g(a(this).data("dwro"))))})}};a(document).bind(L,function(){if(p){var b,c,d,e=new Date-v,f=h(w+(t-u)/l,m-1,n+1),g=r.offset().top;if(300>e?(b=(u-t)/e,c=b*b/o.settings.speedUnit,0>u-t&&(c=-c)):c=u-t,d=Math.round(w-c/l),!c&&!x){var j=Math.floor((u-g)/l),s=a(".dw-li",r).eq(j),z=y;o.trigger("onValueTap",[s])!==!1?d=j:z=!0,z&&(s.addClass("dw-hl"),setTimeout(function(){s.removeClass("dw-hl")},200))}y&&i(r,d,0,!0,Math.round(f)),p=!1,r=null,a(document).unbind(K,M)}q&&(clearInterval(k),q=!1),a(".dwb-a").removeClass("dwb-a")}).bind("mouseover mouseup mousedown click",function(a){return z?(a.stopPropagation(),a.preventDefault(),!1):void 0}),a.fn.mobiscroll=function(b){return I(this,a.mobiscroll.shorts),j(this,b,arguments)},a.mobiscroll=a.mobiscroll||{setDefaults:function(a){I(N,a)},presetShort:function(a){this.shorts[a]=function(b){return j(this,I(b,{preset:a}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}},a.scroller=a.scroller||a.mobiscroll,a.fn.scroller=a.fn.scroller||a.fn.mobiscroll}(b),function(a){var b=a.mobiscroll,c=new Date,d={dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",startYear:c.getFullYear()-100,endYear:c.getFullYear()+1,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortYearCutoff:"+10",monthText:"Month",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",secText:"Seconds",ampmText:"&nbsp;",nowText:"Now",showNow:!1,stepHour:1,stepMinute:1,stepSecond:1,separator:" "},e=function(c){function e(a,b,c){return void 0!==w[b]?+a[w[b]]:void 0!==c?c:F[x[b]]?F[x[b]]():x[b](F)}function f(a,b){return Math.floor(a/b)*b}function g(a){var b=a.getHours();return b=D&&b>=12?b-12:b,f(b,G)}function h(a){return f(a.getMinutes(),H)}function i(a){return f(a.getSeconds(),I)}function j(a){return C&&a.getHours()>11?1:0}function k(a){var b=e(a,"h",0);return new Date(e(a,"y"),e(a,"m"),e(a,"d",1),e(a,"a")?b+12:b,e(a,"i",0),e(a,"s",0))}var l,m=a(this),n={};if(m.is("input")){switch(m.attr("type")){case"date":l="yy-mm-dd";break;case"datetime":l="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":l="yy-mm-ddTHH:ii:ss";break;case"month":l="yy-mm",n.dateOrder="mmyy";break;case"time":l="HH:ii:ss"}var o=m.attr("min"),p=m.attr("max");o&&(n.minDate=b.parseDate(l,o)),p&&(n.maxDate=b.parseDate(l,p))}var q,r,s=a.extend({},d,n,c.settings),t=0,u=[],v=[],w={},x={y:"getFullYear",m:"getMonth",d:"getDate",h:g,i:h,s:i,a:j},y=s.preset,z=s.dateOrder,A=s.timeWheels,B=z.match(/D/),C=A.match(/a/i),D=A.match(/h/),E="datetime"==y?s.dateFormat+s.separator+s.timeFormat:"time"==y?s.timeFormat:s.dateFormat,F=new Date,G=s.stepHour,H=s.stepMinute,I=s.stepSecond,J=s.minDate||new Date(s.startYear,0,1),K=s.maxDate||new Date(s.endYear,11,31,23,59,59);if(c.settings=s,l=l||E,y.match(/date/i)){a.each(["y","m","d"],function(a,b){q=z.search(new RegExp(b,"i")),q>-1&&v.push({o:q,v:b})}),v.sort(function(a,b){return a.o>b.o?1:-1}),a.each(v,function(a,b){w[b.v]=a});var L={};for(r=0;3>r;r++)if(r==w.y){t++,L[s.yearText]={};var M=J.getFullYear(),N=K.getFullYear();for(q=M;N>=q;q++)L[s.yearText][q]=z.match(/yy/i)?q:(q+"").substr(2,2)}else if(r==w.m)for(t++,L[s.monthText]={},q=0;12>q;q++){var O=z.replace(/[dy]/gi,"").replace(/mm/,9>q?"0"+(q+1):q+1).replace(/m/,q+1);L[s.monthText][q]=O.match(/MM/)?O.replace(/MM/,'<span class="dw-mon">'+s.monthNames[q]+"</span>"):O.replace(/M/,'<span class="dw-mon">'+s.monthNamesShort[q]+"</span>")}else if(r==w.d)for(t++,L[s.dayText]={},q=1;32>q;q++)L[s.dayText][q]=z.match(/dd/i)&&10>q?"0"+q:q;u.push(L)}if(y.match(/time/i)){for(v=[],a.each(["h","i","s","a"],function(a,b){a=A.search(new RegExp(b,"i")),a>-1&&v.push({o:a,v:b})}),v.sort(function(a,b){return a.o>b.o?1:-1}),a.each(v,function(a,b){w[b.v]=t+a}),L={},r=t;t+4>r;r++)if(r==w.h)for(t++,L[s.hourText]={},q=0;(D?12:24)>q;q+=G)L[s.hourText][q]=D&&0==q?12:A.match(/hh/i)&&10>q?"0"+q:q;else if(r==w.i)for(t++,L[s.minuteText]={},q=0;60>q;q+=H)L[s.minuteText][q]=A.match(/ii/)&&10>q?"0"+q:q;else if(r==w.s)for(t++,L[s.secText]={},q=0;60>q;q+=I)L[s.secText][q]=A.match(/ss/)&&10>q?"0"+q:q;else if(r==w.a){t++;var P=A.match(/A/);L[s.ampmText]={0:P?"AM":"am",1:P?"PM":"pm"}}u.push(L)}return c.setDate=function(a,b,c,d){var e;for(e in w)this.temp[w[e]]=a[x[e]]?a[x[e]]():x[e](a);this.setValue(!0,b,c,d)},c.getDate=function(a){return k(a)},{button3Text:s.showNow?s.nowText:void 0,button3:s.showNow?function(){c.setDate(new Date,!1,.3,!0)}:void 0,wheels:u,headerText:function(){return b.formatDate(E,k(c.temp),s)},formatResult:function(a){return b.formatDate(l,k(a),s)},parseValue:function(a){var c,d=new Date,e=[];try{d=b.parseDate(l,a,s)}catch(f){}for(c in w)e[w[c]]=d[x[c]]?d[x[c]]():x[c](d);return e},validate:function(b){var d=c.temp,g={y:J.getFullYear(),m:0,d:1,h:0,i:0,s:0,a:0},h={y:K.getFullYear(),m:11,d:31,h:f(D?11:23,G),i:f(59,H),s:f(59,I),a:1},i=!0,j=!0;a.each(["y","m","d","a","h","i","s"],function(c,f){if(void 0!==w[f]){var k,l,m=g[f],n=h[f],o=31,p=e(d,f),q=a(".dw-ul",b).eq(w[f]);if("d"==f&&(k=e(d,"y"),l=e(d,"m"),o=32-new Date(k,l,32).getDate(),n=o,B&&a(".dw-li",q).each(function(){var b=a(this),c=b.data("val"),d=new Date(k,l,c).getDay(),e=z.replace(/[my]/gi,"").replace(/dd/,10>c?"0"+c:c).replace(/d/,c);a(".dw-i",b).html(e.match(/DD/)?e.replace(/DD/,'<span class="dw-day">'+s.dayNames[d]+"</span>"):e.replace(/D/,'<span class="dw-day">'+s.dayNamesShort[d]+"</span>"))})),i&&J&&(m=J[x[f]]?J[x[f]]():x[f](J)),j&&K&&(n=K[x[f]]?K[x[f]]():x[f](K)),"y"!=f){var r=a(".dw-li",q).index(a('.dw-li[data-val="'+m+'"]',q)),t=a(".dw-li",q).index(a('.dw-li[data-val="'+n+'"]',q));a(".dw-li",q).removeClass("dw-v").slice(r,t+1).addClass("dw-v"),"d"==f&&a(".dw-li",q).removeClass("dw-h").slice(o).addClass("dw-h")}if(m>p&&(p=m),p>n&&(p=n),i&&(i=p==m),j&&(j=p==n),s.invalid&&"d"==f){var u=[];if(s.invalid.dates&&a.each(s.invalid.dates,function(a,b){b.getFullYear()==k&&b.getMonth()==l&&u.push(b.getDate()-1)}),s.invalid.daysOfWeek){var v,y=new Date(k,l,1).getDay();a.each(s.invalid.daysOfWeek,function(a,b){for(v=b-y;o>v;v+=7)v>=0&&u.push(v)})}s.invalid.daysOfMonth&&a.each(s.invalid.daysOfMonth,function(a,b){b=(b+"").split("/"),b[1]?b[0]-1==l&&u.push(b[1]-1):u.push(b[0]-1)}),a.each(u,function(b,c){a(".dw-li",q).eq(c).removeClass("dw-v")})}d[w[f]]=p}})},methods:{getDate:function(b){var c=a(this).mobiscroll("getInst");return c?c.getDate(b?c.temp:c.values):void 0},setDate:function(b,c,d,e){return this.each(function(){var f=a(this).mobiscroll("getInst");f&&f.setDate(b,c,d,e)})}}}};a.each(["date","time","datetime"],function(a,c){b.presets[c]=e,b.presetShort(c)}),b.formatDate=function(b,c,e){if(!c)return null;var f,g=a.extend({},d,e),h=function(a){for(var c=0;f+1<b.length&&b.charAt(f+1)==a;)c++,f++;return c},i=function(a,b,c){var d=""+b;if(h(a))for(;d.length<c;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;for(f=0;f<b.length;f++)if(l)"'"!=b.charAt(f)||h("'")?k+=b.charAt(f):l=!1;else switch(b.charAt(f)){case"d":k+=i("d",c.getDate(),2);break;case"D":k+=j("D",c.getDay(),g.dayNamesShort,g.dayNames);break;case"o":k+=i("o",(c.getTime()-new Date(c.getFullYear(),0,0).getTime())/864e5,3);break;case"m":k+=i("m",c.getMonth()+1,2);break;case"M":k+=j("M",c.getMonth(),g.monthNamesShort,g.monthNames);break;case"y":k+=h("y")?c.getFullYear():(c.getYear()%100<10?"0":"")+c.getYear()%100;break;case"h":var m=c.getHours();k+=i("h",m>12?m-12:0==m?12:m,2);break;case"H":k+=i("H",c.getHours(),2);break;case"i":k+=i("i",c.getMinutes(),2);break;case"s":k+=i("s",c.getSeconds(),2);break;case"a":k+=c.getHours()>11?"pm":"am";break;case"A":k+=c.getHours()>11?"PM":"AM";break;case"'":h("'")?k+="'":l=!0;break;default:k+=b.charAt(f)}return k},b.parseDate=function(b,c,e){var f=new Date;if(!b||!c)return f;c="object"==typeof c?c.toString():c+"";var g,h=a.extend({},d,e),i=h.shortYearCutoff,j=f.getFullYear(),k=f.getMonth()+1,l=f.getDate(),m=-1,n=f.getHours(),o=f.getMinutes(),p=0,q=-1,r=!1,s=function(a){var c=g+1<b.length&&b.charAt(g+1)==a;return c&&g++,c},t=function(a){s(a);var b="@"==a?14:"!"==a?20:"y"==a?4:"o"==a?3:2,d=new RegExp("^\\d{1,"+b+"}"),e=c.substr(w).match(d);return e?(w+=e[0].length,parseInt(e[0],10)):0},u=function(a,b,d){var e,f=s(a)?d:b;for(e=0;e<f.length;e++)if(c.substr(w,f[e].length).toLowerCase()==f[e].toLowerCase())return w+=f[e].length,e+1;return 0},v=function(){w++},w=0;for(g=0;g<b.length;g++)if(r)"'"!=b.charAt(g)||s("'")?v():r=!1;else switch(b.charAt(g)){case"d":l=t("d");break;case"D":u("D",h.dayNamesShort,h.dayNames);break;case"o":m=t("o");break;case"m":k=t("m");break;case"M":k=u("M",h.monthNamesShort,h.monthNames);break;case"y":j=t("y");break;case"H":n=t("H");break;case"h":n=t("h");break;case"i":o=t("i");break;case"s":p=t("s");break;case"a":q=u("a",["am","pm"],["am","pm"])-1;break;case"A":q=u("A",["am","pm"],["am","pm"])-1;break;case"'":s("'")?v():r=!0;break;default:v()}if(100>j&&(j+=(new Date).getFullYear()-(new Date).getFullYear()%100+(j<=("string"!=typeof i?i:(new Date).getFullYear()%100+parseInt(i,10))?0:-100)),m>-1)for(k=1,l=m;;){var x=32-new Date(j,k-1,32).getDate();if(x>=l)break;k++,l-=x}n=-1==q?n:q&&12>n?n+12:q||12!=n?n:0;var y=new Date(j,k-1,l,n,o,p);if(y.getFullYear()!=j||y.getMonth()+1!=k||y.getDate()!=l)throw"Invalid date";return y}}(b),function(a){var b={inputClass:"",invalid:[],rtl:!1,group:!1,groupLabel:"Groups"};a.mobiscroll.presetShort("select"),a.mobiscroll.presets.select=function(c){function d(a){return a?a.replace(/_/,""):""}function e(){var b,c=0,d={},e=[{}];return n.group?(n.rtl&&(c=1),a("optgroup",o).each(function(b){d["_"+b]=a(this).attr("label")}),e[c]={},e[c][n.groupLabel]=d,b=s,c+=n.rtl?-1:1):b=o,e[c]={},e[c][w]={},a("option",b).each(function(){var b=a(this).attr("value");e[c][w]["_"+b]=a(this).text(),a(this).prop("disabled")&&x.push(b)}),e}function f(a,b){var e=[];if(p){var f=[],h=0;for(h in c._selectedValues)f.push(z[h]),e.push(h);k.val(f.join(", "))}else k.val(a),e=b?d(c.values[i]):null;b&&(g=!0,o.val(e).trigger("change"))}var g,h,i,j,k,l,m=c.settings,n=a.extend({},b,m),o=a(this),p=o.prop("multiple"),q=this.id+"_dummy",r=p?o.val()?o.val()[0]:a("option",o).attr("value"):o.val(),s=o.find('option[value="'+r+'"]').parent(),t=s.index()+"",u=t,v=(a('label[for="'+this.id+'"]').attr("for",q),a('label[for="'+q+'"]')),w=void 0!==n.label?n.label:v.length?v.text():o.attr("name"),x=[],y=[],z={},A=m.readonly;n.group&&!a("optgroup",o).length&&(n.group=!1),n.invalid.length||(n.invalid=x),n.group?n.rtl?(h=1,i=0):(h=0,i=1):(h=-1,i=0),a("#"+q).remove(),k=a('<input type="text" id="'+q+'" class="'+n.inputClass+'" readonly />').insertBefore(o),a("option",o).each(function(){z[a(this).attr("value")]=a(this).text()}),n.showOnFocus&&k.focus(function(){c.show()});var B=o.val()||[],C=0;for(C;C<B.length;C++)c._selectedValues[B[C]]=B[C];return f(z[r]),o.unbind(".dwsel").bind("change.dwsel",function(){g||c.setSelectVal(p?o.val()||[]:[o.val()],!0),g=!1}).hide().closest(".ui-field-contain").trigger("create"),c.setSelectVal=function(b,d,g){if(r=b[0]||a("option",o).attr("value"),p){c._selectedValues={};var h=0;for(h;h<b.length;h++)c._selectedValues[b[h]]=b[h]}if(n.group?(s=o.find('option[value="'+r+'"]').parent(),u=s.index(),c.temp=n.rtl?["_"+r,"_"+s.index()]:["_"+s.index(),"_"+r],u!==t&&(m.wheels=e(),c.changeWheel([i]),t=u+"")):c.temp=["_"+r],c.setValue(!0,d,g),d){var j=p?!0:r!==o.val();f(z[r],j)}},c.getSelectVal=function(a){var b=a?c.temp:c.values;return d(b[i])},{width:50,wheels:l,headerText:!1,multiple:p,anchor:k,formatResult:function(a){return z[d(a[i])]},parseValue:function(){var b=o.val()||[],d=0;if(p)for(c._selectedValues={},d;d<b.length;d++)c._selectedValues[b[d]]=b[d];return r=p?o.val()?o.val()[0]:a("option",o).attr("value"):o.val(),s=o.find('option[value="'+r+'"]').parent(),u=s.index(),t=u+"",n.group&&n.rtl?["_"+r,"_"+u]:n.group?["_"+u,"_"+r]:["_"+r]},validate:function(b,f,g){if(void 0===f&&p){var k=c._selectedValues,l=0;for(l in k)a(".dwwl"+i+' .dw-li[data-val="_'+k[l]+'"]',b).addClass("dw-msel")}if(f===h)if(u=d(c.temp[h]),u!==t){if(s=o.find("optgroup").eq(u),u=s.index(),r=s.find("option").eq(0).val(),r=r||o.val(),m.wheels=e(),n.group)return c.temp=n.rtl?["_"+r,"_"+u]:["_"+u,"_"+r],m.readonly=[n.rtl,!n.rtl],clearTimeout(j),j=setTimeout(function(){c.changeWheel([i]),m.readonly=A,t=u+""},1e3*g),!1}else m.readonly=A;else r=d(c.temp[i]);var q=a(".dw-ul",b).eq(i);a.each(n.invalid,function(b,c){a('.dw-li[data-val="_'+c+'"]',q).removeClass("dw-v")})},onBeforeShow:function(){m.wheels=e(),n.group&&(c.temp=n.rtl?["_"+r,"_"+s.index()]:["_"+s.index(),"_"+r])},onMarkupReady:function(b){if(a(".dwwl"+h,b).bind("mousedown touchstart",function(){clearTimeout(j)}),p){b.addClass("dwms"),a(".dwwl",b).eq(i).addClass("dwwms"),y={};var d;for(d in c._selectedValues)y[d]=c._selectedValues[d]}},onValueTap:function(a){if(p&&a.hasClass("dw-v")&&a.closest(".dw").find(".dw-ul").index(a.closest(".dw-ul"))==i){var b=d(a.attr("data-val"));return a.hasClass("dw-msel")?delete c._selectedValues[b]:c._selectedValues[b]=b,a.toggleClass("dw-msel"),"inline"==n.display&&f(b,!0),!1}},onSelect:function(a){f(a,!0),n.group&&(c.values=null)},onCancel:function(){if(n.group&&(c.values=null),p){c._selectedValues={};var a;for(a in y)c._selectedValues[a]=y[a]}},onChange:function(a){"inline"!=n.display||p||(k.val(a),g=!0,o.val(d(c.temp[i])).trigger("change"))},onClose:function(){k.blur()},methods:{setValue:function(b,c,d){return this.each(function(){var e=a(this).mobiscroll("getInst");e&&(e.setSelectVal?e.setSelectVal(b,c,d):(e.temp=b,e.setValue(!0,c,d)))})},getValue:function(b){var c=a(this).mobiscroll("getInst");return c?c.getSelectVal?c.getSelectVal(b):c.values:void 0}}}}}(b),function(a){a.mobiscroll.themes.ios={defaults:{dateOrder:"MMdyy",rows:5,height:30,width:55,headerText:!1,showLabel:!1,useShortLabels:!0}}}(b),function(a){a.mobiscroll.themes.android={defaults:{dateOrder:"Mddyy",mode:"clickpick",height:50,showLabel:!1}}}(b),function(a){a.mobiscroll.i18n.de=a.extend(a.mobiscroll.i18n.de,{setText:"OK",cancelText:"Abbrechen",dateFormat:"dd.mm.yy",dateOrder:"ddmmyy",dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayText:"Tag",hourText:"Stunde",minuteText:"Minuten",monthNames:["Januar","Februar","MÃÂ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","MÃÂ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],monthText:"Monat",secText:"Sekunden",timeFormat:"HH:ii",timeWheels:"HHii",yearText:"Jahr",nowText:"Jetzt",wholeText:"Ganze Zahl",fractionText:"Bruchzahl",unitText:"MaÃÅ¸einheit",labels:["Jahre","Monate","Tage","Stunden","Minuten","Sekunden",""],labelsShort:["Yrs","Mths","Days","Hrs","Mins","Secs",""],startText:"Start",stopText:"Stop",resetText:"Reset",lapText:"Lap",hideText:"Hide"})}(b),function(a){a.mobiscroll.i18n.es=a.extend(a.mobiscroll.i18n.es,{setText:"Aceptar",cancelText:"Cancelar",dateFormat:"dd/mm/yy",dateOrder:"ddmmyy",dayNames:["Domingo","Lunes","Martes","Mi&#xE9;rcoles","Jueves","Viernes","S&#xE1;bado"],dayNamesShort:["Do","Lu","Ma","Mi","Ju","Vi","S&#xE1;"],dayText:"D&#237;a",hourText:"Horas",minuteText:"Minutos",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],monthText:"Mes",secText:"Segundos",timeFormat:"HH:ii",timeWheels:"HHii",yearText:"A&ntilde;o",nowText:"Ahora",wholeText:"Entero",fractionText:"FracciÃÂ³n",unitText:"Unidad",labels:["AÃÂ±os","Meses","DÃÂ­as","Horas","Minutos","Segundos",""],labelsShort:["Yrs","Mths","Days","Hrs","Mins","Secs",""],startText:"Iniciar",stopText:"DetÃÂ©ngase",resetText:"Reinicializar",lapText:"Lap",hideText:"Esconder"})}(b),a}),window.onerror=function(a,b,c){"use strict";var d="THIS IS A GLOBAL ERROR (window.onerror) --> ",e=a+" "+b+" on line "+c+" ENV: "+__app_config__.ENV+" ua "+navigator.userAgent;return d+=e,log(d),require(["app"],function(a){a.handleError(e,!0)}),"production"===__app_config__.ENV},require(["app","i18next","zepto","fastclick","underscore","backbone","common","router","models/user","collections/todos","collections/todolists","collections/activities","libs/storage","mobiscroll","JrFork"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";function p(){return o.Navigator.isAnimating?!1:(a.router.setLastRoute(f.history.fragment),void window.history.back())}function q(b){b.on(v,".back-btn",function(a){return a.preventDefault(),a.stopPropagation(),g.isScreenLocked()?(g.dialog(__("reallyLeave"),function(a){a&&p()},!0),!1):(p(),!1)}),b.on(v,"a",function(b){var d=c(this),e=d.attr("href");if(d.attr("disabled"))return b.preventDefault(),b.stopPropagation(),!1;if("#"===e)return b.preventDefault(),b.stopPropagation(),!1;if(a.isMobile&&(/http/.test(e)||/https/.test(e)))return a.isIOS?window.open(e,"_system"):a.isAndroid&&navigator.app&&navigator.app.loadUrl(e,{openExternal:!0}),!1;if(a.isBrowser&&(/http/.test(e)||/https/.test(e)))return!0;if(e&&/#/.test(e)&&"#"!==e){b.preventDefault(),a.router.setLastRoute(f.history.fragment);var g=d.hasClass("back-link")?o.Navigator.directions.RIGHT:o.Navigator.directions.LEFT;o.Navigator.navigate(e,{animation:{type:o.Navigator.animations.SLIDE_STACK,direction:g}})}return!1})}function r(a){var b;b=__app_config__.touch?"touchstart":"mousedown",a.on(b,".aog-button",function(){c(this).addClass("pressed")}),a.on(b,".aog-list li:not(.no-link)",function(){c(this).addClass("pressed-list")}),a.on(b,".aog-list li:not(.no-link) a",function(){c(this).parent().addClass("pressed-list")}),b=__app_config__.touch?"touchmove":"mousemove",a.on(b,".aog-list li:not(.no-link), .aog-button",function(){c(this).removeClass("pressed"),c(this).removeClass("pressed-list")}),b=__app_config__.touch?"touchend":"mouseup",a.on(b,".aog-list li:not(.no-link), .aog-button",function(){c(this).removeClass("pressed"),c(this).removeClass("pressed-list")});var d=function(a){var b=c(a.currentTarget);b.addClass("tapped"),setTimeout(function(){return 0===b.length?!1:void b.removeClass("tapped")},500)},e=function(a){var b=c(a.currentTarget);b.removeClass("tapped")};b=__app_config__.touch?"touchstart":"mousedown",a.on(b,"header a, .modal-header a",d),b=__app_config__.touch?"touchmove":"mousemove",a.on(b,"header a, .modal-header a",e)}function s(b){if(!a||a.isMobile===!1)return!1;if(d.attach(document.body),a.isIOS&&!function(){var a=c("#app-container");a.css("-webkit-backface-visibility","hidden"),a.css("visibility","visible")}(),a.isBrowser)return!1;var e=function(){__app_config__.isPaused=!0,log("---> onPause "),a.socketWrapper&&a.socketWrapper.disconnect(!0)},f=function(){return __app_config__.isPaused=!1,log("---> onResume - app.isLoggedIn? "+(a.isLoggedIn?"yes":"no!")),a.isLoggedIn?void setTimeout(function(){a.fetchUser()},1e3):!1};document.addEventListener("pause",e,!1),document.addEventListener("resume",f,!1),b.on("click","a",function(a){return a.preventDefault(),!1}),b.on("click","button",function(a){return a.preventDefault(),!1});var g=function(){a&&a.isLoggedIn&&a.router&&a.router.go("todolists")};a.isAndroid&&document.addEventListener("menubutton",g,!1)}function t(){var a,b,c,d=["images/logo.png","images/logo@2.png"];for(c=d.length,b=0;c>b;b++)a=new Image,a.src=d[b]}function u(){var b="1"===g.store.get("is-auth"),d=c(document),e=c("body");a.isIOS=a.isPhonegapAvailable?"ios"===window.device.platform.toLowerCase():!1,a.isAndroid=a.isPhonegapAvailable?"android"===window.device.platform.toLowerCase():!1,a.isIOS||(a.isIOS=a.isiOSBrowser),a.isIOS&&(navigator.standalone||a.isPhonegapAvailable&&window.device.version.match("7."))&&e.addClass("standalone"),a.useSlideAnimation=a.isIOS&&!a.isTablet,r(e),s(e),t(e),q(e),a.router=new h(b),!a.isPhonegapAvailable&&a.isPhantomJS&&(__app_config__.router=a.router),a.on("translationsLoaded",a.router.onTranslationsLoaded,a.router),a.initGlobalization();try{a.storage=new m(function(b){b||a.router.checkLocalDatabaseAndSync()})}catch(j){log("DATABASE ERROR: "+j.message)}a.user=new i,a.todolists=new k,f.history.start({pushState:!1}),d.on("ajaxError",function(b,c,d){g.hideLoader();var e=c.status;a.handleError("AJAX ERROR in main.js - (status: "+e+") URL: "+d.url+" RESPONSE: "+c.statusText+" ||| "+d.responseText)}),d.on("ajaxComplete",function(){g.hideLoader()})}window.__=b.t;var v=a.defaultClickEvent;!function(){a.setUserModel(i),a.todosCollectionInstance=j,a.activityCollection=new l}(),function(){c.ajaxSettings.timeout=a.AJAX_TIMEOUT,c.ajaxSettings.beforeSend=function(b){var c="AtOneGo",d="Basic "+g.base64Encode(c+":"+a.API_TOKEN);return b.setRequestHeader("Authorization",d),b.setRequestHeader("Content-Language",a.lang||"en"),a.checkInternetConnection()?void 0:(g.hideLoader(),!1)};var b=f.sync;f.sync=function(a,c,d){d||(d={}),d.crossDomain||(d.crossDomain=!0);var f=e.isFunction(c.url)?c.url():c.url;return log("===== BACKBONE CORS SYNC #"+a.toUpperCase()+" "+f+" "),b(a,c,d)}}(),a.isPhonegapAvailable?(log("------------------> registering deviceready event <------------------"),document.addEventListener("deviceready",u,!1)):(log("------------------> doc.ready <------------------"),c(document).ready(u))}),define("main",function(){}),require.config({deps:["main"],map:{"*":{jquery:"zepto"}},paths:{libs:"../scripts/libs",zepto:"../scripts/libs/zepto",underscore:"../bower_components/underscore/underscore",backbone:"../bower_components/backbone/backbone",fastclick:"../bower_components/fastclick/lib/fastclick",text:"../bower_components/requirejs-text/text",i18next:"../scripts/libs/i18next.amd-1.6.0",moment:"../scripts/libs/moment",mobiscroll:"../scripts/libs/mobiscroll",JrFork:"../scripts/libs/junior_fork",VanillaStorage:"../bower_components/vanilla-storage/src/VanillaStorage",WebSQLStorage:"../bower_components/vanilla-storage/src/WebSQLStorage",IDBStorage:"../bower_components/vanilla-storage/src/IDBStorage",storageHelpers:"../bower_components/vanilla-storage/src/storageHelpers",cryptojs:"../scripts/libs/cryptojs.aes.3.1.2"},shim:{zepto:{exports:"Zepto"},mobiscroll:{deps:["zepto"],exports:"Mobiscroll"},cryptojs:{exports:"CryptoJS"}}}),define("config",function(){})}();