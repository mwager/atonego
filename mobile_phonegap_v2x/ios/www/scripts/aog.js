(function(){define("version",[],function(){"use strict";return"v1.0.0"}),function(){(function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(this===void 0||null===this)throw new TypeError;var n,i=Object(this),r=i.length>>>0,s=0;if("function"!=typeof t)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(s in i){n=i[s++];break}if(++s>=r)throw new TypeError}for(;r>s;)s in i&&(n=t.call(e,n,i[s],s,i)),s++;return n})})();var e=function(){function e(e){return null==e?e+"":W[X.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(t){return"object"==e(t)}function s(e){return r(e)&&!n(e)&&e.__proto__==Object.prototype}function o(e){return e instanceof Array}function a(e){return"number"==typeof e.length}function l(e){return O.call(e,function(e){return null!=e})}function u(e){return e.length>0?S.fn.concat.apply([],e):e}function c(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(e){return e in M?M[e]:M[e]=RegExp("(^|\\s)"+e+"(\\s|$)")}function h(e,t){return"number"!=typeof t||P[c(e)]?t:t+"px"}function f(e){var t,n;return N[e]||(t=C.createElement(e),C.body.appendChild(t),n=I(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),N[e]=n),N[e]}function p(e){return"children"in e?A.call(e.children):S.map(e.childNodes,function(e){return 1==e.nodeType?e:x})}function m(e,t,n){for(T in t)n&&(s(t[T])||o(t[T]))?(s(t[T])&&!s(e[T])&&(e[T]={}),o(t[T])&&!o(e[T])&&(e[T]=[]),m(e[T],t[T],n)):t[T]!==x&&(e[T]=t[T])}function g(e,t){return t===x?S(e):S(e).filter(t)}function v(e,n,i,r){return t(n)?n.call(e,i,r):n}function _(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function b(e,t){var n=e.className,i=n&&n.baseVal!==x;return t===x?i?n.baseVal:n:(i?n.baseVal=t:e.className=t,x)}function y(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?S.parseJSON(e):e:t):e}catch(n){return e}}function w(e,t){t(e);for(var n in e.childNodes)w(e.childNodes[n],t)}var x,T,S,k,E,D,L=[],A=L.slice,O=L.filter,C=window.document,N={},M={},I=C.defaultView.getComputedStyle,P={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},B=/^\s*<(\w+|!)[^>]*>/,j=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,R=/^(?:body|html)$/i,F=["val","css","html","text","data","width","height","offset"],$=["after","prepend","before","append"],z=C.createElement("table"),U=C.createElement("tr"),H={tr:C.createElement("tbody"),tbody:z,thead:z,tfoot:z,td:U,th:U,"*":C.createElement("div")},V=/complete|loaded|interactive/,Y=/^\.([\w-]+)$/,J=/^#([\w-]*)$/,q=/^[\w-]+$/,W={},X=W.toString,G={},K=C.createElement("div");return G.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,s=!r;return s&&(r=K).appendChild(e),i=~G.qsa(r,t).indexOf(e),s&&K.removeChild(e),i},E=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},D=function(e){return O.call(e,function(t,n){return e.indexOf(t)==n})},G.fragment=function(e,t,n){e.replace&&(e=e.replace(j,"<$1></$2>")),t===x&&(t=B.test(e)&&RegExp.$1),t in H||(t="*");var i,r,o=H[t];return o.innerHTML=""+e,r=S.each(A.call(o.childNodes),function(){o.removeChild(this)}),s(n)&&(i=S(r),S.each(n,function(e,t){F.indexOf(e)>-1?i[e](t):i.attr(e,t)})),r},G.Z=function(e,t){return e=e||[],e.__proto__=S.fn,e.selector=t||"",e},G.isZ=function(e){return e instanceof G.Z},G.init=function(e,n){if(e){if(t(e))return S(C).ready(e);if(G.isZ(e))return e;var i;if(o(e))i=l(e);else if(r(e))i=[s(e)?S.extend({},e):e],e=null;else if(B.test(e))i=G.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==x)return S(n).find(e);i=G.qsa(C,e)}return G.Z(i,e)}return G.Z()},S=function(e,t){return G.init(e,t)},S.extend=function(e){var t,n=A.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){m(e,n,t)}),e},G.qsa=function(e,t){var n;return i(e)&&J.test(t)?(n=e.getElementById(RegExp.$1))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:A.call(Y.test(t)?e.getElementsByClassName(RegExp.$1):q.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},S.contains=function(e,t){return e!==t&&e.contains(t)},S.type=e,S.isFunction=t,S.isWindow=n,S.isArray=o,S.isPlainObject=s,S.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},S.inArray=function(e,t,n){return L.indexOf.call(t,e,n)},S.camelCase=E,S.trim=function(e){return e.trim()},S.uuid=0,S.support={},S.expr={},S.map=function(e,t){var n,i,r,s=[];if(a(e))for(i=0;e.length>i;i++)n=t(e[i],i),null!=n&&s.push(n);else for(r in e)n=t(e[r],r),null!=n&&s.push(n);return u(s)},S.each=function(e,t){var n,i;if(a(e)){for(n=0;e.length>n;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},S.grep=function(e,t){return O.call(e,t)},window.JSON&&(S.parseJSON=JSON.parse),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){W["[object "+t+"]"]=t.toLowerCase()}),S.fn={forEach:L.forEach,reduce:L.reduce,push:L.push,sort:L.sort,indexOf:L.indexOf,concat:L.concat,map:function(e){return S(S.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return S(A.apply(this,arguments))},ready:function(e){return V.test(C.readyState)?e(S):C.addEventListener("DOMContentLoaded",function(){e(S)},!1),this},get:function(e){return e===x?A.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return L.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):S(O.call(this,function(t){return G.matches(t,e)}))},add:function(e,t){return S(D(this.concat(S(e,t))))},is:function(e){return this.length>0&&G.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==x)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):a(e)&&t(e.item)?A.call(e):S(e);this.forEach(function(e){0>i.indexOf(e)&&n.push(e)})}return S(n)},has:function(e){return this.filter(function(){return r(e)?S.contains(this,e):S(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:S(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:S(e)},find:function(e){var t,n=this;return t="object"==typeof e?S(e).filter(function(){var e=this;return L.some.call(n,function(t){return S.contains(t,e)})}):1==this.length?S(G.qsa(this[0],e)):this.map(function(){return G.qsa(this,e)})},closest:function(e,t){var n=this[0],r=!1;for("object"==typeof e&&(r=S(e));n&&!(r?r.indexOf(n)>=0:G.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return S(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=S.map(n,function(e){return(e=e.parentNode)&&!i(e)&&0>t.indexOf(e)?(t.push(e),e):x});return g(t,e)},parent:function(e){return g(D(this.pluck("parentNode")),e)},children:function(e){return g(this.map(function(){return p(this)}),e)},contents:function(){return this.map(function(){return A.call(this.childNodes)})},siblings:function(e){return g(this.map(function(e,t){return O.call(p(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return S.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==I(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=S(e).get(0),r=i.parentNode||this.length>1;return this.each(function(t){S(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){S(this[0]).before(e=S(e));for(var t;(t=e.children()).length;)e=t.first();S(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=S(this),r=i.contents(),s=n?e.call(this,t):e;r.length?r.wrapAll(s):i.append(s)})},unwrap:function(){return this.parent().each(function(){S(this).replaceWith(S(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=S(this);(e===x?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return S(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return S(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return e===x?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;S(this).empty().append(v(this,e,t,n))})},text:function(e){return e===x?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,t){var n;return"string"==typeof e&&t===x?0==this.length||1!==this[0].nodeType?x:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:this.each(function(n){if(1===this.nodeType)if(r(e))for(T in e)_(this,T,e[T]);else _(this,e,v(this,t,n,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&_(this,e)})},prop:function(e,t){return t===x?this[0]&&this[0][e]:this.each(function(n){this[e]=v(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+c(e),t);return null!==n?y(n):x},val:function(e){return e===x?this[0]&&(this[0].multiple?S(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=v(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var n=S(this),i=v(this,e,t,n.offset()),r=n.offsetParent().offset(),s={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(s.position="relative"),n.css(s)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(2>arguments.length&&"string"==typeof t)return this[0]&&(this[0].style[E(t)]||I(this[0],"").getPropertyValue(t));var i="";if("string"==e(t))n||0===n?i=c(t)+":"+h(t,n):this.each(function(){this.style.removeProperty(c(t))});else for(T in t)t[T]||0===t[T]?i+=c(T)+":"+h(T,t[T])+";":this.each(function(){this.style.removeProperty(c(T))});return this.each(function(){this.style.cssText+=";"+i})},index:function(e){return e?this.indexOf(S(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return L.some.call(this,function(e){return this.test(b(e))},d(e))},addClass:function(e){return this.each(function(t){k=[];var n=b(this),i=v(this,e,t,n);i.split(/\s+/g).forEach(function(e){S(this).hasClass(e)||k.push(e)},this),k.length&&b(this,n+(n?" ":"")+k.join(" "))})},removeClass:function(e){return this.each(function(t){return e===x?b(this,""):(k=b(this),v(this,e,t,k).split(/\s+/g).forEach(function(e){k=k.replace(d(e)," ")}),b(this,k.trim()),x)})},toggleClass:function(e,t){return this.each(function(n){var i=S(this),r=v(this,e,n,b(this));r.split(/\s+/g).forEach(function(e){(t===x?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:x},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=R.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(S(e).css("margin-top"))||0,n.left-=parseFloat(S(e).css("margin-left"))||0,i.top+=parseFloat(S(t[0]).css("border-top-width"))||0,i.left+=parseFloat(S(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||C.body;e&&!R.test(e.nodeName)&&"static"==S(e).css("position");)e=e.offsetParent;return e})}},S.fn.detach=S.fn.remove,["width","height"].forEach(function(e){S.fn[e]=function(t){var r,s=this[0],o=e.replace(/./,function(e){return e[0].toUpperCase()});return t===x?n(s)?s["inner"+o]:i(s)?s.documentElement["offset"+o]:(r=this.offset())&&r[e]:this.each(function(n){s=S(this),s.css(e,v(this,t,n,s[e]()))})}}),$.forEach(function(t,n){var i=n%2;S.fn[t]=function(){var t,r,s=S.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:G.fragment(n)}),o=this.length>1;return 1>s.length?this:this.each(function(e,t){r=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null,s.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!r)return S(e).remove();w(r.insertBefore(e,t),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},S.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return S(e)[t](this),this}}),G.Z.prototype=S.fn,G.uniq=D,G.deserializeValue=y,S.zepto=G,S}();(function(e){function t(e){var t=this.os={},n=this.browser={},i=e.match(/WebKit\/([\d.]+)/),r=e.match(/(Android)\s+([\d.]+)/),s=e.match(/(iPad).*OS\s([\d_]+)/),o=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),a=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),l=a&&e.match(/TouchPad/),u=e.match(/Kindle\/([\d.]+)/),c=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/),h=e.match(/(BB10).*Version\/([\d.]+)/),f=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),p=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),g=e.match(/Firefox\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),r&&(t.android=!0,t.version=r[2]),o&&(t.ios=t.iphone=!0,t.version=o[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),a&&(t.webos=!0,t.version=a[2]),l&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),h&&(t.bb10=!0,t.version=h[2]),f&&(t.rimtabletos=!0,t.version=f[2]),p&&(n.playbook=!0),u&&(t.kindle=!0,t.version=u[1]),c&&(n.silk=!0,n.version=c[1]),!c&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),g&&(n.firefox=!0,n.version=g[1]),t.tablet=!!(s||p||r&&!e.match(/Mobile/)||g&&e.match(/Tablet/)),t.phone=!(t.tablet||!(r||o||a||d||h||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||g&&e.match(/Mobile/)))}t.call(e,navigator.userAgent),e.__detect=t})(e),function(e){function t(e){return e._zid||(e._zid=f++)}function n(e,n,s,o){if(n=i(n),n.ns)var a=r(n.ns);return(h[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!a.test(e.ns)||s&&t(e.fn)!==t(s)||o&&e.sel!=o)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function s(t,n,i){"string"!=e.type(t)?e.each(t,i):t.split(/\s/).forEach(function(e){i(e,n)})}function o(e,t){return e.del&&("focus"==e.e||"blur"==e.e)||!!t}function a(e){return m[e]||e}function l(n,r,l,u,c,d){var f=t(n),p=h[f]||(h[f]=[]);s(r,l,function(t,r){var s=i(t);s.fn=r,s.sel=u,s.e in m&&(r=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?s.fn.apply(this,arguments):void 0}),s.del=c&&c(r,t);var l=s.del||r;s.proxy=function(e){var t=l.apply(n,[e].concat(e.data));return t===!1&&(e.preventDefault(),e.stopPropagation()),t},s.i=p.length,p.push(s),n.addEventListener(a(s.e),s.proxy,o(s,d))})}function u(e,i,r,l,u){var c=t(e);s(i||"",r,function(t,i){n(e,t,i,l).forEach(function(t){delete h[c][t.i],e.removeEventListener(a(t.e),t.proxy,o(t,u))})})}function c(t){var n,i={originalEvent:t};for(n in t)_.test(n)||void 0===t[n]||(i[n]=t[n]);return e.each(b,function(e,n){i[e]=function(){return this[n]=g,t[e].apply(t,arguments)},i[n]=v}),i}function d(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var h=(e.zepto.qsa,{}),f=1,p={},m={mouseenter:"mouseover",mouseleave:"mouseout"};p.click=p.mousedown=p.mouseup=p.mousemove="MouseEvents",e.event={add:l,remove:u},e.proxy=function(n,i){if(e.isFunction(n)){var r=function(){return n.apply(i,arguments)};return r._zid=t(n),r}if("string"==typeof i)return e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){l(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){u(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,i){l(this,e,t,null,function(e,t){return function(){var n=e.apply(i,arguments);return u(i,t,e),n}})})};var g=function(){return!0},v=function(){return!1},_=/^([A-Z]|layer[XY]$)/,b={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,i){return this.each(function(r,s){l(s,n,i,t,function(n){return function(i){var r,o=e(i.target).closest(t,s).get(0);return o?(r=e.extend(c(i),{currentTarget:o,liveFired:s}),n.apply(o,[r].concat([].slice.call(arguments,1)))):void 0}})})},e.fn.undelegate=function(e,t,n){return this.each(function(){u(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i){return!n||e.isFunction(n)?this.bind(t,n||i):this.delegate(n,t,i)},e.fn.off=function(t,n,i){return!n||e.isFunction(n)?this.unbind(t,n||i):this.undelegate(n,t,i)},e.fn.trigger=function(t,n){return("string"==typeof t||e.isPlainObject(t))&&(t=e.Event(t)),d(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,i){var r,s;return this.each(function(o,a){r=c("string"==typeof t?e.Event(t):t),r.data=i,r.target=a,e.each(n(a,t.type||t),function(e,t){return s=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),s},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){"string"!=typeof e&&(t=e,e=t.type);var n=document.createEvent(p[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n.isDefaultPrevented=function(){return this.defaultPrevented},n}}(e),function(e){function t(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.defaultPrevented}function n(e,n,i,r){return e.global?t(n||_,i,r):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function r(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function s(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:(n(t,i,"ajaxSend",[e,t]),void 0)}function o(e,t,i){var r=i.context,s="success";i.success.call(r,e,s,t),n(i,r,"ajaxSuccess",[t,i,e]),l(s,t,i)}function a(e,t,i,r){var s=r.context;r.error.call(s,i,t,e),n(r,s,"ajaxError",[i,r,e]),l(t,i,r)}function l(e,t,i){var s=i.context;i.complete.call(s,t,e),n(i,s,"ajaxComplete",[t,i]),r(i)}function u(){}function c(e){return e&&(e=e.split(";",2)[0]),e&&(e==T?"html":e==x?"json":y.test(e)?"script":w.test(e)&&"xml")||"text"}function d(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function h(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=d(t.url,t.data))}function f(t,n,i,r){var s=!e.isFunction(n);return{url:t,data:s?n:void 0,success:s?e.isFunction(i)?i:void 0:n,dataType:s?r||i:i}}function p(t,n,i,r){var s,o=e.isArray(n);e.each(n,function(n,a){s=e.type(a),r&&(n=i?r:r+"["+(o?"":n)+"]"),!r&&o?t.add(a.name,a.value):"array"==s||!i&&"object"==s?p(t,a,i,n):t.add(n,a)})}var m,g,v=0,_=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,y=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,x="application/json",T="text/html",S=/^\s*$/;e.active=0,e.ajaxJSONP=function(t){if(!("type"in t))return e.ajax(t);var n,i="jsonp"+ ++v,r=_.createElement("script"),l=function(){clearTimeout(n),e(r).remove(),delete window[i]},c=function(e){l(),e&&"timeout"!=e||(window[i]=u),a(null,e||"abort",d,t)},d={abort:c};return s(d,t)===!1?(c("abort"),!1):(window[i]=function(e){l(),o(e,d,t)},r.onerror=function(){c("error")},r.src=t.url.replace(/=\?/,"="+i),e("head").append(r),t.timeout>0&&(n=setTimeout(function(){c("timeout")},t.timeout)),d)},e.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:x,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n=e.extend({},t||{});for(m in e.ajaxSettings)void 0===n[m]&&(n[m]=e.ajaxSettings[m]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=""+window.location),h(n),n.cache===!1&&(n.url=d(n.url,"_="+Date.now()));var r=n.dataType,l=/=\?/.test(n.url);if("jsonp"==r||l)return l||(n.url=d(n.url,"callback=?")),e.ajaxJSONP(n);var f,p=n.accepts[r],v={},_=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,b=n.xhr();n.crossDomain||(v["X-Requested-With"]="XMLHttpRequest"),p&&(v.Accept=p,p.indexOf(",")>-1&&(p=p.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(p)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&(v["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=e.extend(v,n.headers||{}),b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=u,clearTimeout(f);var t,i=!1;if(b.status>=200&&300>b.status||304==b.status||0==b.status&&"file:"==_){r=r||c(b.getResponseHeader("content-type")),t=b.responseText;try{"script"==r?(1,eval)(t):"xml"==r?t=b.responseXML:"json"==r&&(t=S.test(t)?null:e.parseJSON(t))}catch(s){i=s}i?a(i,"parsererror",b,n):o(t,b,n)}else a(null,b.status?"error":"abort",b,n)}};var y="async"in n?n.async:!0;b.open(n.type,n.url,y);for(g in n.headers)b.setRequestHeader(g,n.headers[g]);return s(b,n)===!1?(b.abort(),!1):(n.timeout>0&&(f=setTimeout(function(){b.onreadystatechange=u,b.abort(),a(null,"timeout",b,n)},n.timeout)),b.send(n.data?n.data:null),b)},e.get=function(){return e.ajax(f.apply(null,arguments))},e.post=function(){var t=f.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=f.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,s=this,o=t.split(/\s/),a=f(t,n,i),l=a.success;return o.length>1&&(a.url=o[0],r=o[1]),a.success=function(t){s.html(r?e("<div>").html(t.replace(b,"")).find(r):t),l&&l.apply(s,arguments)},e.ajax(a),this};var k=encodeURIComponent;e.param=function(e,t){var n=[];return n.add=function(e,t){this.push(k(e)+"="+k(t))},p(n,e,t),n.join("&").replace(/%20/g,"+")}}(e),function(e){e.fn.serializeArray=function(){var t,n=[];return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){t=e(this);var i=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(e),function(e,t){function n(e){return i(e.replace(/([a-z])([A-Z])/,"$1-$2"))}function i(e){return e.toLowerCase()}function r(e){return s?s+e:i(e)}var s,o,a,l,u,c,d,h,f="",p={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},m=window.document,g=m.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,_={};e.each(p,function(e,n){return g.style[e+"TransitionProperty"]!==t?(f="-"+i(e)+"-",s=n,!1):t}),o=f+"transform",_[a=f+"transition-property"]=_[l=f+"transition-duration"]=_[u=f+"transition-timing-function"]=_[c=f+"animation-name"]=_[d=f+"animation-duration"]=_[h=f+"animation-timing-function"]="",e.fx={off:s===t&&g.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:f,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},e.fn.animate=function(t,n,i,r){return e.isPlainObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n=("number"==typeof n?n:e.fx.speeds[n]||e.fx.speeds._default)/1e3),this.anim(t,n,i,r)},e.fn.anim=function(i,r,s,f){var p,m,g,b={},y="",w=this,x=e.fx.transitionEnd;if(r===t&&(r=.4),e.fx.off&&(r=0),"string"==typeof i)b[c]=i,b[d]=r+"s",b[h]=s||"linear",x=e.fx.animationEnd;else{m=[];for(p in i)v.test(p)?y+=p+"("+i[p]+") ":(b[p]=i[p],m.push(n(p)));y&&(b[o]=y,m.push(o)),r>0&&"object"==typeof i&&(b[a]=m.join(", "),b[l]=r+"s",b[u]=s||"linear")}return g=function(n){if(n!==t){if(n.target!==n.currentTarget)return;e(n.target).unbind(x,g)}e(this).css(_),f&&f.call(this)},r>0&&this.bind(x,g),this.size()&&this.get(0).clientLeft,this.css(b),0>=r&&setTimeout(function(){w.each(function(){g.call(this)})},0),this},g=null}(e),function(e){function t(e){return"tagName"in e?e:e.parentNode}function n(e,t,n,i){var r=Math.abs(e-t),s=Math.abs(n-i);return r>=s?e-t>0?"Left":"Right":n-i>0?"Up":"Down"}function i(){u=null,c.last&&(c.el.trigger("longTap"),c={})}function r(){u&&clearTimeout(u),u=null}function s(){o&&clearTimeout(o),a&&clearTimeout(a),l&&clearTimeout(l),u&&clearTimeout(u),o=a=l=u=null,c={}}var o,a,l,u,c={},d=750;e(document).ready(function(){var h,f;e(document.body).bind("touchstart",function(n){h=Date.now(),f=h-(c.last||h),c.el=e(t(n.touches[0].target)),o&&clearTimeout(o),c.x1=n.touches[0].pageX,c.y1=n.touches[0].pageY,f>0&&250>=f&&(c.isDoubleTap=!0),c.last=h,u=setTimeout(i,d)}).bind("touchmove",function(e){r(),c.x2=e.touches[0].pageX,c.y2=e.touches[0].pageY}).bind("touchend",function(){r(),c.x2&&Math.abs(c.x1-c.x2)>30||c.y2&&Math.abs(c.y1-c.y2)>30?l=setTimeout(function(){c.el&&(c.el.trigger("swipe"),c.el.trigger("swipe"+n(c.x1,c.x2,c.y1,c.y2)),c={})},0):"last"in c&&(a=setTimeout(function(){if(c&&c.el&&e&&e.Event){var t=e.Event("tap");if(t)if(t.cancelTouch=s,c.el.trigger(t),c.isDoubleTap){if(!c)return;if(!c.el)return;c.el.trigger("doubleTap"),c={}}else o=setTimeout(function(){c&&c.el&&(o=null,c.el.trigger("singleTap"),c={})},250)}},0))}).bind("touchcancel",s),e(window).bind("scroll",s)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(e),function(e,t){function n(e){return i(e.replace(/([a-z])([A-Z])/,"$1-$2"))}function i(e){return e.toLowerCase()}function r(e){return s?s+e:i(e)}var s,o,a,l,u,c,d,h,f="",p={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},m=window.document,g=m.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,_={};e.each(p,function(e,n){return g.style[e+"TransitionProperty"]!==t?(f="-"+i(e)+"-",s=n,!1):t}),o=f+"transform",_[a=f+"transition-property"]=_[l=f+"transition-duration"]=_[u=f+"transition-timing-function"]=_[c=f+"animation-name"]=_[d=f+"animation-duration"]=_[h=f+"animation-timing-function"]="",e.fx={off:s===t&&g.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:f,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},e.fn.animate=function(t,n,i,r){return e.isPlainObject(n)&&(i=n.easing,r=n.complete,n=n.duration),n&&(n=("number"==typeof n?n:e.fx.speeds[n]||e.fx.speeds._default)/1e3),this.anim(t,n,i,r)},e.fn.anim=function(i,r,s,f){var p,m,g,b={},y="",w=this,x=e.fx.transitionEnd;if(r===t&&(r=.4),e.fx.off&&(r=0),"string"==typeof i)b[c]=i,b[d]=r+"s",b[h]=s||"linear",x=e.fx.animationEnd;else{m=[];for(p in i)v.test(p)?y+=p+"("+i[p]+") ":(b[p]=i[p],m.push(n(p)));y&&(b[o]=y,m.push(o)),r>0&&"object"==typeof i&&(b[a]=m.join(", "),b[l]=r+"s",b[u]=s||"linear")}return g=function(n){if(n!==t){if(n.target!==n.currentTarget)return;e(n.target).unbind(x,g)}e(this).css(_),f&&f.call(this)},r>0&&this.bind(x,g),this.size()&&this.get(0).clientLeft,this.css(b),0>=r&&setTimeout(function(){w.each(function(){g.call(this)})},0),this},g=null}(e),function(e){var t="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;if(!t)return!1;var n,i,r;window.addEventListener("touchstart",function(e){n=e.touches[0].clientX,i=e.touches[0].clientY},!0),window.addEventListener("touchmove",function(e){n=e.touches[0].clientX,i=e.touches[0].clientY},!0),window.addEventListener("touchend",function(){r=new Date},!0),e(window).on("tap doubleTap",function(e){e.defaultPrevented||(r=0)}),window.addEventListener("click",function(e){var t=2500,s=30;return t>=new Date-r&&s>=Math.abs(e.clientX-n)&&s>=Math.abs(e.clientY-i)?(e.stopPropagation(),e.preventDefault(),!1):void 0},!0)}(e),"function"==typeof define&&define.amd&&define("zepto",[],function(){return e})}(),function(e){function t(e,t){return function(n){return l(e.call(this,n),t)}}function n(e){return function(t){return this.lang().ordinal(e.call(this,t))}}function i(){}function r(e){o(this,e)}function s(e){var t=this._data={},n=e.years||e.year||e.y||0,i=e.months||e.month||e.M||0,r=e.weeks||e.week||e.w||0,s=e.days||e.day||e.d||0,o=e.hours||e.hour||e.h||0,l=e.minutes||e.minute||e.m||0,u=e.seconds||e.second||e.s||0,c=e.milliseconds||e.millisecond||e.ms||0;this._milliseconds=c+1e3*u+6e4*l+36e5*o,this._days=s+7*r,this._months=i+12*n,t.milliseconds=c%1e3,u+=a(c/1e3),t.seconds=u%60,l+=a(u/60),t.minutes=l%60,o+=a(l/60),t.hours=o%24,s+=a(o/24),s+=7*r,t.days=s%30,i+=a(s/30),t.months=i%12,n+=a(i/12),t.years=n}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function a(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var n=e+"";t>n.length;)n="0"+n;return n}function u(e,t,n){var i,r=t._milliseconds,s=t._days,o=t._months;r&&e._d.setTime(+e+r*n),s&&e.date(e.date()+s*n),o&&(i=e.date(),e.date(1).month(e.month()+o*n).date(Math.min(i,e.daysInMonth())))}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e,t){var n,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(n=0;i>n;n++)~~e[n]!==~~t[n]&&s++;return s+r}function h(e,t){return t.abbr=e,P[e]||(P[e]=new i),P[e].set(t),P[e]}function f(e){return e?(!P[e]&&B&&require("./lang/"+e),P[e]):C.fn._lang}function p(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function m(e){var t,n,i=e.match(R);for(t=0,n=i.length;n>t;t++)i[t]=rt[i[t]]?rt[i[t]]:p(i[t]);return function(r){var s="";for(t=0;n>t;t++)s+="function"==typeof i[t].call?i[t].call(r,e):i[t];return s}}function g(e,t){function n(t){return e.lang().longDateFormat(t)||t}for(var i=5;i--&&F.test(t);)t=t.replace(F,n);return tt[t]||(tt[t]=m(t)),tt[t](e)}function v(e){switch(e){case"DDDD":return U;case"YYYY":return H;case"YYYYY":return V;case"S":case"SS":case"SSS":case"DDD":return z;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return Y;case"X":return W;case"Z":case"ZZ":return J;case"T":return q;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return $;default:return RegExp(e.replace("\\",""))}}function _(e,t,n){var i,r=n._a;switch(e){case"M":case"MM":r[1]=null==t?0:~~t-1;break;case"MMM":case"MMMM":i=f(n._l).monthsParse(t),null!=i?r[1]=i:n._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=t&&(r[2]=~~t);
break;case"YY":r[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":r[0]=~~t;break;case"a":case"A":n._isPm="pm"===(t+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":r[3]=~~t;break;case"m":case"mm":r[4]=~~t;break;case"s":case"ss":r[5]=~~t;break;case"S":case"SS":case"SSS":r[6]=~~(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,i=(t+"").match(Z),i&&i[1]&&(n._tzh=~~i[1]),i&&i[2]&&(n._tzm=~~i[2]),i&&"+"===i[0]&&(n._tzh=-n._tzh,n._tzm=-n._tzm)}null==t&&(n._isValid=!1)}function b(e){var t,n,i=[];if(!e._d){for(t=0;7>t;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];i[3]+=e._tzh||0,i[4]+=e._tzm||0,n=new Date(0),e._useUTC?(n.setUTCFullYear(i[0],i[1],i[2]),n.setUTCHours(i[3],i[4],i[5],i[6])):(n.setFullYear(i[0],i[1],i[2]),n.setHours(i[3],i[4],i[5],i[6])),e._d=n}}function y(e){var t,n,i=e._f.match(R),r=e._i;for(e._a=[],t=0;i.length>t;t++)n=(v(i[t]).exec(r)||[])[0],n&&(r=r.slice(r.indexOf(n)+n.length)),rt[i[t]]&&_(i[t],n,e);e._isPm&&12>e._a[3]&&(e._a[3]+=12),e._isPm===!1&&12===e._a[3]&&(e._a[3]=0),b(e)}function w(e){for(var t,n,i,s,a=99;e._f.length;){if(t=o({},e),t._f=e._f.pop(),y(t),n=new r(t),n.isValid()){i=n;break}s=d(t._a,n.toArray()),a>s&&(a=s,i=n)}o(e,i)}function x(e){var t,n=e._i;if(X.exec(n)){for(e._f="YYYY-MM-DDT",t=0;4>t;t++)if(K[t][1].exec(n)){e._f+=K[t][0];break}J.exec(n)&&(e._f+=" Z"),y(e)}else e._d=new Date(n)}function T(t){var n=t._i,i=j.exec(n);n===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof n?x(t):c(n)?(t._a=n.slice(0),b(t)):t._d=n instanceof Date?new Date(+n):new Date(n)}function S(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function k(e,t,n){var i=I(Math.abs(e)/1e3),r=I(i/60),s=I(r/60),o=I(s/24),a=I(o/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===s&&["h"]||22>s&&["hh",s]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",I(o/30)]||1===a&&["y"]||["yy",a];return l[2]=t,l[3]=e>0,l[4]=n,S.apply({},l)}function E(e,t,n){var i=n-t,r=n-e.day();return r>i&&(r-=7),i-7>r&&(r+=7),Math.ceil(C(e).add("d",r).dayOfYear()/7)}function D(e){var t=e._i,n=e._f;return null===t||""===t?null:("string"==typeof t&&(e._i=t=f().preparse(t)),C.isMoment(t)?(e=o({},t),e._d=new Date(+t._d)):n?c(n)?w(e):y(e):T(e),new r(e))}function L(e,t){C.fn[e]=C.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function A(e){C.duration.fn[e]=function(){return this._data[e]}}function O(e,t){C.duration.fn["as"+e]=function(){return+this/t}}for(var C,N,M="2.0.0",I=Math.round,P={},B="undefined"!=typeof module&&module.exports,j=/^\/?Date\((\-?\d+)/i,R=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,$=/\d\d?/,z=/\d{1,3}/,U=/\d{3}/,H=/\d{1,4}/,V=/[+\-]?\d{1,6}/,Y=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,J=/Z|[\+\-]\d\d:?\d\d/i,q=/T/i,W=/[\+\-]?\d+(\.\d{1,3})?/,X=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,G="YYYY-MM-DDTHH:mm:ssZ",K=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Z=/([\+\-]|\d\d)/gi,Q="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),et={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},tt={},nt="DDD w W M D d".split(" "),it="M D H h m s w W".split(" "),rt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(e/60),2)+":"+l(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(10*e/6),4)},X:function(){return this.unix()}};nt.length;)N=nt.pop(),rt[N+"o"]=n(rt[N]);for(;it.length;)N=it.pop(),rt[N+N]=t(rt[N],2);for(rt.DDDD=t(rt.DDD,3),i.prototype={set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=C([2e3,t]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return E(e,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},C=function(e,t,n){return D({_i:e,_f:t,_l:n,_isUTC:!1})},C.utc=function(e,t,n){return D({_useUTC:!0,_isUTC:!0,_l:n,_i:e,_f:t})},C.unix=function(e){return C(1e3*e)},C.duration=function(e,t){var n,i=C.isDuration(e),r="number"==typeof e,o=i?e._data:r?{}:e;return r&&(t?o[t]=e:o.milliseconds=e),n=new s(o),i&&e.hasOwnProperty("_lang")&&(n._lang=e._lang),n},C.version=M,C.defaultFormat=G,C.lang=function(t,n){return t?(n?h(t,n):P[t]||f(t),C.duration.fn._lang=C.fn._lang=f(t),e):C.fn._lang._abbr},C.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),f(e)},C.isMoment=function(e){return e instanceof r},C.isDuration=function(e){return e instanceof s},C.fn=r.prototype={clone:function(){return C(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return C.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!d(this._a,(this._isUTC?C.utc(this._a):C(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){var t=g(this,e||C.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?C.duration(+t,e):C.duration(e,t),u(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?C.duration(+t,e):C.duration(e,t),u(this,n,-1),this},diff:function(e,t,n){var i,r,s=this._isUTC?C(e).utc():C(e).local(),o=6e4*(this.zone()-s.zone());return t&&(t=t.replace(/s$/,"")),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+s.daysInMonth()),r=12*(this.year()-s.year())+(this.month()-s.month()),r+=(this-C(this).startOf("month")-(s-C(s).startOf("month")))/i,"year"===t&&(r/=12)):(i=this-s-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?i/864e5:"week"===t?i/6048e5:i),n?r:a(r)},from:function(e,t){return C.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(C(),e)},calendar:function(){var e=this.diff(C().startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return this.zone()<C([this.year()]).zone()||this.zone()<C([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:this.add({d:e-t})},startOf:function(e){switch(e=e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.day(0),this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(t,n){return n=n!==e?n:"millisecond",+this.clone().startOf(n)>+C(t).startOf(n)},isBefore:function(t,n){return n=n!==e?n:"millisecond",+this.clone().startOf(n)<+C(t).startOf(n)},isSame:function(t,n){return n=n!==e?n:"millisecond",+this.clone().startOf(n)===+C(t).startOf(n)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return C.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var t=I((C(this).startOf("day")-C(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},isoWeek:function(e){var t=E(this,1,4);return null==e?t:this.add("d",7*(e-t))},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},lang:function(t){return t===e?this._lang:(this._lang=f(t),this)}},N=0;Q.length>N;N++)L(Q[N].toLowerCase().replace(/s$/,""),Q[N]);L("year","FullYear"),C.fn.days=C.fn.day,C.fn.weeks=C.fn.week,C.fn.isoWeeks=C.fn.isoWeek,C.duration.fn=s.prototype={weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(e){var t=+this,n=k(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},lang:C.fn.lang};for(N in et)et.hasOwnProperty(N)&&(O(N,et[N]),A(N.toLowerCase()));O("Weeks",6048e5),C.lang("en",{ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),B&&(module.exports=C),"function"==typeof define&&define.amd&&define("moment",[],function(){return C})}.call(this),function(){var e={months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),longDateFormat:{L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm U\\hr",LLLL:"dddd, D. MMMM YYYY HH:mm U\\hr"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:"einer Minute",mm:"%d Minuten",h:"einer Stunde",hh:"%d Stunden",d:"einem Tag",dd:"%d Tagen",M:"einem Monat",MM:"%d Monaten",y:"einem Jahr",yy:"%d Jahren"},ordinal:function(){return"."}};"function"==typeof require&&require(["moment"],function(t){t.lang("de",e)})}(),function(e,t){"use strict";function n(e){return new i(e)}function i(e){return e&&e._wrapped?e:(this._wrapped=e,t)}function r(e,t,n){t||(t=0);var i=e.length,r=i-t>=(n||30),s=r?{}:e;if(r)for(var o,a=t-1;i>++a;)o=e[a]+"",(en.call(s,o)?s[o]:s[o]=[]).push(e[a]);return function(e){if(r){var n=e+"";return en.call(s,n)&&$(s[n],e)>-1}return $(s,e,t)>-1}}function s(){for(var e,t,n,i=-1,r=arguments.length,s={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};r>++i;){e=arguments[i];for(t in e)n=null==(n=e[t])?"":n,/beforeLoop|inLoop/.test(t)?("string"==typeof n&&(n={array:n,object:n}),s.arrayBranch[t]=n.array,s.objectBranch[t]=n.object):s[t]=n}var a=s.args,l=/^[^,]+/.exec(a)[0];s.firstArg=l,s.hasDontEnumBug=At,s.isKeysFast=Ln,s.noArgsEnum=wn,s.shadowed=Xt,s.useHas=s.useHas!==!1,s.useStrict=s.useStrict!==!1,"noCharByIndex"in s||(s.noCharByIndex=Sn),s.exit||(s.exit="if (!"+l+") return result"),"collection"==l&&s.arrayBranch.inLoop||(s.arrayBranch=null);var u=Function("arrayLikeClasses, ArrayProto, bind, compareAscending, concat, forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, isPlainObject, iteratorBind, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","var callee = function("+a+") {\n"+Pn(s)+"\n};\n"+"return callee");return u(On,Nt,it,o,Qt,Xn,en,pt,$,g,Vn,v,c,d,gn,Mn,un,nn,rn,_n,sn)}function o(e,n){var i=e.index,r=n.index;return e=e.criteria,n=n.criteria,e===t?1:n===t?-1:n>e?-1:e>n?1:r>i?-1:1}function a(e,t){return Zt[t]}function l(e){return"\\"+In[e]}function u(e){return Nn[e]}function c(e,t){var n=!1;if(!e||"object"!=typeof e||!t&&g(e))return n;var i=e.constructor;return kn&&"function"!=typeof e.toString&&"string"==typeof(e+"")||v(i)&&!(i instanceof i)?n:Ot?(Xn(e,function(t,i){return n=!en.call(e,i),!1}),n===!1):(Xn(e,function(e,t){n=t}),n===!1||en.call(e,n))}function d(e,t){return function(n,i,r){return e.call(t,n,i,r)}}function h(){}function f(e,t){if(e&&Ft.test(t))return"<e%-"+t+"%>";var n=Zt.length;return Zt[n]="' +\n__e("+t+") +\n'",Kt+n}function p(e,t,n,i){if(i){var r=Zt.length;return Zt[r]="';\n"+i+";\n__p += '",Kt+r}return t?f(null,t):m(null,n)}function m(e,t){if(e&&Ft.test(t))return"<e%="+t+"%>";var n=Zt.length;return Zt[n]="' +\n((__t = ("+t+")) == null ? '' : __t) +\n'",Kt+n}function g(e){return sn.call(e)==cn}function v(e){return"function"==typeof e}function _(e,t,n,i,r){if(null==e)return e;n&&(t=!1),r||(r={value:null}),null==r.value&&(r.value=!!(Mt.clone||Pt.clone||Bt.clone));var s=Mn[typeof e];if((s||r.value)&&e.clone&&v(e.clone))return r.value=null,e.clone(t);if(s){var o=sn.call(e);if(!Cn[o]||xn&&g(e))return e;var a=o==dn;s=a||(o==gn?c(e,!0):s)}if(!s||!t)return s?a?rn.call(e):Wn({},e):e;var l=e.constructor;switch(o){case hn:return new l(1==e);case fn:return new l(+e);case mn:case _n:return new l(e);case vn:return l(e.source,Ht.exec(e))}i||(i=[]);for(var u=i.length;u--;)if(i[u].source==e)return i[u].value;u=e.length;var d=a?l(u):{};if(i.push({value:d,source:e}),a)for(var h=-1;u>++h;)d[h]=_(e[h],t,null,i,r);else Gn(e,function(e,n){d[n]=_(e,t,null,i,r)});return d}function b(e,t){return e?en.call(e,t):!1}function y(e){return e===!0||e===!1||sn.call(e)==hn}function w(e){return sn.call(e)==fn}function x(e){return e?1===e.nodeType:!1}function T(e,t,n,i){if(null==e||null==t)return e===t;if(i||(i={value:null}),null==i.value&&(i.value=!!(Mt.isEqual||Pt.isEqual||Bt.isEqual)),Mn[typeof e]||Mn[typeof t]||i.value){if(e._chain&&(e=e._wrapped),t._chain&&(t=t._wrapped),e.isEqual&&v(e.isEqual))return i.value=null,e.isEqual(t);if(t.isEqual&&v(t.isEqual))return i.value=null,t.isEqual(e)}if(e===t)return 0!==e||1/e==1/t;var r=sn.call(e);if(r!=sn.call(t))return!1;switch(r){case hn:case fn:return+e==+t;case mn:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case vn:case _n:return e==t+""}var s=On[r];if(xn&&!s&&(s=g(e))&&!g(t))return!1;if(!s&&(r!=gn||kn&&("function"!=typeof e.toString&&"string"==typeof(e+"")||"function"!=typeof t.toString&&"string"==typeof(t+""))))return!1;n||(n=[]);for(var o=n.length;o--;)if(n[o]==e)return!0;var a=-1,l=!0,u=0;if(n.push(e),s){if(u=e.length,l=u==t.length)for(;u--&&(l=T(e[u],t[u],n,i)););return l}var c=e.constructor,d=t.constructor;if(c!=d&&!(v(c)&&c instanceof c&&v(d)&&d instanceof d))return!1;for(var h in e)if(en.call(e,h)&&(u++,!en.call(t,h)||!T(e[h],t[h],n,i)))return!1;for(h in t)if(en.call(t,h)&&!u--)return!1;if(At)for(;7>++a;)if(h=Xt[a],en.call(e,h)&&(!en.call(t,h)||!T(e[h],t[h],n,i)))return!1;return!0}function S(e){return ln(e)&&sn.call(e)==mn}function k(e){return e?Mn[typeof e]:!1}function E(e){return sn.call(e)==mn&&e!=+e}function D(e){return null===e}function L(e){return sn.call(e)==mn}function A(e){return sn.call(e)==vn}function O(e){return sn.call(e)==_n}function C(e){return e===t}function N(e){var t={};if(!e)return t;for(var n,i=0,r=Qt.apply(Nt,arguments),s=r.length;s>++i;)n=r[i],n in e&&(t[n]=e[n]);return t}function M(e){if(!e)return 0;var t=sn.call(e),n=e.length;return On[t]||xn&&g(e)||t==gn&&n>-1&&n===n>>>0&&v(e.splice)?n:Qn(e).length}function I(e,t,n,i){if(!e)return n;var r=e.length,s=3>arguments.length;if(i&&(t=d(t,i)),r>-1&&r===r>>>0){var o=Sn&&sn.call(e)==_n?e.split(""):e;for(r&&s&&(n=o[--r]);r--;)n=t(n,o[r],r,e);return n}var a,l=Qn(e);for(r=l.length,r&&s&&(n=e[l[--r]]);r--;)a=l[r],n=t(n,e[a],a,e);return n}function P(e){if(!e)return[];if(e.toArray&&v(e.toArray))return e.toArray();var t=e.length;return t>-1&&t===t>>>0?(Tn?sn.call(e)==_n:"string"==typeof e)?e.split(""):rn.call(e):ti(e)}function B(e){var t=[];if(!e)return t;for(var n=-1,i=e.length;i>++n;)e[n]&&t.push(e[n]);return t}function j(e){var t=[];if(!e)return t;for(var n=-1,i=e.length,s=Qt.apply(t,arguments),o=r(s,i);i>++n;)o(e[n])||t.push(e[n]);return t}function R(e,n,i){return e?null==n||i?e[0]:rn.call(e,0,n):t}function F(e,t){var n=[];if(!e)return n;for(var i,r=-1,s=e.length;s>++r;)i=e[r],Vn(i)?tn.apply(n,t?i:F(i)):n.push(i);return n}function $(e,t,n){if(!e)return-1;var i=-1,r=e.length;if(n){if("number"!=typeof n)return i=G(e,t),e[i]===t?i:-1;i=(0>n?Math.max(0,r+n):n)-1}for(;r>++i;)if(e[i]===t)return i;return-1}function z(e,t,n){return e?rn.call(e,0,-(null==t||n?1:t)):[]}function U(e){var t=[];if(!e)return t;for(var n,i=-1,s=e.length,o=rn.call(arguments,1),a=[];s>++i;)n=e[i],0>$(t,n)&&ri(o,function(e,t){return(a[t]||(a[t]=r(e)))(n)})&&t.push(n);return t}function H(e,t,n){if(e){var i=e.length;return null==t||n?e[i-1]:rn.call(e,-t||i)}}function V(e,t,n){if(!e)return-1;var i=e.length;for(n&&"number"==typeof n&&(i=(0>n?Math.max(0,i+n):Math.min(n,i-1))+1);i--;)if(e[i]===t)return i;return-1}function Y(e,t,n){var i=-1/0,r=i;if(!e)return r;var s,o=-1,a=e.length;if(!t){for(;a>++o;)e[o]>r&&(r=e[o]);return r}for(n&&(t=d(t,n));a>++o;)s=t(e[o],o,e),s>i&&(i=s,r=e[o]);return r}function J(e,t,n){var i=1/0,r=i;if(!e)return r;var s,o=-1,a=e.length;if(!t){for(;a>++o;)r>e[o]&&(r=e[o]);return r}for(n&&(t=d(t,n));a>++o;)s=t(e[o],o,e),i>s&&(i=s,r=e[o]);return r}function q(e,t,n){e=+e||0,n=+n||1,null==t&&(t=e,e=0);for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n)),s=Array(r);r>++i;)s[i]=e,e+=n;return s}function W(e,t,n){return e?rn.call(e,null==t||n?1:t):[]}function X(e){if(!e)return[];for(var t,n=-1,i=e.length,r=Array(i);i>++n;)t=Math.floor(Math.random()*(n+1)),r[n]=r[t],r[t]=e[n];return r}function G(e,t,n,i){if(!e)return 0;var r,s=0,o=e.length;if(n)for(i&&(n=it(n,i)),t=n(t);o>s;)r=s+o>>>1,t>n(e[r])?s=r+1:o=r;else for(;o>s;)r=s+o>>>1,t>e[r]?s=r+1:o=r;return s}function K(){for(var e=-1,t=[],n=Qt.apply(t,arguments),i=n.length;i>++e;)0>$(t,n[e])&&t.push(n[e]);return t}function Z(e,t,n,i){var r=[];if(!e)return r;var s,o=-1,a=e.length,l=[];for("function"==typeof t&&(i=n,n=t,t=!1),n?i&&(n=d(n,i)):n=pt;a>++o;)s=n(e[o],o,e),(t?!o||l[l.length-1]!==s:0>$(l,s))&&(l.push(s),r.push(e[o]));return r}function Q(e){var t=[];if(!e)return t;for(var n=-1,i=e.length,s=r(arguments,1,20);i>++n;)s(e[n])||t.push(e[n]);return t}function et(e){if(!e)return[];for(var t=-1,n=Y(di(arguments,"length")),i=Array(n);n>++t;)i[t]=di(arguments,t);return i}function tt(e,t){if(!e)return{};var n=-1,i=e.length,r={};for(t||(t=[]);i>++n;)r[e[n]]=t[n];return r}function nt(e,n){return 1>e?n():function(){return 1>--e?n.apply(this,arguments):t}}function it(e,t){function n(){var o=arguments,a=t;if(r||(e=t[i]),s.length&&(o=o.length?s.concat(rn.call(o)):s),this instanceof n){h.prototype=e.prototype,a=new h;var l=e.apply(a,o);return l&&Mn[typeof l]?l:a}return e.apply(a,o)}var i,r=v(e);if(r){if(Dn||on&&arguments.length>2)return on.call.apply(on,arguments)}else i=t,t=e;var s=rn.call(arguments,2);return n}function rt(){var e=arguments;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function st(e,t,n){function i(){a=null,n||e.apply(o,r)}var r,s,o,a;return function(){var l=n&&!a;return r=arguments,o=this,bn(a),a=yn(i,t),l&&(s=e.apply(o,r)),s}}function ot(e,n){var i=rn.call(arguments,2);return yn(function(){return e.apply(t,i)},n)}function at(e){var n=rn.call(arguments,1);return yn(function(){return e.apply(t,n)},1)}function lt(e,t){var n={};return function(){var i=t?t.apply(this,arguments):arguments[0];return en.call(n,i)?n[i]:n[i]=e.apply(this,arguments)}}function ut(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}function ct(e){var t=rn.call(arguments,1),n=t.length;return function(){var i,r=arguments;return r.length&&(t.length=n,tn.apply(t,r)),i=1==t.length?e.call(this,t[0]):e.apply(this,t),t.length=n,i}}function dt(e,t){function n(){a=new Date,o=null,e.apply(s,i)}var i,r,s,o,a=0;return function(){var l=new Date,u=t-(l-a);return i=arguments,s=this,0>=u?(a=l,r=e.apply(s,i)):o||(o=yn(n,u)),r}}function ht(e,t){return function(){var n=[e];return arguments.length&&tn.apply(n,arguments),t.apply(this,n)}}function ft(e){return null==e?"":(e+"").replace(qt,u)}function pt(e){return e}function mt(e){ai(Kn(e),function(t){var r=n[t]=e[t];i.prototype[t]=function(){var e=[this._wrapped];arguments.length&&tn.apply(e,arguments);var t=r.apply(n,e);return this._chain&&(t=new i(t),t._chain=!0),t}})}function gt(){return e._=Rt,this}function vt(e,t){if(!e)return null;var n=e[t];return v(n)?e[t]():n}function _t(e,t,i){i||(i={}),e+="";var r,s,o=i.escape,u=i.evaluate,c=i.interpolate,d=n.templateSettings,h=i.variable||d.variable,g=h;null==o&&(o=d.escape),null==u&&(u=d.evaluate||!1),null==c&&(c=d.interpolate),o&&(e=e.replace(o,f)),c&&(e=e.replace(c,m)),u!=kt&&(kt=u,Lt=RegExp("<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>"+(u?"|"+u.source:""),"g")),r=Zt.length,e=e.replace(Lt,p),r=r!=Zt.length,e="__p += '"+e.replace(Wt,l).replace(Jt,a)+"';\n",Zt.length=0,g||(h=Et||"obj",r?e="with ("+h+") {\n"+e+"\n}\n":(h!=Et&&(Et=h,Dt=RegExp("(\\(\\s*)"+h+"\\."+h+"\\b","g")),e=e.replace(Vt,"$&"+h+".").replace(Dt,"$1__d"))),e=(r?e.replace($t,""):e).replace(zt,"$1").replace(Ut,"$1;"),e="function("+h+") {\n"+(g?"":h+" || ("+h+" = {});\n")+"var __t, __p = '', __e = _.escape"+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(g?"":", __d = "+h+"."+h+" || "+h)+";\n")+e+"return __p\n}",An&&(e+="\n//@ sourceURL=/lodash/template/source["+Gt++ +"]");try{s=Function("_","return "+e)(n)}catch(v){s=function(){throw v}}return t?s(t):(s.source=e,s)}function bt(e,t,n){var i=-1;if(n)for(;e>++i;)t.call(n,i);else for(;e>++i;)t(i)}function yt(e){var t=jt++;return e?e+t:t}function wt(e){return e=new i(e),e._chain=!0,e}function xt(e,t){return t(e),e}function Tt(){return this._chain=!0,this}function St(){return this._wrapped}var kt,Et,Dt,Lt,At,Ot,Ct="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(e=global),exports),Nt=Array.prototype,Mt=Boolean.prototype,It=Object.prototype,Pt=Number.prototype,Bt=String.prototype,jt=0,Rt=e._,Ft=/[-+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,$t=/\b__p \+= '';/g,zt=/\b(__p \+=) '' \+/g,Ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ht=/\w*$/,Vt=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,Yt=RegExp("^"+(It.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),Jt=/__token__(\d+)/g,qt=/[&<"']/g,Wt=/['\n\r\t\u2028\u2029\\]/g,Xt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Gt=0,Kt="__token__",Zt=[],Qt=Nt.concat,en=It.hasOwnProperty,tn=Nt.push,nn=It.propertyIsEnumerable,rn=Nt.slice,sn=It.toString,on=Yt.test(on=rn.bind)&&on,an=Yt.test(an=Array.isArray)&&an,ln=e.isFinite,un=Yt.test(un=Object.keys)&&un,cn="[object Arguments]",dn="[object Array]",hn="[object Boolean]",fn="[object Date]",pn="[object Function]",mn="[object Number]",gn="[object Object]",vn="[object RegExp]",_n="[object String]",bn=e.clearTimeout,yn=e.setTimeout,wn=!0;(function(){function e(){this.x=1}var t=[];e.prototype={valueOf:1,y:1};for(var n in new e)t.push(n);for(n in arguments)wn=!n;At=4>(t+"").length,Ot="x"!=t[0]})(1);var xn=!g(arguments),Tn="x"!=rn.call("x")[0],Sn="xx"!="x"[0]+Object("x")[0];try{var kn=sn.call(e.document||0)==gn}catch(En){}var Dn=on&&/\n|Opera/.test(on+sn.call(e.opera)),Ln=un&&/^.+$|true/.test(un+!!e.attachEvent);try{var An=(Function("//@cc_on !")(),!0)}catch(En){}var On={};On[hn]=On[fn]=On[pn]=On[mn]=On[gn]=On[vn]=!1,On[cn]=On[dn]=On[_n]=!0;var Cn={};Cn[cn]=Cn[pn]=!1,Cn[dn]=Cn[hn]=Cn[fn]=Cn[mn]=Cn[gn]=Cn[vn]=Cn[_n]=!0;var Nn={"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Mn={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1,unknown:!0},In={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};n.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var Pn=_t("<% if (useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length > -1 && length === length >>> 0) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectBranch.inLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {    <% if (hasDontEnumBug) { %>\n    <%   if (useHas) { %>if (hasOwnProperty.call(iteratee, index)) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>;\n    <%   if (useHas) { %>}<% } %>    <% } else { %>\n    if (!(skipProto && index == 'prototype')<% if (useHas) { %> &&\n        hasOwnProperty.call(iteratee, index)<% } %>) {\n      value = iteratee[index];\n      <%= objectBranch.inLoop %>\n    }    <% } %>\n  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch || noArgsEnum) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),Bn={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (callback(value, index, collection) === false) return result"},jn={init:"{}",top:"var prop;\nif (typeof callback != 'function') {\n  var valueProp = callback;\n  callback = function(value) { return value[valueProp] }\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)"},Rn={init:"true",inLoop:"if (!callback(value, index, collection)) return !result"},Fn={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"result[index] = value",bottom:"  }\n}"},$n={init:"[]",inLoop:"callback(value, index, collection) && result.push(value)"},zn={top:"if (thisArg) callback = iteratorBind(callback, thisArg)"},Un={inLoop:{object:Bn.inLoop}},Hn={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+(Ln?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(value, index, collection)",object:"result"+(Ln?"[ownIndex] = ":".push")+"(callback(value, index, collection))"}};xn&&(g=function(e){return!(!e||!en.call(e,"callee"))});var Vn=an||function(e){return sn.call(e)==dn};v(/x/)&&(v=function(e){return sn.call(e)==pn});var Yn=s({args:"object",init:"[]",inLoop:"result.push(index)"}),Jn=s(Fn,{inLoop:"if (result[index] == null) "+Fn.inLoop}),qn=s({useHas:!1,args:"object",init:"{}",top:"var props = concat.apply(ArrayProto, arguments)",inLoop:"if (indexOf(props, index) < 0) result[index] = value"}),Wn=s(Fn),Xn=s(Bn,zn,Un,{useHas:!1}),Gn=s(Bn,zn,Un),Kn=s({useHas:!1,args:"object",init:"[]",inLoop:"if (isFunction(value)) result.push(index)",bottom:"result.sort()"}),Zn=s({args:"value",init:"true",top:"var className = toString.call(value),\n    length = value.length;\nif (arrayLikeClasses[className]"+(xn?" || isArguments(value)":"")+" ||\n"+"  (className == objectClass && length > -1 && length === length >>> 0 &&\n"+"  isFunction(value.splice))"+") return !length",inLoop:{object:"return false"}}),Qn=un?function(e){var t=typeof e;return"function"==t&&nn.call(e,"prototype")?Yn(e):e&&Mn[t]?un(e):[]}:Yn,ei=s(Fn,{args:"object, source, indicator, stack",top:"var destValue, found, isArr, stackLength, recursive = indicator == isPlainObject;\nif (!recursive) stack = [];\nfor (var argsIndex = 1, argsLength = recursive ? 2 : arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"if (value && ((isArr = isArray(value)) || isPlainObject(value))) {\n  found = false; stackLength = stack.length;\n  while (stackLength--) {\n    if (found = stack[stackLength].source == value) break\n  }\n  if (found) {\n    result[index] = stack[stackLength].value\n  } else {\n    destValue = (destValue = result[index]) && isArr\n      ? (isArray(destValue) ? destValue : [])\n      : (isPlainObject(destValue) ? destValue : {});\n    stack.push({ value: destValue, source: value });\n    result[index] = callee(destValue, value, isPlainObject, stack)\n  }\n} else if (value != null) {\n  result[index] = value\n}"}),ti=s({args:"object",init:"[]",inLoop:"result.push(value)"}),ni=s({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(iteratee) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (value === target) return true"}),ii=s(Bn,jn),ri=s(Bn,Rn),si=s(Bn,$n),oi=s(Bn,zn,{init:"",inLoop:"if (callback(value, index, collection)) return value"}),ai=s(Bn,zn),li=s(Bn,jn,{inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)"}),ui=s(Hn,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)",object:"result"+(Ln?"[ownIndex] = ":".push")+"((isFunc ? methodName : value[methodName]).apply(value, args))"}}),ci=s(Bn,Hn),di=s(Hn,{args:"collection, property",inLoop:{array:"result[index] = value[property]",object:"result"+(Ln?"[ownIndex] = ":".push")+"(value[property])"}}),hi=s({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = iteratorBind(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = collection[++index]"},inLoop:{array:"result = callback(result, value, index, collection)",object:"result = noaccum\n  ? (noaccum = false, value)\n  : callback(result, value, index, collection)"}}),fi=s(Bn,$n,{inLoop:"!"+$n.inLoop}),pi=s(Bn,Rn,{init:"false",inLoop:Rn.inLoop.replace("!","")}),mi=s(Bn,jn,Hn,{inLoop:{array:"result[index] = {\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n}",object:"result"+(Ln?"[ownIndex] = ":".push")+"({\n"+"  criteria: callback(value, index, collection),\n"+"  index: index,\n"+"  value: value\n"+"})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"}),gi=s($n,{args:"collection, properties",top:"var pass, prop, propIndex, props = [];\nforIn(properties, function(value, prop) { props.push(prop) });\nvar propsLength = props.length",inLoop:"for (pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\n  prop = props[propIndex];\n  if (!(pass = value[prop] === properties[prop])) break\n}\nif (pass) result.push(value)"}),vi=s({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++) {\n    result[funcs[index]] = bind(result[funcs[index]], result)\n  }\n  return result\n}",inLoop:"if (isFunction(result[index])) {\n  result[index] = bind(result[index], result)\n}"});
n.VERSION="0.5.2",n.after=nt,n.bind=it,n.bindAll=vi,n.chain=wt,n.clone=_,n.compact=B,n.compose=rt,n.contains=ni,n.countBy=ii,n.debounce=st,n.defaults=Jn,n.defer=at,n.delay=ot,n.difference=j,n.drop=qn,n.escape=ft,n.every=ri,n.extend=Wn,n.filter=si,n.find=oi,n.first=R,n.flatten=F,n.forEach=ai,n.forIn=Xn,n.forOwn=Gn,n.functions=Kn,n.groupBy=li,n.has=b,n.identity=pt,n.indexOf=$,n.initial=z,n.intersection=U,n.invoke=ui,n.isArguments=g,n.isArray=Vn,n.isBoolean=y,n.isDate=w,n.isElement=x,n.isEmpty=Zn,n.isEqual=T,n.isFinite=S,n.isFunction=v,n.isNaN=E,n.isNull=D,n.isNumber=L,n.isObject=k,n.isRegExp=A,n.isString=O,n.isUndefined=C,n.keys=Qn,n.last=H,n.lastIndexOf=V,n.map=ci,n.max=Y,n.memoize=lt,n.merge=ei,n.min=J,n.mixin=mt,n.noConflict=gt,n.once=ut,n.partial=ct,n.pick=N,n.pluck=di,n.range=q,n.reduce=hi,n.reduceRight=I,n.reject=fi,n.rest=W,n.result=vt,n.shuffle=X,n.size=M,n.some=pi,n.sortBy=mi,n.sortedIndex=G,n.tap=xt,n.template=_t,n.throttle=dt,n.times=bt,n.toArray=P,n.union=K,n.uniq=Z,n.uniqueId=yt,n.values=ti,n.where=gi,n.without=Q,n.wrap=ht,n.zip=et,n.zipObject=tt,n.all=ri,n.any=pi,n.collect=ci,n.detect=oi,n.each=ai,n.foldl=hi,n.foldr=I,n.head=R,n.include=ni,n.inject=hi,n.methods=Kn,n.select=si,n.tail=W,n.take=R,n.unique=Z,n._iteratorTemplate=Pn,n._shimKeys=Yn,i.prototype=n.prototype,mt(n),i.prototype.chain=Tt,i.prototype.value=St,ai(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Nt[e];i.prototype[e]=function(){var e=this._wrapped;return t.apply(e,arguments),0===e.length&&delete e[0],this._chain&&(e=new i(e),e._chain=!0),e}}),ai(["concat","join","slice"],function(e){var t=Nt[e];i.prototype[e]=function(){var e=this._wrapped,n=t.apply(e,arguments);return this._chain&&(n=new i(n),n._chain=!0),n}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e._=n,define("lodash",[],function(){return n})):Ct?"object"==typeof module&&module&&module.exports==Ct?(module.exports=n)._=n:Ct._=n:e._=n}(this),define("backbone",["zepto","lodash"],function(e,t){var n,i=this,r=i.Backbone,s=[],o=s.push,a=s.slice,l=s.splice;n="undefined"!=typeof exports?exports:{},n.VERSION="1.0.0";var t=i._;t||"undefined"==typeof require||(t=require("underscore")),n.$=e,n.noConflict=function(){return i.Backbone=r,this},n.emulateHTTP=!1,n.emulateJSON=!1;var u=n.Events={on:function(e,t,n){if(!d(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,n,i){if(!d(this,"once",e,[n,i])||!n)return this;var r=this,s=t.once(function(){r.off(e,s),n.apply(this,arguments)});return s._callback=n,this.on(e,s,i)},off:function(e,n,i){var r,s,o,a,l,u,c,h;if(!this._events||!d(this,"off",e,[n,i]))return this;if(!e&&!n&&!i)return this._events={},this;for(a=e?[e]:t.keys(this._events),l=0,u=a.length;u>l;l++)if(e=a[l],o=this._events[e]){if(this._events[e]=r=[],n||i)for(c=0,h=o.length;h>c;c++)s=o[c],(n&&n!==s.callback&&n!==s.callback._callback||i&&i!==s.context)&&r.push(s);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&h(n,t),i&&h(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var r=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var s in i)i[s].off(t,n,this),r&&delete this._listeners[s];return this}},c=/\s+/,d=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(c.test(n)){for(var s=n.split(c),o=0,a=s.length;a>o;o++)e[t].apply(e,[s[o]].concat(i));return!1}return!0},h=function(e,t){var n,i=-1,r=e.length,s=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;r>++i;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;r>++i;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;r>++i;)(n=e[i]).callback.call(n.ctx,s,o);return;case 3:for(;r>++i;)(n=e[i]).callback.call(n.ctx,s,o,a);return;default:for(;r>++i;)(n=e[i]).callback.apply(n.ctx,t)}},f={listenTo:"on",listenToOnce:"once"};t.each(f,function(e,n){u[n]=function(n,i,r){var s=this._listeners||(this._listeners={}),o=n._listenerId||(n._listenerId=t.uniqueId("l"));return s[o]=n,"object"==typeof i&&(r=this),n[e](i,r,this),this}}),u.bind=u.on,u.unbind=u.off,t.extend(n,u);var p=n.Model=function(e,n){var i,r=e||{};n||(n={}),this.cid=t.uniqueId("c"),this.attributes={},t.extend(this,t.pick(n,m)),n.parse&&(r=this.parse(r,n)||{}),(i=t.result(this,"defaults"))&&(r=t.defaults({},r,i)),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)},m=["url","urlRoot","collection"];t.extend(p.prototype,u,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return t.clone(this.attributes)},sync:function(){return n.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return t.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,n,i){var r,s,o,a,l,u,c,d;if(null==e)return this;if("object"==typeof e?(s=e,i=n):(s={})[e]=n,i||(i={}),!this._validate(s,i))return!1;o=i.unset,l=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=t.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)n=s[r],t.isEqual(d[r],n)||a.push(r),t.isEqual(c[r],n)?delete this.changed[r]:this.changed[r]=n,o?delete d[r]:d[r]=n;if(!l){a.length&&(this._pending=!0);for(var h=0,f=a.length;f>h;h++)this.trigger("change:"+a[h],this,d[a[h]],i)}if(u)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,n){return this.set(e,void 0,t.extend({},n,{unset:!0}))},clear:function(e){var n={};for(var i in this.attributes)n[i]=void 0;return this.set(n,t.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!t.isEmpty(this.changed):t.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?t.clone(this.changed):!1;var n,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var s in e)t.isEqual(r[s],n=e[s])||((i||(i={}))[s]=n);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return t.clone(this._previousAttributes)},fetch:function(e){e=e?t.clone(e):{},void 0===e.parse&&(e.parse=!0);var n=this,i=e.success;return e.success=function(t){return n.set(n.parse(t,e),e)?(i&&i(n,t,e),n.trigger("sync",n,t,e),void 0):!1},R(this,e),this.sync("read",this,e)},save:function(e,n,i){var r,s,o,a=this.attributes;if(null==e||"object"==typeof e?(r=e,i=n):(r={})[e]=n,!(!r||i&&i.wait||this.set(r,i)))return!1;if(i=t.extend({validate:!0},i),!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=t.extend({},a,r)),void 0===i.parse&&(i.parse=!0);var l=this,u=i.success;return i.success=function(e){l.attributes=a;var n=l.parse(e,i);return i.wait&&(n=t.extend(r||{},n)),t.isObject(n)&&!l.set(n,i)?!1:(u&&u(l,e,i),l.trigger("sync",l,e,i),void 0)},R(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=r),o=this.sync(s,this,i),r&&i.wait&&(this.attributes=a),o},destroy:function(e){e=e?t.clone(e):{};var n=this,i=e.success,r=function(){n.trigger("destroy",n,n.collection,e)};if(e.success=function(t){(e.wait||n.isNew())&&r(),i&&i(n,t,e),n.isNew()||n.trigger("sync",n,t,e)},this.isNew())return e.success(),!1;R(this,e);var s=this.sync("delete",this,e);return e.wait||r(),s},url:function(){var e=t.result(this,"urlRoot")||t.result(this.collection,"url")||j();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},t.extend(e||{},{validate:!0}))},_validate:function(e,n){if(!n.validate||!this.validate)return!0;e=t.extend({},this.attributes,e);var i=this.validationError=this.validate(e,n)||null;return i?(this.trigger("invalid",this,i,t.extend(n||{},{validationError:i})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];t.each(g,function(e){p.prototype[e]=function(){var n=a.call(arguments);return n.unshift(this.attributes),t[e].apply(t,n)}});var v=n.Collection=function(e,n){n||(n={}),n.url&&(this.url=n.url),n.model&&(this.model=n.model),void 0!==n.comparator&&(this.comparator=n.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,t.extend({silent:!0},n))},_={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};t.extend(v.prototype,u,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return n.sync.apply(this,arguments)},add:function(e,n){return this.set(e,t.defaults(n||{},b))},remove:function(e,n){e=t.isArray(e)?e.slice():[e],n||(n={});var i,r,s,o;for(i=0,r=e.length;r>i;i++)o=this.get(e[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,n.silent||(n.index=s,o.trigger("remove",o,this,n)),this._removeReference(o));return this},set:function(e,n){n=t.defaults(n||{},_),n.parse&&(e=this.parse(e,n)),t.isArray(e)||(e=e?[e]:[]);var i,r,s,a,u,c=n.at,d=this.comparator&&null==c&&n.sort!==!1,h=t.isString(this.comparator)?this.comparator:null,f=[],p=[],m={};for(i=0,r=e.length;r>i;i++)(s=this._prepareModel(e[i],n))&&((a=this.get(s))?(n.remove&&(m[a.cid]=!0),n.merge&&(a.set(s.attributes,n),d&&!u&&a.hasChanged(h)&&(u=!0))):n.add&&(f.push(s),s.on("all",this._onModelEvent,this),this._byId[s.cid]=s,null!=s.id&&(this._byId[s.id]=s)));if(n.remove){for(i=0,r=this.length;r>i;++i)m[(s=this.models[i]).cid]||p.push(s);p.length&&this.remove(p,n)}if(f.length&&(d&&(u=!0),this.length+=f.length,null!=c?l.apply(this.models,[c,0].concat(f)):o.apply(this.models,f)),u&&this.sort({silent:!0}),n.silent)return this;for(i=0,r=f.length;r>i;i++)(s=f[i]).trigger("add",s,this,n);return u&&this.trigger("sort",this,n),this},reset:function(e,n){n||(n={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i]);return n.previousModels=this.models,this._reset(),this.add(e,t.extend({silent:!0},n)),n.silent||this.trigger("reset",this,n),this},push:function(e,n){return e=this._prepareModel(e,n),this.add(e,t.extend({at:this.length},n)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,n){return e=this._prepareModel(e,n),this.add(e,t.extend({at:0},n)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,n){return t.isEmpty(e)?n?void 0:[]:this[n?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return e||(e={}),t.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(t.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,n,i){n||(n=this.comparator);var r=t.isFunction(n)?n:function(e){return e.get(n)};return t.sortedIndex(this.models,e,r,i)},pluck:function(e){return t.invoke(this.models,"get",e)},fetch:function(e){e=e?t.clone(e):{},void 0===e.parse&&(e.parse=!0);var n=e.success,i=this;return e.success=function(t){var r=e.reset?"reset":"set";i[r](t,e),n&&n(i,t,e),i.trigger("sync",i,t,e)},R(this,e),this.sync("read",this,e)},create:function(e,n){if(n=n?t.clone(n):{},!(e=this._prepareModel(e,n)))return!1;n.wait||this.add(e,n);var i=this,r=n.success;return n.success=function(t){n.wait&&i.add(e,n),r&&r(e,t,n)},e.save(null,n),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];t.each(y,function(e){v.prototype[e]=function(){var n=a.call(arguments);return n.unshift(this.models),t[e].apply(t,n)}});var w=["groupBy","countBy","sortBy"];t.each(w,function(e){v.prototype[e]=function(n,i){var r=t.isFunction(n)?n:function(e){return e.get(n)};return t[e](this.models,r,i)}});var x=n.View=function(e){this.cid=t.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];t.extend(x.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof n.$?e:n.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=t.result(this,"events")))return this;this.undelegateEvents();for(var n in e){var i=e[n];if(t.isFunction(i)||(i=this[e[n]]),i){var r=n.match(T),s=r[1],o=r[2];i=t.bind(i,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,i):this.$el.on(s,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=t.extend({},t.result(this,"options"),e)),t.extend(this,t.pick(e,S)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(t.result(this,"el"),!1);else{var e=t.extend({},t.result(this,"attributes"));this.id&&(e.id=t.result(this,"id")),this.className&&(e["class"]=t.result(this,"className"));var i=n.$("<"+t.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),n.sync=function(e,i,r){var s=k[e];t.defaults(r||(r={}),{emulateHTTP:n.emulateHTTP,emulateJSON:n.emulateJSON});var o={type:s,dataType:"json"};if(r.url||(o.url=t.result(i,"url")||j()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){o.type="POST",r.emulateJSON&&(o.data._method=s);var a=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),a?a.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=n.ajax(t.extend(o,r));return i.trigger("request",i,l,r),l};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};n.ajax=function(){return n.$.ajax.apply(n.$,arguments)};var E=n.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;t.extend(E.prototype,u,{initialize:function(){},route:function(e,i,r){t.isRegExp(e)||(e=this._routeToRegExp(e)),t.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var s=this;return n.history.route(e,function(t){var o=s._extractParameters(e,t);r&&r.apply(s,o),s.trigger.apply(s,["route:"+i].concat(o)),s.trigger("route",i,o),n.history.trigger("route",s,i,o)}),this},navigate:function(e,t){return n.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes){this.routes=t.result(this,"routes");for(var e,n=t.keys(this.routes);null!=(e=n.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(D,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/]+)"}).replace(A,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,n){var i=e.exec(n).slice(1);return t.map(i,function(e){return e?decodeURIComponent(e):null})}});var C=n.History=function(){this.handlers=[],t.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,I=/msie [\w.]+/,P=/\/$/;C.started=!1,t.extend(C.prototype,u,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(N,"")},start:function(e){if(C.started)throw Error("Backbone.history has already been started");C.started=!0,this.options=t.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),r=document.documentMode,s=I.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(M,"/"),s&&this._wantsHashChange&&(this.iframe=n.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?n.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?n.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var o=this.location,a=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&o.hash&&(this.fragment=this.getHash().replace(N,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){n.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),C.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var n=this.fragment=this.getFragment(e),i=t.any(this.handlers,function(e){return e.route.test(n)?(e.callback(n),!0):void 0});return i},navigate:function(e,t){if(!C.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),n.history=new C;var B=function(e,n){var i,r=this;i=e&&t.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},t.extend(i,r,n);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&t.extend(i.prototype,e),i.__super__=r.prototype,i};p.extend=v.extend=E.extend=x.extend=C.extend=B;var j=function(){throw Error('A "url" property or function must be specified')},R=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return n}),define("common",["require","zepto","lodash","backbone","moment"],function(e){"use strict";var t,n,i,r,s=e("zepto"),o=e("lodash"),a=e("backbone"),l=e("moment"),u={},c="aog-",d=3;return s(document).ready(function(){t=s("html,body"),n=s(document),i=s("#notification"),i.on(__app_config__.defaultClickEvent,function(){i.hide().html("")})}),u=o.extend(u,{PAGED_EDIT_LOCK:!1,dateFormats:{de:{DATE_FORMAT:"YYYY-MM-DD",DATE_FORMAT_OUT:"DD.MM.YYYY HH:mm"},en:{DATE_FORMAT:"YYYY-MM-DD",DATE_FORMAT_OUT:"MM/DD/YYYY h:mm A"}},TodoFilter:"",showDefaultLoader:function(){return u.closeNotify(),s("#app-loader").show(),this},hideDefaultLoader:function(){return s("#app-loader").hide(),this},showLoader:function(){return this.showDefaultLoader(),this},hideLoader:function(){return this.hideDefaultLoader(),this},lockScreen:function(){u.PAGED_EDIT_LOCK=!0},unlockScreen:function(){u.PAGED_EDIT_LOCK=!1},isScreenLocked:function(){return u.PAGED_EDIT_LOCK},hideSplashscreen:function(){navigator&&navigator.splashscreen&&navigator.splashscreen.hide()},notify:function(e,t,n){return o.isFunction(n)||(n=function(){}),i?(r&&clearTimeout(r),u.closeNotify(),i.html("<p>"+e+"</p>").show(),r=setTimeout(function(){u.closeNotify()},t||7e3),void 0):!1},closeNotify:function(){return i?(i.hide().html(""),void 0):!1},dialog:function(e,t,n){if(o.isFunction(t)||(t=function(){}),n)if(__app_config__.touch&&navigator.notification){var i=function(e){t(1===e)};navigator.notification.confirm(e,i,__("Confirm"),[__("yes"),__("no")])}else{var r=window.confirm(e);o.isFunction(t)&&t(r)}else __app_config__.touch&&navigator.notification?navigator.notification.alert(e,t,"Info",__("close")):window.alert(e)},hasDate:function(e){return"object"!=typeof e?!1:void 0===e||void 0===e.created_at||void 0===e.updated_at||"string"!=typeof e.created_at&&"string"!=typeof e.updated_at?!1:!0},parseDate:function(e,t){try{return l(e).format(u.dateFormats[t].DATE_FORMAT_OUT)}catch(n){return""}},fromNow:function(e,t,n){try{e=parseInt(e,10);var i=new Date(e);return l.lang(n),l(i).fromNow(t)}catch(r){return""}},now:function(e){try{return l().format(u.dateFormats[e].DATE_FORMAT)}catch(t){return""}},diffInDaysFromNowTo:function(e,t){return l().format(u.dateFormats[t].DATE_FORMAT).diff(l(e,u.dateFormats[t].DATE_FORMAT),"days")},getUser:function(e,t){return o.isObject(e)?e.updated_by&&e.created_by?t?e.updated_by.display_name:e.created_by.display_name:__("unknown"):__("unknown")},getDateParser:function(e){switch(e){case"en":return{parse:function(e){var t;if(t=e.match(/^(\d{2,2})\/(\d{2,2})\/(\d{4,4}) (\d{1,2}):(\d{2,2}) (AM|PM)$/)){var n=t[6].toLowerCase(),i=parseInt(t[4],10),r=parseInt(t[5],10);return"pm"===n&&(i+=12),new Date(t[3],t[1]-1,t[2],i,r)}return null},format:function(e){var t="AM",n=""+(e.getMonth()+1),i=""+e.getDate(),r=e.getHours(),s=""+e.getMinutes();return 1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),r>=12&&(t="PM",r-=12),r=""+r,1===r.length&&(r="0"+r),1===s.length&&(s="0"+s),n+"/"+i+"/"+e.getFullYear()+" "+r+":"+s+" "+t}};case"de":return{parse:function(e){var t;if(t=e.match(/^(\d{2,2})\.(\d{2,2})\.(\d{4,4}) (\d{2,2}):(\d{2,2})$/)){var n=parseInt(t[4],10),i=parseInt(t[5],10);return new Date(t[3],t[2]-1,t[1],n,i)}return null},format:function(e){var t=""+(e.getMonth()+1),n=""+e.getDate(),i=""+e.getHours(),r=""+e.getMinutes();return 1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),1===r.length&&(r="0"+r),n+"."+t+"."+e.getFullYear()+" "+i+":"+r}}}},getUserActiveDays:function(e,t){var n=l(e.active_since).add("days",d),i=u.fromNow(n.toDate().getTime(),!0,t);return i},scrollTop:function(){var e=s("#app-main .content")[0];return e?(e.scrollTop=0,this):!1},scrollBottom:function(){if(!n)return!1;var e=s("#app-main .content")[0];return e?(e.scrollTop=n.height(),this):!1},isValidMail:function(e){return"string"!=typeof e?!1:/^[a-zA-Z0-9._\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,4}$/.test(e)},generateNameFromEmail:function(e){if(!u.isValidMail(e))return"---";var t=e.split("@")[0];return t},store:{set:function(e,t){if(!o.isString(t))throw"must provide a string";return localStorage.setItem(c+e,t)},get:function(e){if(!e)return null;var t=localStorage.getItem(c+e);return t?t:null},drop:function(e){return localStorage.removeItem(c+e)}},notifyIOUpdate:function(e){if(__app_config__.isPaused||!e)return!1;var t=500;if(!__app_config__.touch||!navigator.notification)return u.notify(__("ioUpdate"));u.vibrate(t,e);try{}catch(n){}},vibrate:function(e,t){if(!navigator.notification||!navigator.notification.vibrate)return!1;if("object"!=typeof t)return!1;if(t.vibrate!==!0)return!1;try{navigator.notification.vibrate(e)}catch(n){}},random:function(e){var t,n,i=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=r.length;for(t=0;e>t;t++)n=Math.floor(Math.random()*s),i.push(r.charAt(n));return i.join("")},escape:function(e){return e.replace(/&/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},base64Encode:function(e){if(!window.btoa)throw"Native Base64 encoding not supported in this browser";if(!o.isString(e))throw"Base64 encoding - no string: "+e;var t=window.btoa(unescape(encodeURIComponent(e)));return t}},a.Events)}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd&&define("i18next",[],t)}(this,function(){function e(e,t){if(!t||"function"==typeof t)return e;for(var n in t)e[n]=t[n];return e}function t(e,t,n){var i,r=0,s=e.length,o=void 0===s||"function"==typeof e;if(n)if(o){for(i in e)if(t.apply(e[i],n)===!1)break}else for(;s>r&&t.apply(e[r++],n)!==!1;);else if(o){for(i in e)if(t.call(e[i],i,e[i])===!1)break}else for(;s>r&&t.call(e[r],r,e[r++])!==!1;);return e}function n(e){var t=function(e){if(window.XMLHttpRequest)return e(null,new XMLHttpRequest);if(window.ActiveXObject)try{return e(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(t){return e(null,new ActiveXObject("Microsoft.XMLHTTP"))}return e(Error())},n=function(e){if("string"==typeof e)return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},i=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;e.length>n;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(192|i>>6),t+=String.fromCharCode(128|63&i)):(t+=String.fromCharCode(224|i>>12),t+=String.fromCharCode(128|63&i>>6),t+=String.fromCharCode(128|63&i))}return t},r=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=i(e);var n,r,s,o,a,l,u,c="",d=0;do n=e.charCodeAt(d++),r=e.charCodeAt(d++),s=e.charCodeAt(d++),o=n>>2,a=(3&n)<<4|r>>4,l=(15&r)<<2|s>>6,u=63&s,isNaN(r)?l=u=64:isNaN(s)&&(u=64),c+=t.charAt(o)+t.charAt(a)+t.charAt(l)+t.charAt(u),n=r=s="",o=a=l=u="";while(e.length>d);return c},s=function(){for(var e=arguments[0],t=1;arguments.length>t;t++){var n=arguments[t];for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},o=function(e,i,r,a){"function"==typeof r&&(a=r,r={}),r.cache=r.cache||!1,r.data=r.data||{},r.headers=r.headers||{},r.jsonp=r.jsonp||!1,r.async=void 0===r.async?!0:r.async;var l,u=s({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},o.headers,r.headers);if(l="application/json"===u["content-type"]?JSON.stringify(r.data):n(r.data),"GET"===e){var c=[];if(l&&(c.push(l),l=null),r.cache||c.push("_="+(new Date).getTime()),r.jsonp&&(c.push("callback="+r.jsonp),c.push("jsonp="+r.jsonp)),c=c.join("&"),c.length>1&&(i+=i.indexOf("?")>-1?"&"+c:"?"+c),r.jsonp){var d=document.getElementsByTagName("head")[0],h=document.createElement("script");return h.type="text/javascript",h.src=i,d.appendChild(h),void 0}}t(function(t,n){if(t)return a(t);n.open(e,i,r.async);for(var s in u)u.hasOwnProperty(s)&&n.setRequestHeader(s,u[s]);n.onreadystatechange=function(){if(4===n.readyState){var e=n.responseText||"";if(!a)return;a(n.status,{text:function(){return e},json:function(){return JSON.parse(e)}})}},n.send(l)})},a={authBasic:function(e,t){o.headers.Authorization="Basic "+r(e+":"+t)},connect:function(e,t,n){return o("CONNECT",e,t,n)},del:function(e,t,n){return o("DELETE",e,t,n)},get:function(e,t,n){return o("GET",e,t,n)},head:function(e,t,n){return o("HEAD",e,t,n)},headers:function(e){o.headers=e||{}},isAllowed:function(e,t,n){this.options(e,function(e,i){n(-1!==i.text().indexOf(t))})},options:function(e,t,n){return o("OPTIONS",e,t,n)},patch:function(e,t,n){return o("PATCH",e,t,n)},post:function(e,t,n){return o("POST",e,t,n)},put:function(e,t,n){return o("PUT",e,t,n)},trace:function(e,t,n){return o("TRACE",e,t,n)}},l=e.type?e.type.toLowerCase():"get";a[l](e.url,e,function(t,n){200===t?e.success(n.json(),t,null):e.error(n.text(),t,null)})}function i(e,t){"function"==typeof e&&(t=e,e={}),e=e||{},A.extend(E,e),"string"==typeof E.ns&&(E.ns={namespaces:[E.ns],defaultNs:E.ns}),E.interpolationPrefixEscaped=A.regexEscape(E.interpolationPrefix),E.interpolationSuffixEscaped=A.regexEscape(E.interpolationSuffix),E.lng||(E.lng=A.detectLanguage()),E.lng?E.useCookie&&A.cookie.create(E.cookieName,E.lng,E.cookieExpirationTime):(E.lng=E.fallbackLng,E.useCookie&&A.cookie.remove(E.cookieName)),S=A.toLanguages(E.lng),b=S[0],A.log("currentLng set to: "+b),C.setCurrentLng(b),y&&E.setJqueryExt&&d();var n;if(y&&y.Deferred&&(n=y.Deferred()),!E.resStore){var i=A.toLanguages(E.lng);"string"==typeof E.preload&&(E.preload=[E.preload]);for(var r=0,s=E.preload.length;s>r;r++)for(var o=A.toLanguages(E.preload[r]),a=0,l=o.length;l>a;a++)0>i.indexOf(o[a])&&i.push(o[a]);return w.sync.load(i,E,function(e,i){x=i,t&&t(g),n&&n.resolve()}),n?n.promise():void 0}return x=E.resStore,t&&t(g),n&&n.resolve(),n?n.promise():void 0}function r(e,t){"string"==typeof e&&(e=[e]);for(var n=0,r=e.length;r>n;n++)0>E.preload.indexOf(e[n])&&E.preload.push(e[n]);return i(t)}function s(e,t,n){"string"!=typeof t&&(n=t,t=E.ns.defaultNs),x[e]=x[e]||{},x[e][t]=x[e][t]||{},A.extend(x[e][t],n)}function o(e){E.ns.defaultNs=e}function a(e,t){l([e],t)}function l(e,t){var n={dynamicLoad:E.dynamicLoad,resGetPath:E.resGetPath,getAsync:E.getAsync,ns:{namespaces:e,defaultNs:""}},i=A.toLanguages(E.lng);"string"==typeof E.preload&&(E.preload=[E.preload]);for(var r=0,s=E.preload.length;s>r;r++)for(var o=A.toLanguages(E.preload[r]),a=0,l=o.length;l>a;a++)0>i.indexOf(o[a])&&i.push(o[a]);for(var u=[],c=0,d=i.length;d>c;c++){var h=!1,f=x[i[c]];if(f)for(var p=0,m=e.length;m>p;p++)f[e[p]]||(h=!0);else h=!0;h&&u.push(i[c])}u.length?w.sync._fetch(u,n,function(n,i){var r=e.length*u.length;A.each(e,function(e,n){A.each(u,function(e,s){x[s]=x[s]||{},x[s][n]=i[s][n],r--,0===r&&t&&(E.useLocalStorage&&w.sync._storeLocal(x),t())})})}):t&&t()}function u(e,t){return i({lng:e},t)}function c(){return b}function d(){function e(e,t,n){if(0!==t.length){var i="text";if(0===t.indexOf("[")){var r=t.split("]");t=r[1],i=r[0].substr(1,r[0].length-1)}t.indexOf(";")===t.length-1&&(t=t.substr(0,t.length-2));var s;"html"===i?(s=E.defaultValueFromContent?y.extend({defaultValue:e.html()},n):n,e.html(y.t(t,s))):"text"===i?(s=E.defaultValueFromContent?y.extend({defaultValue:e.text()},n):n,e.text(y.t(t,s))):(s=E.defaultValueFromContent?y.extend({defaultValue:e.attr(i)},n):n,e.attr(i,y.t(t,s)))}}function t(t,n){var i=t.attr(E.selectorAttr);if(i){var r=t,s=t.data("i18n-target");if(s&&(r=t.find(s)||t),n||E.useDataAttrOptions!==!0||(n=t.data("i18n-options")),n=n||{},i.indexOf(";")<=i.length-1){var o=i.split(";");
y.each(o,function(t,i){e(r,i,n)})}else e(r,k,n);E.useDataAttrOptions===!0&&t.data("i18n-options",n)}}y.t=y.t||g,y.fn.i18n=function(e){return this.each(function(){t(y(this),e);var n=y(this).find("["+E.selectorAttr+"]");n.each(function(){t(y(this),e)})})}}function h(e,t,n,i){if(i=i||t,0>e.indexOf(i.interpolationPrefix||E.interpolationPrefix))return e;var r=i.interpolationPrefix?A.regexEscape(i.interpolationPrefix):E.interpolationPrefixEscaped,s=i.interpolationSuffix?A.regexEscape(i.interpolationSuffix):E.interpolationSuffixEscaped;return A.each(t,function(t,o){e="object"==typeof o&&null!==o?h(e,o,n?n+E.keyseparator+t:t,i):e.replace(RegExp([r,n?n+E.keyseparator+t:t,s].join(""),"g"),o)}),e}function f(e,t){var n=",",i="{",r="}",s=A.extend({},t);for(delete s.postProcess;-1!=e.indexOf(E.reusePrefix)&&(T++,!(T>E.maxRecursion));){var o=e.indexOf(E.reusePrefix),a=e.indexOf(E.reuseSuffix,o)+E.reuseSuffix.length,l=e.substring(o,a),u=l.replace(E.reusePrefix,"").replace(E.reuseSuffix,"");if(-1!=u.indexOf(n)){var c=u.indexOf(n);if(-1!=u.indexOf(i,c)&&-1!=u.indexOf(r,c)){var d=u.indexOf(i,c),h=u.indexOf(r,d)+r.length;try{s=A.extend(s,JSON.parse(u.substring(d,h))),u=u.substring(0,c)}catch(f){}}}var p=v(u,s);e=e.replace(l,p)}return e}function p(e){return e.context&&"string"==typeof e.context}function m(e){return void 0!==e.count&&"string"!=typeof e.count&&1!==e.count}function g(e,t){return T=0,v(e,t)}function v(e,t){if(t=t||{},!x)return r;var n,i,r=t.defaultValue||e,s=S;if(t.lng&&(s=A.toLanguages(t.lng),!x[s[0]])){var o=E.getAsync;E.getAsync=!1,w.sync.load(s,E,function(e,t){A.extend(x,t),E.getAsync=o})}var a=t.ns||E.ns.defaultNs;if(e.indexOf(E.nsseparator)>-1){var l=e.split(E.nsseparator);a=l[0],e=l[1]}if(p(t)){n=A.extend({},t),delete n.context,n.defaultValue=E.contextNotFound;var u=a+E.nsseparator+e+"_"+t.context;if(i=g(u,n),i!=E.contextNotFound)return h(i,{context:t.context})}if(m(t)){n=A.extend({},t),delete n.count,n.defaultValue=E.pluralNotFound;var c=a+E.nsseparator+e+E.pluralSuffix,d=C.get(b,t.count);if(d>=0?c=c+"_"+d:1===d&&(c=a+E.nsseparator+e),i=g(c,n),i!=E.pluralNotFound)return h(i,{count:t.count})}for(var _,y=e.split(E.keyseparator),T=0,k=s.length;k>T&&!_;T++){for(var D=s[T],L=0,M=x[D]&&x[D][a];y[L];)M=M&&M[y[L]],L++;if(void 0!==M){if("string"==typeof M)M=h(M,t),M=f(M,t);else if("[object Array]"!==Object.prototype.toString.apply(M)||E.returnObjectTrees||t.returnObjectTrees)if(E.returnObjectTrees||t.returnObjectTrees){var I={};for(var P in M)I[P]=v(a+E.nsseparator+e+E.keyseparator+P,t);M=I}else M="key '"+a+":"+e+" ("+D+")' "+"returned a object instead of string.",A.log(M);else M=M.join("\n"),M=h(M,t),M=f(M,t);_=M}}void 0===_&&E.fallbackToDefaultNS&&(_=v(e,t)),void 0===_&&E.sendMissing&&(t.lng?O.postMissing(s[0],a,e,r,s):O.postMissing(E.lng,a,e,r,s));var B=t.postProcess||E.postProcess;return void 0!==_&&B&&N[B]&&(_=N[B](_,e,t)),void 0===_&&(r=h(r,t),r=f(r,t)),void 0!==_?_:r}function _(){var e,t=[];if("undefined"!=typeof window&&(function(){for(var e=window.location.search.substring(1),n=e.split("&"),i=0;n.length>i;i++){var r=n[i].indexOf("=");if(r>0){var s=n[i].substring(0,r),o=n[i].substring(r+1);t[s]=o}}}(),t[E.detectLngQS]&&(e=t[E.detectLngQS])),!e&&"undefined"!=typeof document&&E.useCookie){var n=A.cookie.read(E.cookieName);n&&(e=n)}return e||"undefined"==typeof navigator||(e=navigator.language?navigator.language:navigator.userLanguage),e}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&1/0!=i&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);n>r;r++)if(r in t&&t[r]===e)return r;return-1});var b,y=void 0,w={},x={},T=0,S=[],E={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:"dev",detectLngQS:"setLng",ns:"translation",fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",postProcess:void 0},D={create:function(e,t,n){var i;if(n){var r=new Date;r.setTime(r.getTime()+1e3*60*n),i="; expires="+r.toGMTString()}else i="";document.cookie=e+"="+t+i+"; path=/"},read:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;n.length>i;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},remove:function(e){this.create(e,"",-1)}},L={create:function(){},read:function(){return null},remove:function(){}},A={extend:y?y.extend:e,each:y?y.each:t,ajax:y?y.ajax:n,cookie:"undefined"!=typeof document?D:L,detectLanguage:_,log:function(e){E.debug&&"undefined"!=typeof console&&console.log(e)},toLanguages:function(e){var t=[];if("string"==typeof e&&e.indexOf("-")>-1){var n=e.split("-");e=E.lowerCaseLng?n[0].toLowerCase()+"-"+n[1].toLowerCase():n[0].toLowerCase()+"-"+n[1].toUpperCase(),"unspecific"!==E.load&&t.push(e),"current"!==E.load&&t.push(n[0])}else t.push(e);return-1===t.indexOf(E.fallbackLng)&&E.fallbackLng&&t.push(E.fallbackLng),t},regexEscape:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},O={load:function(e,t,n){t.useLocalStorage?O._loadLocal(e,t,function(i,r){for(var s=[],o=0,a=e.length;a>o;o++)r[e[o]]||s.push(e[o]);s.length>0?O._fetch(s,t,function(e,t){A.extend(r,t),O._storeLocal(t),n(null,r)}):n(null,r)}):O._fetch(e,t,function(e,t){n(null,t)})},_loadLocal:function(e,t,n){var i={},r=(new Date).getTime();if(window.localStorage){var s=e.length;A.each(e,function(e,o){var a=window.localStorage.getItem("res_"+o);a&&(a=JSON.parse(a),a.i18nStamp&&a.i18nStamp+t.localStorageExpirationTime>r&&(i[o]=a)),s--,0===s&&n(null,i)})}},_storeLocal:function(e){if(window.localStorage)for(var t in e)e[t].i18nStamp=(new Date).getTime(),window.localStorage.setItem("res_"+t,JSON.stringify(e[t]))},_fetch:function(e,t,n){var i=t.ns,r={};if(t.dynamicLoad){var s=h(t.resGetPath,{lng:e.join("+"),ns:i.namespaces.join("+")});A.ajax({url:s,success:function(e){A.log("loaded: "+s),n(null,e)},error:function(e,t,i){A.log("failed loading: "+s),n("failed loading resource.json error: "+i)},dataType:"json",async:t.getAsync})}else{var o,a=i.namespaces.length*e.length;A.each(i.namespaces,function(i,s){A.each(e,function(e,i){var l=function(e,t){e&&(o=o||[],o.push(e)),r[i]=r[i]||{},r[i][s]=t,a--,0===a&&n(o,r)};"function"==typeof t.customLoad?t.customLoad(i,s,t,l):O._fetchOne(i,s,t,l)})})}},_fetchOne:function(e,t,n,i){var r=h(n.resGetPath,{lng:e,ns:t});A.ajax({url:r,success:function(e){A.log("loaded: "+r),i(null,e)},error:function(e,t,n){A.log("failed loading: "+r),i(n,{})},dataType:"json",async:n.getAsync})},postMissing:function(e,t,n,i,r){var s={};s[n]=i;var o=[];if("fallback"===E.sendMissingTo)o.push({lng:E.fallbackLng,url:h(E.resPostPath,{lng:E.fallbackLng,ns:t})});else if("current"===E.sendMissingTo)o.push({lng:e,url:h(E.resPostPath,{lng:e,ns:t})});else if("all"===E.sendMissingTo)for(var a=0,l=r.length;l>a;a++)o.push({lng:r[a],url:h(E.resPostPath,{lng:r[a],ns:t})});for(var u=0,c=o.length;c>u;u++){var d=o[u];A.ajax({url:d.url,type:E.sendType,data:s,success:function(){A.log("posted missing key '"+n+"' to: "+d.url);for(var e=n.split("."),r=0,s=x[d.lng][t];e[r];)s=s[e[r]]=r===e.length-1?i:s[e[r]]||{},r++},error:function(){A.log("failed posting missing key '"+n+"' to: "+d.url)},dataType:"json",async:E.postAsync})}}},C={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(e){return Number(e>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ak:{name:"Akan",numbers:[1,2],plurals:function(e){return Number(e>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(e){return Number(e>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ay:{name:"Aymará",numbers:[1],plurals:function(){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(e){return Number(1!=e)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},bo:{name:"Tibetan",numbers:[1],plurals:function(){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(e){return Number(e>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},cgg:{name:"Chiga",numbers:[1],plurals:function(){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},de:{name:"German",numbers:[1,2],plurals:function(e){return Number(1!=e)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(e){return Number(1!=e)}},en:{name:"English",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es:{name:"Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},et:{name:"Estonian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},eu:{name:"Basque",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fa:{name:"Persian",numbers:[1],plurals:function(){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(e){return Number(e>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fr:{name:"French",numbers:[1,2],plurals:function(e){return Number(e>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(e){return Number(1==e?0:2==e?1:7>e?2:11>e?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&20>e?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(e){return Number(1!=e)}},gun:{name:"Gun",numbers:[1,2],plurals:function(e){return Number(e>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(e){return Number(1!=e)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(e){return Number(1!=e)}},id:{name:"Indonesian",numbers:[1],plurals:function(){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(e){return Number(1!=e%10||11==e%100)}},it:{name:"Italian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ja:{name:"Japanese",numbers:[1],plurals:function(){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(e){return Number(0!==e)}},ka:{name:"Georgian",numbers:[1],plurals:function(){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ko:{name:"Korean",numbers:[1],plurals:function(){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(e){return Number(1==e?0:2==e?1:3==e?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(e){return Number(e>1)}},lo:{name:"Lao",numbers:[1],plurals:function(){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&(10>e%100||e%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(e){return Number(1==e%10&&11!=e%100?0:0!==e?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(e){return Number(e>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(e){return Number(e>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(e){return Number(e>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(e){return Number(1==e||1==e%10?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(e){return Number(1==e?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ms:{name:"Malay",numbers:[1],plurals:function(){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(e){return Number(1==e?0:0===e||e%100>1&&11>e%100?1:e%100>10&&20>e%100?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(e){return Number(1!=e)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(e){return Number(1!=e)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(e){return Number(e>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(e){return Number(1!=e)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(e){return Number(1!=e)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(e){return Number(1==e?0:0===e||e%100>0&&20>e%100?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(e){return Number(1!=e)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(e){return Number(1!=e)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(e){return Number(1==e?0:e>=2&&4>=e?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(e){return Number(1==e%100?1:2==e%100?2:3==e%100||4==e%100?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(e){return Number(1!=e)}},son:{name:"Songhay",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(e){return Number(1!=e)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(e){return Number(1!=e)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(e){return Number(1!=e)}},te:{name:"Telugu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(e){return Number(e>1)}},th:{name:"Thai",numbers:[1],plurals:function(){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(e){return Number(e>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(e){return Number(1!=e)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(e){return Number(e>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(e){return Number(1==e%10&&11!=e%100?0:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(e){return Number(1!=e)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(e){return Number(e>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(e){return Number(e>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(e){return Number(1!=e)}},zh:{name:"Chinese",numbers:[1],plurals:function(){return 0}}},addRule:function(e,t){C.rules[e]=t},setCurrentLng:function(e){if(!C.currentRule||C.currentRule.lng!==e){var t=e.split("-");C.currentRule={lng:e,rule:C.rules[t[0]]}}},get:function(e,t){function n(t,n){var i;if(i=C.currentRule&&C.currentRule.lng===e?C.currentRule.rule:C.rules[t]){var r=i.plurals(n),s=i.numbers[r];return 2===i.numbers.length&&1===i.numbers[0]&&(2===s?s=-1:1===s&&(s=1)),s}return 1===n?"1":"-1"}var i=e.split("-");return n(i[0],t)}},N={},M=function(e,t){N[e]=t},I=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function t(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,i){var r,s,o,a,l,u,c,d=1,h=n.length,f="",p=[];for(s=0;h>s;s++)if(f=e(n[s]),"string"===f)p.push(n[s]);else if("array"===f){if(a=n[s],a[2])for(r=i[d],o=0;a[2].length>o;o++){if(!r.hasOwnProperty(a[2][o]))throw I('[sprintf] property "%s" does not exist',a[2][o]);r=r[a[2][o]]}else r=a[1]?i[a[1]]:i[d++];if(/[^s]/.test(a[8])&&"number"!=e(r))throw I("[sprintf] expecting number but found %s",e(r));switch(a[8]){case"b":r=r.toString(2);break;case"c":r=String.fromCharCode(r);break;case"d":r=parseInt(r,10);break;case"e":r=a[7]?r.toExponential(a[7]):r.toExponential();break;case"f":r=a[7]?parseFloat(r).toFixed(a[7]):parseFloat(r);break;case"o":r=r.toString(8);break;case"s":r=(r+="")&&a[7]?r.substring(0,a[7]):r;break;case"u":r=Math.abs(r);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}r=/[def]/.test(a[8])&&a[3]&&r>=0?"+"+r:r,u=a[4]?"0"==a[4]?"0":a[4].charAt(1):" ",c=a[6]-(r+"").length,l=a[6]?t(u,c):"",p.push(a[5]?r+l:l+r)}return p.join("")},n.cache={},n.parse=function(e){for(var t=e,n=[],i=[],r=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){r|=1;var s=[],o=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(o)))throw"[sprintf] huh?";for(s.push(a[1]);""!==(o=o.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(o)))s.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(o)))throw"[sprintf] huh?";s.push(a[1])}n[2]=s}else r|=2;if(3===r)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";i.push(n)}t=t.substring(n[0].length)}return i},n}(),P=function(e,t){return t.unshift(e),I.apply(null,t)};return M("sprintf",function(e,t,n){return n.sprintf?"[object Array]"===Object.prototype.toString.apply(n.sprintf)?P(e,n.sprintf):"object"==typeof n.sprintf?I(e,n.sprintf):e:e}),w.init=i,w.setLng=u,w.preload=r,w.addResourceBundle=s,w.loadNamespace=a,w.loadNamespaces=l,w.setDefaultNamespace=o,w.t=g,w.translate=g,w.detectLanguage=A.detectLanguage,w.pluralExtensions=C,w.sync=O,w.functions=A,w.lng=c,w.addPostProcessor=M,w.options=E,w}),define("libs/locales/de/helptext",[],function(){"use strict";var e=["<h2>Aufgaben (Todos)</h2>","<p>Lege Listen an, in denen du deine Vorhaben verwaltest. Innerhalb einer Liste kannst du ","dann beliebig viele Aufgaben erstellen, jederzeit ändern und als erledigt abhaken.</p>","<h2>Listen Teilen</h2>","<p>Lade deine Verbündeten zu ausgewählten Listen ein, um Aufgaben gemeinsam zu meistern ","und jederzeit auf dem Laufenden zu sein. Nach Bestätigung der Einladung sind die Beteiligten auch berechtigt die Listen zu bearbeiten, nur du als Eigentümer kannst sie jedoch löschen. ","Alle Aufgaben werden dann zwischen Dir und den erlaubten Teilnehmern pro Liste automatisch synchronisiert!</p>","<h2>Benachrichtigungen</h2>","<p>Du kannst pro Aufgabe ein Datum mit Uhrzeit angeben und festlegen, welche Benutzer innerhalb der Liste benachrichtigt werden sollen.</p>","<h2>Über AtOneGo</h2>","<p>Anregungen, Fragen, Lob oder Kritik? Besuche uns im Internet unter: ",'<br/><a class="external-url" target="_blank" href="http://at-one-go.com?lang=de">www.at-one-go.com</a></p>'];return e.join("")}),define("libs/locales/de/translation",["require","libs/locales/de/helptext"],function(e){"use strict";var t=e("libs/locales/de/helptext");return{error:"Es ist ein Fehler aufgetreten, das tut uns Leid. Check deine Internetverbindung und versuch's nochmal!",validationError:"Fehler bei der Validierung. Vielleicht ist der Text zu lang?",success:"Alles klar!",serverError:"Etwas stimmt mit dem Server nicht, das tut uns Leid. Versuch's nochmal!",browserNotSupported:"Sorry, dieser Browser wird noch nicht unterstützt.",settings:"Einstellungen",userSettings:"Benutzer",langSettings:"Sprache",notifySettings:"Benachrichtigungen",notificationQuestion:"Welche Benutzer sollen benachrichtigt werden?",notifyEmail:"Via E-Mail?",notifyPush:"Via PUSH?",notifyVibrate:"Vibrieren bei externen Änderungen?",selectLang:"Wähle deine Sprache",todolistTitle:"Titel der Liste",todoDate:"Datum [optional]",save:"Speichern",saved:"Erfolgreich gespeichert",cancel:"Abbrechen",back:"Zurück",about:"About",startWithoutAccount:"Ohne Account",signup:"Registrieren",signupButton:"Registrieren",signupTitle:"Neuen Account erstellen",accountNotActivatedYet:"Dein Account wurde noch nicht aktiviert und läuft in __days__ ab. All deine Daten werden dann wieder gelöscht. Check deine E-Mails und klicke einfach auf den Link.",signupSuccessMessage:"Registrierung erfolgreich! Wir haben Dir eine E-Mail mit einem Link zum Aktivieren deines Accounts gesendet.",welcome_message_after_signup:'Hier siehst du Nachrichten bei externen Aktivitäten wie z.B. "Du wurdest zu einer Liste eingeladen", oder wenn ein anderer Benutzer eine Aufgabe in einer geteilten Liste ändert. Vergiss nicht, deinen Account zu aktivieren indem du auf den Link in der Willkommens-EMail klickst!',created:"Erstellt",updated:"Aktualisiert",unknown:"Unbekannt",yes:"Ja",no:"Nein",me:"Ich",by:"von",Confirm:"Bestätigen",remove:"entfernen",removeAll:"alle entfernen",start:"Startscreen",help:"Hilfe",helpAndAbout:"Hilfe  & About",really:"Bist du sicher?",reallyLeave:"Wirklich verlassen? Es kann sein, dass ungespeicherte Daten verloren gehen.",reallyAddUser:"Möchtest du den Benutzer mit der E-Mail Adresse `__email__` zu dieser Liste einladen? Wenn der Benutzer noch nicht existiert wird eine Einladungs-Email an diese Adresse gesendet.",login:"Login",logout:"Logout",deleteAccount:"Account löschen",deleteList:"Liste löschen",shareList:"Liste teilen",reallyDeleteAccount:"Wirklich löschen? All deine Daten werden ebenfalls gelöscht!",successfullyDeleted:"Der Account wurde erfolgreich gelöscht.",loginError:"Es ist ein Fehler beim Login aufgetreten, versuch es nochmal.",all:"Alle",active:"Aktiv",completed:"Erledigt",completedTodos:"Erledigte Aufgaben (__completed__)",notLoggedIn:'Du bist nicht eingeloggt! <a href="#start">Hier</a> geht\'s zur Startseite.',helpText:t,show:"Zeigen",edit:"Bearbeiten",editList:"Listen-Einstellungen","delete":"Löschen",close:"Schliessen",notices:"Notizen...",welcome:"Home-Spashscreen",userDoesNotExist:"Benutzer existiert nicht!",userDisplayName:"Beliebiger Name",userDisplayEmail:"Email-Adresse",noValidEMail:"Keine valide E-Mail Adresse!",userEmailWasChanged:"Du hast deine E-Mail Adresse geändert. Du musst diese Adresse erneut bestätigen, indem du auf den Link in der gerade gesendeten Aktivierungsmail klickst.",userDisplayPassword:"Passwort",userDisplayPasswordAgain:"Passwort wiederholen",passwordError:"Beide Passwörter müssen übereinstimmen und mindestens 6 Zeichen besitzen",newList:"Neue Todoliste",newTodo:"Neue Aufgabe",userItems:"Du hast __count__ Todoliste.",userItems_plural:"Du hast __count__ Todolisten.",todosOfList:"Todos in Liste __title__",allowedUsers:"Berechtigte Personen",owner:"Eigentümer",whoWorksWithThisList:"Mit welchen Personen möchtest du diese Liste teilen?",searchForUsers:"Einladen via E-Mail Adresse...",addUserToList:"__name__ einladen",ClearCompleted:"Lösche Erledigte",items:"__count__ Todo",items_plural:"__count__ Todos",noInternetConnection:"Das hat nicht geklappt. Bist du mit dem Internet verbunden?",termsAcceptText:'Wenn du auf „Registrieren“ klickst, akzeptierst du unsere <a target="_blank" href="http://at-one-go.com/terms?lang=de">Nutzungsbedingungen</a>.',recoverPasswort:"Passwort vergessen",from:"Von",list:"Liste",lists:"Todolisten",activities:"Ereignisse",no_activities:"Keine Aktivitäten",invitations:"__count__ Einladung",invitations_plural:"__count__ Einladungen",inviteSuccess:"Einladung erfolgreich. Der Benutzer muss diese jedoch noch bestätigen.",inviteError:"Das hat nicht geklappt - Vielleicht hast du diesen Benutzer bereits eingeladen?",acceptInvitationQuestion:"Einladung zu dieser Liste annehmen?",invitation:"Der Benutzer __username__ hat dich zur Liste __list__ eingeladen!",newIns:"Du hast neue Einladungen zu Listen, welche du nun bestätigen oder ablehnen kannst.",invitation_accepted:"Der Benutzer __username__ hat die Einladung zur Liste __list__ angenommen",invitation_rejected:"Der Benutzer __username__ hat die Einladung zur Liste __list__ abgelehnt",list_access_removed:"Der Benutzer __username__ hat deine Berechtigung an der Liste __list__ zu arbeiten entfent",update_list:"Die Liste __list__ wurde geändert.",delete_list:"Die Liste __list__ wurde gelöscht.",create_todo:"Die Aufgabe __todo__ in der Liste __list__ wurde erstellt.",update_todo:"Die Aufgabe __todo__ in der Liste __list__ wurde geändert.",delete_todo:"Die Aufgabe __todo__ in der Liste __list__ wurde gelöscht.",delete_todos:"Die Aufgaben __str__ in der Liste __list__ wurden gelöscht.",ioUpdate:"Sync-Update-Browser",sameTitleNoSense:"Zweimal der selbe Titel ist nicht möglich",listTitleError:"Der Titel ist entweder zu kurz oder zu lang (höchstens. 32 Zeichen)",listTitleTooLong:"Der Titel der Liste ist zu lang",todoTitleTooLong:"Der Titel ist zu lang",usernameTooLong:"Der Name ist zu lang",userExists:"Der Benutzer existiert bereits",test:"hello __foo__"}}),define("libs/locales/en/helptext",[],function(){"use strict";var e=["<h2>Tasks (Todos)</h2>","<p>Create lists in which you manage your tasks. Within a list, you can ","then create as many tasks as you want and mark them as done. </p>","<h2>Working together</h2>","<p>Invite your friends and team colleagues to selected lists to work on tasks together. After confirmation of ","the invitation, the parties are also entitled to edit the lists, only you as the owner can delete them, however. ","All tasks will then be automatically synchronized between you and the participants allowed per list!</p>","<h2>Notifications</h2>","<p>You can specify a date and time per task and choose users within the list, which should be notified.</p>","<h2>About</h2>","<p>Suggestions, questions, criticism? Visit us at: ",'<br/><a class="external-url" target="_blank" href="http://at-one-go.com">www.at-one-go.com</a></p>'];return e.join("")}),define("libs/locales/en/translation",["require","libs/locales/en/helptext"],function(e){"use strict";var t=e("libs/locales/en/helptext");return{error:"Sorry, this is an error. Check your internet connectipon and try again!",validationError:"Validation-Error. Maybe some text is too long?",success:"Alright!",serverError:"There's something wrong with the server. Try again!",browserNotSupported:"Sorry, this browser is currently not supported.",settings:"Settings",userSettings:"User",langSettings:"Language",notifySettings:"Notifications",notificationQuestion:"Which users should be notified?",notifyEmail:"Via email?",notifyPush:"Via PUSH?",notifyVibrate:"Vibrate on any external changes?",selectLang:"Choose your language",todolistTitle:"Title of the list",todoDate:"Date [optional]",save:"Save",saved:"Successfully saved",cancel:"Cancel",back:"Go back",about:"About",startWithoutAccount:"Without account",signup:"Signup",signupButton:"Signup",signupTitle:"Create an account",accountNotActivatedYet:"Your account has not been activated yet and will be deleted in __days__. Please check your emails and click on the link.",signupSuccessMessage:"Registration successful! We sent you an email to activate your account.",welcome_message_after_signup:'This is the activity stream. Here, you will see all kind of messages from outside, e.g. "you are invited to a list" or when another user changes a task in a shared list. Don\'t forget to activate your account by clicking on the link in the welcome email we sent you!',created:"Created",updated:"Updated",unknown:"Unknown",yes:"Yes",no:"No",me:"You",by:"by",Confirm:"Confirm",remove:"remove",removeAll:"remove all",start:"Startscreen",help:"Help",helpAndAbout:"Help & About",really:"Are you sure?",reallyLeave:"Really leave? Maybe unsaved data will be lost.",reallyAddUser:"Do you want to invite the user with the email address `__email__` to this list? If that user does not exist, we will send an invitation email.",login:"Login",logout:"Logout",deleteAccount:"Delete my account",deleteList:"Delete list",shareList:"Share list",reallyDeleteAccount:"Really delete? All your data will be gone!",successfullyDeleted:"Account deleted successfully. ",loginError:"Oops, there was an error while trying to log you in, try again!",all:"All",active:"Active",completed:"Completed",completedTodos:"Completed tasks (__completed__)",notLoggedIn:'You\'re not logged in! Go to the <a href="#start">login page</a>.',helpText:t,show:"Show",edit:"Edit",editList:"List settings","delete":"Delete",close:"Close",notices:"Notes...",welcome:"Home-Spashscreen",userDoesNotExist:"User does not exist!",userDisplayName:"Your name",userDisplayEmail:"Email address",noValidEMail:"No valid email address!",userEmailWasChanged:"You changed your email address. Please verify that this is your email address by clicking on the link in the activation email which we just sent to you.",userDisplayPassword:"Password",userDisplayPasswordAgain:"Password (again)",passwordError:"Both passwords must be identical and have at least 6 characters",newList:"Create todolist",newTodo:"Create task",userItems:"You have __count__  todolist.",userItems_plural:"You have __count__  todolists.",todosOfList:"Todos of list __title__",allowedUsers:"Assigned users",owner:"owner",whoWorksWithThisList:"Who can work with this list?",searchForUsers:"invite via email address...",addUserToList:"Invite __name__",ClearCompleted:"Clear completed",items:"__count__ todo",items_plural:"__count__ todos",noInternetConnection:"You're not connected to the internet!",termsAcceptText:'By signing up you agree to the <a target="_blank" href="http://at-one-go.com/terms">Terms of Use</a>.',recoverPasswort:"Recover password",from:"From",list:"List",lists:"Todolists",activities:"Events",no_activities:"No activities",invitations:"__count__ invitation",invitations_plural:"__count__ invitations",inviteSuccess:"Invitation successfull. The other user now has to accept it.",inviteError:"Error - Maybe you already invited this user?",acceptInvitationQuestion:"Accept the invitation to this list?",invitation:"__username__ has invited you to the list __list__",newIns:"You have new invitations to lists, which you can accept or decline.",invitation_accepted:"__username__ has accepted your invitation to the list __list__",invitation_rejected:"__username__ has rejected your invitation to the list __list__",list_access_removed:"__username__ has removed your access to the list __list__",update_list:"The list __list__ was updated.",delete_list:"The list __list__ was deleted.",create_todo:"The task __todo__ in the list __list__ was created.",update_todo:"The task __todo__ in the list __list__ was updated.",delete_todo:"The task __todo__ in the list __list__ was deleted.",delete_todos:"The tasks __str__ in the list __list__ were deleted.",ioUpdate:"Sync-Update-Browser",sameTitleNoSense:"Same title is not allowed",listTitleError:"The title is either too short or too long (max. 32 characters)",listTitleTooLong:"The title is too long",todoTitleTooLong:"The title is too long",usernameTooLong:"The name is too long",userExists:"This user already exists",test:"hello __foo__"}
}),define("app",["require","version","zepto","moment","common","lodash","backbone","i18next","libs/locales/de/translation","libs/locales/en/translation"],function(e){"use strict";function t(){return!d.isUndefined(window.cordova)}function n(){return t()?!1:!0}function i(){var e=navigator.userAgent;return t()?!1:/(iPod|iPhone|iPad)/.test(e)&&/AppleWebKit/.test(e)}function r(){var e=navigator.userAgent;if(t())return!1;var n=i(),r=/Android/.test(e);return n||r}function s(e){var t=u.store.get("app-language"),n=function(t){return t=a.trim(t).toLowerCase(),log("========= LANGUAGE PRE CHECK ======== LANGUAGE IS: "+t),/en/.test(t)&&(t="en"),/deutsch/.test(t)&&(t="de"),t!==g&&"de"!==t&&(t=g),u.store.set("app-language",t),y.lang=t,y.user&&"function"==typeof y.user.set&&y.user.set("lang",t,{silent:!0}),e(t)};return t?e(t):(d.isUndefined(navigator.globalization)?(t||(t=navigator.userLanguage||navigator.language||g),n(t)):navigator.globalization.getPreferredLanguage(function(e){t=e.value,n(t)},function(){return e(g)}),void 0)}var o=e("version"),a=e("zepto"),l=e("moment"),u=e("common"),c=null,d=e("lodash"),h=e("backbone"),f=e("i18next"),p=e("libs/locales/de/translation"),m=e("libs/locales/en/translation"),g="en",v=/phantomjs/.test(navigator.userAgent.toLowerCase()),_=__app_config__.touch&&!v,b=_&&r(),y={VERSION:o,API_ROOT:__app_config__.API_ROOT,AJAX_TIMEOUT:6e4,root:__app_config__.APP_ROOT,defaultClickEvent:__app_config__.defaultClickEvent,user:null,isLoggedIn:!1,isMobile:_,isPhantomJS:v,isBrowser:n(),isMobile_Browser:b,isiOSBrowser:i(),isPhonegapAvailable:t(),isIOS:!1,isAndroid:!1,activities:[],socketWrapper:null};return y=d.extend(y,{module:function(e){return d.extend({Views:{}},e)},setUserModel:function(e){c=e},handleError:function(e,t){return"string"!=typeof e&&(e+=""),log("app.handleError() -> "+e),t?(a.ajax({type:"POST",dataType:"json",url:y.API_ROOT+"/api/v1/logs",data:{m:e}}),void 0):!1},initGlobalization:function(){s(function(e){l.lang(e),f.init({customLoad:function(e,t,n,i){switch(e){case"de":i(null,p);break;case"en":i(null,m);break;default:i(null,m)}y.trigger("translationsLoaded")},lng:e,fallbackLng:g,useLocalStorage:!1})})},changeLang:function(e){return e===y.lang?!1:(y.lang=e,"en"!==e&&"de"!==e&&(y.lang="en"),u.store.set("app-language",y.lang),l.lang(y.lang),f.init({lng:y.lang}),void 0)},login:function(e,t,n){a.ajax({cache:!1,timeout:y.AJAX_TIMEOUT,type:"POST",dataType:"json",data:{email:e,password:t},url:y.API_ROOT+"/api/v1/login",success:function(e){return e.error||e.message?n(e.error||e.message):(y.router.setAuthenticated(e),n(null,!0))},error:function(){return n(__("loginError"))}})},fetchUser:function(e){if(!y.user)return"function"==typeof e?e("no user"):!1;if(y.isStillFetchingUser===!0)return"function"==typeof e?e("still fetching"):!1;var t=y.user.get("invite_list_ids");t&&(t=t.length),y.isStillFetchingUser=!0,y.user.fetch({success:function(n,i){y.isStillFetchingUser=!1,y.API_TOKEN=i.API_TOKEN,log(">>> fetched user in backgrnd "+i.email+" API TOKEN: "+i.API_TOKEN),y.todolists.reset(),y.todolists.add(i.todolists),y.storage.storeUser(i);var r=i.invite_list_ids;r&&(r=r.length),r>t&&u.dialog(__("newIns")),"function"==typeof e&&e(null,i)},error:function(){y.isStillFetchingUser=!1,"function"==typeof e&&e(!0)}})},checkInternetConnection:function(){if(d.isUndefined(navigator.connection))return!0;var e=navigator.connection;return y.isAndroid&&0===e.type?!0:y.isAndroid?!0:e.type&&"none"!==e.type&&"unknown"!==e.type?!0:!1},initAndRegisterPushNotifications:function(){if(!window.plugins||!window.plugins.pushNotification)return!1;y.pushNotification=window.plugins.pushNotification,window.onNotificationAPN=function(e){y.todosContainer&&y.todosContainer.refetchTodos(),setTimeout(function(){y.fetchUser()},200),e.alert&&(u.vibrate(500,y.user.get("notify_settings")),u.notify(e.alert,2e4),y.activityCollection.addActivity({key:"push_notification",data:{body:e.alert,timestamp:(new Date).getTime()}})),e.badge&&y.pushNotification.setApplicationIconBadgeNumber(function(){},function(e){log(e)},e.badge)};var e,t=function(e){log("PUSH: =================> ERROR HANDLER: "),y.handleError(e)};if(y.isIOS){var n=function(e){function t(e){var t=new c,n={_id:y.user.get("_id"),apn_device_token:e};t.save(n,{patch:!0})}log("PUSH: ==> IOS PUSH SUCCESS -> token: "+e),setTimeout(function(){t(e)},1e3)};e={badge:"true",sound:"true",alert:"true",ecb:"onNotificationAPN"},log("#register call now................................................");var i=function(i,r){log("====== UNREGISTER ERROR ======"),log(i),log(r),y.pushNotification.register(n,t,e)},r=function(i,r){log("====== UNREGISTER FIRST ======"),log(i),log(r),log("=========> REGISTERING IOS PUSH..."),y.pushNotification.register(n,t,e)};y.pushNotification.unregister(r,i)}}},h.Events)}),define("models/user",["require","backbone","app"],function(e){"use strict";var t=e("backbone"),n=e("app"),i=t.Model.extend({idAttribute:"_id",urlRoot:n.API_ROOT+"/api/v1/users",defaults:{active:!0,active_since:new Date,display_name:"",name:"",email:"",password:null,lang:"en",notify_settings:{email:!0,push:!0,vibrate:!0,sound:!0},img_url:null,todolists:[],added_users:[],invite_list_ids:[]}});return i}),define("JrFork",["require","backbone","zepto","lodash","app"],function(e){"use strict";var t,n,i=e("backbone"),r=e("zepto"),s=e("lodash"),o=e("app"),a=a||{};return r(function(){t=r("#app-main"),n=r("#app-container")}),function(e){e.Navigator={isAnimating:!1,backButtonFlag:!0,history:[],directions:{UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT"},opposites:{UP:"DOWN",DOWN:"UP",LEFT:"RIGHT",RIGHT:"LEFT"},animations:{SLIDE_STACK:"SLIDE_STACK",SLIDE_OVER:"SLIDE_OVER"},navigate:function(t,n){return e.Navigator.isAnimating&&!o.isPhantomJS?!1:(this.history.push(n),this.backButtonFlag=!1,i.history.navigate(t,{trigger:!0}))},renderScreen:function(e,t,n,i){var s,o=this.history.length>0?this.history[this.history.length-1].animation:null;return n||(o=null),o?(s=r("<div></div>"),s.append(t.render().el),this.animate(e,s,o.type,o.direction,i),this.afterAnimation()):(this.resetContent(e,t),this.normalRenderView(e,t),"function"==typeof i&&i(),void 0)},normalRenderView:function(e,t){return e.append(t.render().el)},resetContent:function(e){return e.empty()},animate:function(e,t,n,i,r){if(this.animations.hasOwnProperty(n))return this.doAnimation(e,t,n,i,r);throw Error("Animation Not Available")},doAnimation:function(t,i,r,o,a){e.Navigator.isAnimating=!0;var l,u;n.prepend(i),i.addClass("animate-to-view").addClass(o).addClass("initial"),n.addClass("animate").addClass(o),l=function(){return i.removeClass("initial")},setTimeout(l,1),u=function(){t.remove(),i.attr("id","app-main").removeClass("animate-to-view").removeClass(o),n.removeClass("animate").removeClass(o),setTimeout(function(){e.Navigator.isAnimating=!1},500),s.isFunction(a)&&a()},n.one("webkitTransitionEnd",u)},afterAnimation:function(){var e,t,n=this.history.pop();e=n.animation,t=this.opposites[e.direction],n.animation.direction=t,this.history.push(n),this.backButtonFlag&&this.history.pop(),this.backButtonFlag=!0}},e.Router=i.Router.extend({renderScreen:function(n,i,s){return t=r("#app-main"),e.Navigator.renderScreen(t,n,i,s)}})}(a),a}),define("text",["module"],function(e){"use strict";var t,n,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o="undefined"!=typeof location&&location.href,a=o&&location.protocol&&location.protocol.replace(/\:/,""),l=o&&location.hostname,u=o&&(location.port||void 0),c=[],d=e.config&&e.config()||{};return t={version:"2.0.3",strip:function(e){if(e){e=e.replace(r,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=i[t];try{e=new ActiveXObject(n)}catch(r){}if(e){i=[n];break}}return e},parseName:function(e){var t=!1,n=e.indexOf("."),i=e.substring(0,n),r=e.substring(n+1,e.length);return n=r.indexOf("!"),-1!==n&&(t=r.substring(n+1,r.length),t="strip"===t,r=r.substring(0,n)),{moduleName:i,ext:r,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var s,o,a,l=t.xdRegExp.exec(e);return l?(s=l[2],o=l[3],o=o.split(":"),a=o[1],o=o[0],!(s&&s!==n||o&&o.toLowerCase()!==i.toLowerCase()||(a||o)&&a!==r)):!0},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,d.isBuild&&(c[e]=i),r(i)},load:function(e,n,i,r){if(r.isBuild&&!r.inlineText)return i(),void 0;d.isBuild=r.isBuild;var s=t.parseName(e),c=s.moduleName+"."+s.ext,h=n.toUrl(c),f=d.useXhr||t.useXhr;!o||f(h,a,l,u)?t.get(h,function(n){t.finishLoad(e,s.strip,n,i)},function(e){i.error&&i.error(e)}):n([c],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,i)})},write:function(e,n,i){if(c.hasOwnProperty(n)){var r=t.jsEscape(c[n]);i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,i,r,s){var o=t.parseName(n),a=o.moduleName+"."+o.ext,l=i.toUrl(o.moduleName+"."+o.ext)+".js";t.load(a,i,function(){var n=function(e){return r(l,e)};n.asModule=function(e,t){return r.asModule(e,l,t)},t.write(e,a,n,s)},s)}},"node"===d.env||!d.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),t.get=function(e,t){var i=n.readFileSync(e,"utf8");0===i.indexOf("﻿")&&(i=i.substring(1)),t(i)}):"xhr"===d.env||!d.env&&t.createXhr()?t.get=function(e,n,i){var r=t.createXhr();r.open("GET",e,!0),d.onXhr&&d.onXhr(r,e),r.onreadystatechange=function(){var t,s;4===r.readyState&&(t=r.status,t>399&&600>t?(s=Error(e+" HTTP status: "+t),s.xhr=r,i(s)):n(r.responseText))},r.send(null)}:("rhino"===d.env||!d.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(t.get=function(e,t){var n,i,r="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),r)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),n.append(i);null!==(i=a.readLine());)n.append(o),n.append(i);l=""+n+""}finally{a.close()}t(l)}),t}),define("text!templates/start.html",[],function(){return'<div class="content">\n    <div id="logo-wrap"></div>\n\n    <br/>\n    <div class="divider"></div>\n\n    <!--<a href="#todolists" class="no-account-btn aog-button aog-green aog-big">< % - __(\'startWithoutAccount\') %></a>-->\n    <a href="#login"  class="login-btn  aog-button aog-white aog-big"><%- __(\'login\') %></a>\n    <a href="#signup" class="signup-btn aog-button aog-white aog-big"><%- __(\'signup\') %></a>\n</div>\n'}),define("text!templates/header.html",[],function(){return'<!-- This markup will go in a <header/> -->\n<div class="header-animated">\n    <a id="gotolists" href="#todolists"\n        class="<%- showHomeButton ? \'\' : \'hidden\' %> goto-lists back-link"></a>\n\n    <a id="goback" href="#"\n        class="<%- showBackButton ? \'\' : \'hidden\' %> back-btn"></a>\n\n    <a id="list-settings" href="#todolists/edit/<%- listID %>"\n        class="<%- showListEditButton ? \'\' : \'hidden\' %> "></a>\n\n    <div id="app-loader" style="top: 3px; right: <%- showListEditButton || showSaveButton ? \'50px\' : \'5px\' %>;"></div>\n\n    <h1 class="title" id="title"><%- title %></h1>\n\n    <a id="header-save" href="#"\n        class="<%- showSaveButton ? \'\' : \'hidden\' %> disabled"></a>\n</div>\n'}),define("views/header",["require","lodash","zepto","app","text!templates/header.html","backbone"],function(e){"use strict";var t=e("lodash"),n=e("zepto"),i=e("app"),r=e("text!templates/header.html"),s=e("backbone"),o={};return o[i.defaultClickEvent+" #header-save"]="onHeaderSaveClick",s.View.extend({events:o,initialize:function(e){this.template=t.template(r),this.title=e.title,this.showBackButton=e.showBackButton||!1,this.showHomeButton=e.showHomeButton||!1,this.showListEditButton=e.showListEditButton||!1,this.showSaveButton=e.showSaveButton||!1,this.showListEditButton&&(this.listID=e.listID)},render:function(){return this.$el.html(this.template({title:this.title,showBackButton:this.showBackButton,showHomeButton:this.showHomeButton,showListEditButton:this.showListEditButton,showSaveButton:this.showSaveButton,listID:this.listID})),this.$el.addClass("bar-title"),this},onHeaderSaveClick:function(e){e.preventDefault();var t=n(e.currentTarget);return t.hasClass("disabled")||t.attr("disabled")?!1:(i.trigger("header-save",e),!1)}})}),define("views/base",["require","lodash","backbone","views/header"],function(e){"use strict";var t=e("lodash"),n=e("backbone"),i=e("views/header"),r=function(e){this.defaultViewData={},n.View.apply(this,[e])};return t.extend(r.prototype,n.View.prototype,{initialize:function(){},dispose:function(){return this.remove()},renderSelf:function(e){var t=this.template(e||this.defaultViewData);this.$el.html(t)},renderHeader:function(e){this.headerView=new i(e),this.headerView.render()}}),r.extend=n.View.extend,r}),define("views/start",["require","lodash","app","text!templates/start.html","views/base"],function(e){"use strict";var t=e("lodash"),n=e("app"),i=e("text!templates/start.html"),r=e("views/base"),s={};return r.extend({id:"startview",title:function(){return __("start")},events:s,initialize:function(){this.template=t.template(i)},render:function(){return this.renderSelf({app:n}),this}})}),define("text!templates/userview.html",[],function(){return'<h2><%= __(\'userSettings\') %></h2>\n\n<% if(!user.active) { %>\n<p class="error small"><%= __(\'accountNotActivatedYet\', {days: days}) %></p>\n<% } %>\n\n<input type="text" id="display_name"\n    placeholder="<%- __(\'userDisplayName\') %>" value="<%- user.display_name %>">\n\n<input type="email" id="email"\n    placeholder="<%- __(\'userDisplayEmail\') %>" value="<%- user.email %>">\n\n<input type="password" placeholder="<%- __(\'userDisplayPassword\') %>" id="password">\n<input type="password" placeholder="<%- __(\'userDisplayPasswordAgain\') %>" id="password2">\n<p id="pw-error" class="error-msg small hidden"><%- __(\'passwordError\') %></p>\n\n<!-- language select -->\n<p class="aog-green-text green-header"><%= __(\'selectLang\') %></p>\n<select id="select-lang">\n    <option value="en"\n    <%= (app.lang === \'en\' || app.lang !== \'de\') ? \'selected\' : \'\' %>>\n    English\n    </option>\n\n    <option value="de"\n    <%= app.lang === \'de\' ? \'selected\' : \'\' %>>\n    Deutsch\n    </option>\n</select>\n\n<!-- notification settings-->\n<p class="aog-green-text green-header"><%= __(\'notifySettings\') %></p>\n<ul class="aog-list notify-settings-list">\n    <li class="no-link">\n        <div class="ago-toggle-wrap">\n            <span class="ago-toggle email-checkbox <%= user.notify_settings.email ? \'checked\' : \'\' %>">\n            </span>\n        </div>\n\n        <div class="title-wrap">\n            <p class="title"><%= __(\'notifyEmail\') %></p>\n        </div>\n    </li>\n\n    <!--\n    <li class="no-link">\n        <div class="ago-toggle-wrap">\n            <span class="ago-toggle push-checkbox <%= user.notify_settings.push ? \'checked\' : \'\' %>">\n            </span>\n        </div>\n\n        <div class="title-wrap">\n            <p class="title">< % = __(\'notifyPush\') % ></p>\n        </div>\n    </li>\n    -->\n\n    <% if(!app.isBrowser) { %>\n    <li class="no-link">\n        <div class="ago-toggle-wrap">\n            <span class="ago-toggle vibrate-checkbox <%= user.notify_settings.vibrate ? \'checked\' : \'\' %>">\n            </span>\n        </div>\n\n        <div class="title-wrap">\n            <p class="title"><%= __(\'notifyVibrate\') %></p>\n        </div>\n    </li>\n    <% } %>\n</ul>\n'}),define("views/userview",["app","common","zepto","lodash","text!templates/userview.html","views/base"],function(e,t,n,i,r,s){"use strict";var o={};return o["keyup input"]="validate",o["blur #password2"]="validateOnFormInputBlur",o["change #select-lang"]="changeLang",o[e.defaultClickEvent+" .ago-toggle-wrap"]="toggleCheckbox",s.extend({events:o,initialize:function(){var t=this;this.template=i.template(r),e.off("header-save"),e.on("header-save",function(e){t.saveUser(e)})},render:function(){var i=this.model.toJSON(),r=t.getUserActiveDays(i,e.lang);return this.renderSelf({user:i,app:e,days:r}),this.$display_name=n("#display_name",this.el),this.$email=n("#email",this.el),this.$pw=n("#password",this.el),this.$pw2=n("#password2",this.el),this.$selLanguage=n("#select-lang",this.el),this.$notifySettingsList=n(".notify-settings-list",this.el),this.$saveBtn=n("#header-save"),this},validate:function(){t.lockScreen();var e=n.trim(this.$pw.val()),i=n.trim(this.$pw2.val()),r=this.$display_name.val().length>0&&32>=this.$display_name.val().length&&/@/.test(this.$email.val());this.$saveBtn=n("#header-save");var s=e.length>0||i.length>0;return s&&e!==i&&(r=!1),s&&(6>e.length||6>i.length)&&(r=!1),this.$saveBtn.length>0&&this.$saveBtn.toggleClass("disabled",!r),r&&n("#pw-error",this.el).addClass("hidden"),r},validateOnFormInputBlur:function(){var e=n.trim(this.$pw.val()),t=n.trim(this.$pw2.val()),i=e.length>0||t.length>0,r=n("#pw-error",this.el);r.toggleClass("hidden",!(i&&!this.validate()))},saveUser:function(r){r.preventDefault();var s=this,o=this.$pw.val(),a=this.$pw2.val(),l=this.$email.val(),u=this.$display_name.val(),c=n.trim(this.$email.val()),d=e.user.get("email"),h=i.bind(function(){this.$pw.val(""),this.$pw2.val("")},this),f=e.user.get("active");d!==c&&(f=!1),e.user.set({active:f,active_since:new Date},{silent:!0});var p={email:this.$notifySettingsList.find(".email-checkbox").hasClass("checked"),push:this.$notifySettingsList.find(".push-checkbox").hasClass("checked"),vibrate:this.$notifySettingsList.find(".vibrate-checkbox").hasClass("checked"),sound:!0},m={display_name:u,email:c,lang:e.lang,notify_settings:p},g={_id:e.user.get("_id"),display_name:u,email:c,API_TOKEN:e.user.get("API_TOKEN"),todolists:e.user.get("todolists"),active:f,invite_list_ids:e.user.get("invite_list_ids"),lang:e.lang,notify_settings:p};o.length>0&&o===a&&(m.password=o),t.showLoader(),this.$saveBtn.addClass("disabled"),t.unlockScreen(),this.model.save(m,{patch:!0,success:function(){t.hideLoader(),h(),d!==c&&t.dialog(__("userEmailWasChanged")),t.store.set("email",l),e.storage.storeUser(g,function(){})},error:function(e,n){t.hideLoader(),s.$saveBtn.removeClass("disabled");var i=__("error");n&&n.message&&(i=n.message),t.notify(i)}})},toggleCheckbox:function(e){n(e.currentTarget).find(".ago-toggle").toggleClass("checked"),this.__enableSaveButton()},changeLang:function(t){t.preventDefault();var i=this.$selLanguage.val();e.changeLang(i),this.__enableSaveButton(),n("#title").html(__("settings"))},__enableSaveButton:function(){t.lockScreen(),this.$saveBtn=n("#header-save"),this.$saveBtn.removeClass("disabled")}})}),define("text!templates/settings.html",[],function(){return'<header></header>\n\n<div class="content">\n    <div id="user-sub-view"></div>\n\n    <div class="divider"></div>\n\n    <button id="logout" class="aog-button aog-big aog-white">\n        <%= __(\'logout\') %>\n    </button>\n\n    <button id="delete-account" class="aog-button aog-big aog-red">\n        <%= __(\'deleteAccount\') %>\n    </button>\n</div>\n'}),define("views/settings",["require","zepto","lodash","app","common","views/userview","text!templates/settings.html","views/base"],function(e){"use strict";var t=e("zepto"),n=e("lodash"),i=e("app"),r=e("common"),s=e("views/userview"),o=e("text!templates/settings.html"),a=e("views/base"),l={};return l[i.defaultClickEvent+" #logout"]="logout",l[i.defaultClickEvent+" #delete-account"]="deleteAccount",a.extend({id:"settings-view",title:function(){return __("settings")},events:l,initialize:function(){this.template=n.template(o),this.userView=null,this.alreadyRendered=!1},dispose:function(){this.alreadyRendered=!1,this.userView&&this.userView.dispose(),a.prototype.dispose.call(this)},render:function(){if(this.alreadyRendered)return this.userView.render(),this;this.alreadyRendered=!0;var e=i.isLoggedIn,n=i.user?i.user.toJSON():{email:""};return this.renderSelf({app:i,user:n,isLoggedIn:e}),this.renderHeader({showBackButton:!0,showSaveButton:!0,el:t("header",this.el)[0],title:this.title()}),this.userView=new s({el:t("#user-sub-view",this.el)[0],model:i.user}),this.userView.render(),this},logout:function(e){return e.preventDefault(),setTimeout(function(){r.dialog(__("really"),function(e){e&&i.router.go("logout")},!0)},20),!1},deleteAccount:function(e){e.preventDefault();var t=function(e){return e?(i.router.deauthenticateUser(),i.user.destroy({success:function(){setTimeout(function(){r.notify(__("successfullyDeleted"))},100)},error:function(e,t){var n=__("error");t&&t.message&&(n=t.message),r.notify(n)}}),void 0):!1};return setTimeout(function(){r.dialog(__("reallyDeleteAccount"),t,!0)},20),!1}})}),define("text!templates/help.html",[],function(){return'<header></header>\n\n<div class="content">\n    <%= __(\'helpText\') %>\n\n    <div class="divider"></div>\n\n    <h2>Version</h2>\n    <p><%- app.VERSION %></p>\n\n    <div class="divider"></div>\n\n    <h2>Copyright Information</h2>\n    <p><strong><a target="_blank" href="http://zeptojs.com">Zepto</a></strong><br/>Copyright &copy; 2010-2013 Thomas Fuchs (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://backbonejs.org">Backbone.js</a></strong><br/>Copyright &copy; 2010-2013 Jeremy Ashkenas, DocumentCloud Inc. (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://lodash.com">Lodash</a></strong><br/>Copyright &copy; 2012-2013 The Dojo Foundation (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://h5bp.com">HTML5 Boilerplate</a></strong><br/>Copyright &copy; HTML5 Boilerplate (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://requirejs.org">Require.js</a></strong><br/>Copyright &copy; 2010-2013, The Dojo Foundation All Rights Reserved. (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://momentjs.com">Moment.js</a></strong><br/>Copyright &copy; 2011-2013 Tim Wood (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://mobiscroll.com">MobiScroll Date & Time Scroller</a></strong><br/>Copyright &copy; 2010-2013, Acid Media (MIT Licence)</p>\n    <p><strong><a target="_blank" href="http://maker.github.io/ratchet">Ratchet</a></strong><br/>Copyright &copy; 2012 DHG, CONNORS, FAT and other contributors (MIT Licence)</p>\n    <br/>\n    <p><a target="_blank" href="https://github.com/mwager/atonego">...and many more</a></p>\n\n    <div class="divider"></div>\n\n    <h2>Credits</h2>\n    <p>Development: <a target="_blank" href="http://mwager.de">Michael Wager</a></p>\n    <p>Design: <a target="_blank" href="http://projekthelden.de">Projekthelden</a></p>\n    <br/>\n</div>'}),define("views/help",["lodash","app","zepto","text!templates/help.html","views/base"],function(e,t,n,i,r){"use strict";var s={};return r.extend({id:"help-view",title:function(){return __("help")},events:s,initialize:function(){this.template=e.template(i)},dispose:function(){r.prototype.dispose.call(this)},render:function(){return this.renderSelf({app:t}),this.renderHeader({showBackButton:!0,el:n("header",this.el)[0],title:this.title()}),this}})}),define("models/todo",["require","backbone","app"],function(e){"use strict";var t=e("backbone"),n=e("app");return t.Model.extend({idAttribute:"_id",urlRoot:n.API_ROOT+"/api/v1/todos",defaults:{title:"",completed:!1,notice:"",date:null,users_to_notify:[],order:0}})}),define("text!templates/todos/todoscontainer.html",[],function(){return'<header></header>\n\n<!-- "RootView" - renders all relevant containers only once -->\n<div class="content">\n    <input id="new-todo-title"  type="text"\n           placeholder="<%= __(\'newTodo\') %>">\n\n    <div class="divider"></div>\n\n    <div id="todosview">\n        <ul id="uncompleted-list" class="aog-list"></ul>\n\n        <div class="divider"></div>\n\n        <div id="clear-completed-btn-view"></div>\n\n        <ul id="completed-list" class="aog-list"></ul>\n    </div>\n\n    <br />\n</div>\n'}),define("text!templates/todos/editlayer.html",[],function(){return'<div id="edit-layer-wrapper" class="modal">\n    <header class="bar-title modal-header">\n        <h1 class="title"><%- todo.title.substr(0, 7) + \'...\' %></h1>\n\n        <!-- this save btn is never disabled as it also closes the modal -->\n        <a id="header-save" href="#"\n            class="close-layer save"></a>\n\n    </header>\n\n    <div class="content content-padded">\n\n        <input type="text" id="todo-title" value="<%- todo.title %>">\n\n        <p id="timestamp" class="aog-green-text centered small"><%- __(\'updated\') %> <%- common.fromNow(todo.updated_at, false, app.lang) %> <%- __(\'by\') %> <%- common.getUser(todo, true) %></p>\n\n        <div class="centered">\n            <textarea id="notice" rows="3" placeholder="<%- __(\'notices\') %>"\n                readonly><%- todo.notice %></textarea>\n        </div>\n\n        <!-- bei completed todos gibts keine Benachrichtigungen mehr -->\n        <div class="<%- todo.completed ? \'hidden\' : \'\' %>">\n            <h2 class="centered"><%= __(\'notifySettings\') %></h2>\n\n            <input type="text" id="date-input" style="margin-bottom: 0px;"\n                placeholder="<%- __(\'todoDate\') %>"\n                value="<%- date %>" readonly>\n\n            <br /><br />\n\n            <div class="choose-participants hidden">\n                <p class="aog-green-text centered"><%- __(\'notificationQuestion\') %></p>\n\n                <ul class="aog-list">\n                    <% _.each(todolist.participants, function(user) { %>\n                    <li class="no-link">\n                        <div class="ago-toggle-wrap">\n                        <%\n                        var isChecked = _.indexOf(todo.users_to_notify, user._id) >= 0;\n                        %>\n                        <span class="ago-toggle <%- isChecked ? \'checked\' : \'\' %>"\n                            data-user-id="<%- user._id %>"></span>\n                        </div>\n\n                        <div class="title-wrap">\n                            <p class="title">\n                                <%- theUser._id == user._id ? __(\'me\') : user.display_name + \' (\' + user.email + \')\' %>\n                            </p>\n                        </div>\n                    </li>\n                    <% }); %>\n                </ul>\n\n                <br /><br />\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/todos/editlayer",["require","app","zepto","common","views/base","text!templates/todos/editlayer.html","lodash"],function(e){"use strict";var t=e("app"),n=e("zepto"),i=e("common"),r=e("views/base"),s=e("text!templates/todos/editlayer.html"),o=e("lodash"),a={};a["focus input"]="switchToEditMode",a["focus textarea"]="switchToEditMode",a[t.defaultClickEvent+" .close-layer"]="close",a[t.defaultClickEvent+" .ago-toggle-wrap"]="toggleCheckbox";var l=r.extend({template:o.template(s),__id:"todo-edit-layer",events:a,initialize:function(e){this.editMode=!1,this.todo=e.todo,this.listenTo(this.todo,"change",this.render),this.$el=n("#"+this.__id),this.$el.length>0&&this.$el.remove();var t=n("body");t.append('<div id="'+this.__id+'"></div>'),this.$el=n("#"+this.__id),this.el=this.$el[0]},open:function(){this.render();var e=this.$el.find(".modal");setTimeout(function(){e.addClass("active")},30)},close:function(){if(!this.$el||0===this.$el.length)return!1;var e=this,t=this.$el.find(".modal");t.length>0?(t.removeClass("active"),this.editMode&&setTimeout(function(){e.saveTodo()},0),setTimeout(function(){e.$el.length>0&&e.dispose()},500)):this.dispose()},render:function(){var e=this,r=this.todo.toJSON(),s=r.date?i.parseDate(new Date(r.date),t.lang):"",a=t.todolists.get(r.todolist);a||(a=t.todolists.get(r.todolist._id));var l=a.toJSON(),u=t.user.toJSON();return 0===s.length&&o.each(l.participants,function(e){r.users_to_notify.push(e._id)}),this.renderSelf({_:o,common:i,app:t,todo:r,date:s,todolist:l,theUser:u}),this.$headerTitle=n(".bar-title .title",this.el),this.$todoTitle=n("#todo-title",this.el),this.$notice=n("#notice",this.el),this.$date=n("#date-input",this.el),this.$chooseParticipants=n(".choose-participants",this.el),r.date&&setTimeout(function(){e.$chooseParticipants.removeClass("hidden")},10),setTimeout(function(){e.$notice.attr("readonly",null),e.__initDatepicker()},700),this},__initDatepicker:function(){var e=this,i=new Date,r={preset:"datetime",minDate:i,maxDate:new Date(i.getFullYear()+2,i.getMonth(),i.getDay()),stepMinute:5};this.$date.scroller("destroy").scroller(n.extend(r,{theme:"default",mode:"clickpick",lang:t.lang,display:"top",animate:"",onCancel:function(){setTimeout(function(){e.$chooseParticipants.addClass("hidden")},1e3),e.$date.val("")},onSelect:function(){setTimeout(function(){e.$chooseParticipants.removeClass("hidden")},10)}}))},saveTodo:function(){var e=this,r=this.$todoTitle.val().trim(),s=this.$notice.val().trim(),o=this.$date.val().trim(),a=null,l=i.getDateParser(t.lang);if(o.length>0&&(a=l.parse(o)),s.length>1024)return!1;var u,c=[];n(".ago-toggle",this.el).each(function(){u=n(this),u.hasClass("checked")&&c.push(u.attr("data-user-id"))});var d=null===a?"":a.getTime(),h={title:r,notice:s,date:d,users_to_notify:c,updated_at:(new Date).getTime(),updated_by:t.user.toJSON()};this.todo.set(h,{silent:!0});var f=this.todo.collection,p=this.todo.get("todolist"),m=t.todolists.get(p);m&&f&&(f=f.toJSON(),m.set({todos:f},{silent:!0}));var g=this.todo.hasChanged("title")||this.todo.hasChanged("notice")||this.todo.hasChanged("date")||this.todo.hasChanged("users_to_notify");return g?(i.showLoader(),this.todo.save(h,{patch:!0,success:function(){e.trigger("save-success",e.todo.toJSON()),i.hideLoader()},error:function(){i.notify(__("error")),i.hideLoader()}}),void 0):!1},toggleCheckbox:function(e){return n(e.currentTarget).find(".ago-toggle").toggleClass("checked"),this.switchToEditMode(),!1},switchToEditMode:function(){this.editMode=!0}});return l}),define("text!templates/todos/todoview.html",[],function(){return'<div class="ago-toggle-wrap">\n    <span class="ago-toggle <%- todo.completed ? \'checked\' : \'\' %>"></span>\n</div>\n\n<div class="title-wrap">\n    <p class="title"><%- todo.title %></p>\n</div>\n\n<div class="edit-wrap hidden">\n    <input type="text" class="edit">\n</div>\n'}),define("views/todos/todoview",["require","app","common","zepto","lodash","views/todos/editlayer","text!templates/todos/todoview.html","views/base"],function(e){"use strict";var t=e("app"),n=e("common"),i=e("zepto"),r=e("lodash"),s=e("views/todos/editlayer"),o=e("text!templates/todos/todoview.html"),a=e("views/base"),l={};l[t.defaultClickEvent+" .ago-toggle-wrap"]="toggleCompleted",l[t.defaultClickEvent+" .title-wrap"]="openEditLayer",t.isMobile&&(l["longTap .title-wrap"]="edit"),l["blur .edit"]="close",l["keyup .edit"]="updateOnEnter";var u=a.extend({tagName:"li",attributes:{},template:r.template(o),events:l,initialize:function(e){if(!e.parentView)throw"todoview.js: no parentView provided";this.editMode=!1,this.parentView=e.parentView,this.listenToModel()},listenToModel:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"remove",this.remove)},rebindAllEvents:function(){this.listenToModel(),this.delegateEvents()},dispose:function(){a.prototype.dispose.call(this)},render:function(){var e=this.model.toJSON();return this.renderSelf({common:n,todo:e}),this.$completedCheckbox=i(".ago-toggle",this.el),this.$title=i(".title",this.el),this.$input=i(".edit",this.el),this.$inputWrap=i(".edit-wrap",this.el),this.$el.toggleClass("completed",this.model.get("completed")),this
},edit:function(e){var t=this;return e&&(e.preventDefault(),e.stopPropagation()),this.editMode=!0,this.$input.val(this.$title.html()),this.$inputWrap.removeClass("hidden"),this.$completedCheckbox.addClass("hidden"),this.$el.addClass("editing"),setTimeout(function(){t.$input.focus()},0),!1},close:function(e){if(e&&e.preventDefault(),this.model.isNew())return!1;var t=this.$input.val().trim(),n=this.model.get("title");t&&t!==n&&(this.$title.html(t),this.saveTodo()),this.$inputWrap.addClass("hidden"),this.$el.removeClass("editing"),this.$completedCheckbox.removeClass("hidden")},updateOnEnter:function(e){var t=e.keyCode||e.which;return 13===t?(this.close(),!1):void 0},openEditLayer:function(e){if(this.model.isNew())return!1;e&&(e.preventDefault(),e.stopPropagation());var t=new s({todo:this.model});return t.on("save-success",r.bind(function(e){this.model.set(e,{silent:!0}),this.render()},this)),t.open(),!1},toggleCompleted:function(){var e=this;return this.editMode?(this.editMode=!1,!1):this.model.isNew()?!1:(this.$completedCheckbox.toggleClass("checked",this.model.get("checked")),this.$el.animate({opacity:0,translate3d:"0,0%,0"},{duration:200,easing:"ease",complete:function(){e.saveTodo(null,!0)}}),!1)},saveTodo:function(e,r){e&&e.preventDefault();var s=i.trim(this.$title.html());if(0>=s.length||s.length>1024)return!1;var o={title:s,completed:r?!this.model.get("completed"):this.model.get("completed")};this.model.set(o);var a=this.model.collection,l=this.model.get("todolist"),u=t.todolists.get(l);u&&a&&(a=a.toJSON(),u.set({todos:a},{silent:!0})),n.showLoader(),this.model.save(o,{patch:!0,success:function(){n.hideLoader()},error:function(e,t){var i=__("error"),r=JSON.parse(t.responseText);r&&r.message&&r.message.key&&(i=__(r.message.key)),n.hideLoader(),n.notify(i)}})},destroy:function(e,t){e&&e.preventDefault();var i=this,r=function(e){return e?(n.showLoader(),i.model.destroy({success:function(){n.hideLoader()},error:function(e,t){var i=__("error");t&&t.message&&(i=t.message),n.hideLoader(),n.notify(i,6e3)}}),void 0):!1};return t?r(!0):(setTimeout(function(){n.dialog(__("really"),r,!0)},20),!1)},preventDefault:function(e){e.preventDefault()}});return u}),define("text!templates/todos/todosview.html",[],function(){return""}),define("views/todos/todosview",["require","app","common","zepto","lodash","views/base","views/todos/todoview","text!templates/todos/todosview.html"],function(e){"use strict";var t=e("app"),n=e("common"),i=e("zepto"),r=e("lodash"),s=e("views/base"),o=e("views/todos/todoview"),a=e("text!templates/todos/todosview.html"),l={};return s.extend({events:l,template:r.template(a),todoSubViews:{},initialize:function(e){if(!e||!e.listID)throw{message:"no list id provided"};if(!e||!e.todosInstance)throw{message:"no todos-collection instance provided"};if(this.listID=e.listID,this.isFetching=!1,this.list=t.todolists.get(this.listID),!this.list)throw{message:"no todolist found for ID = "+this.listID};if(this.todos=e.todosInstance,this.$input=i("#new-todo"),this.$title=i("#title"),this.$uncompletedList=i("#uncompleted-list",this.el),this.$completedList=i("#completed-list",this.el),this.uncompletedListEl=this.$uncompletedList[0],this.completedListEl=this.$completedList[0],t&&t.todolists){var r=t.todolists.get(this.listID).get("title");this.$title.html(n.escape(r))}this.listenToCollection(),this.fetchTodos()},dispose:function(){r.each(this.todoSubViews,function(e){e&&r.isFunction(e.dispose)&&e.dispose()}),s.prototype.dispose.call(this)},listenToCollection:function(){var e=this;this.listenTo(this.todos,"fetched",function(){var t,n,i;r.each(e.todos.models,function(s){i=s.get("_id")||s.cid,n=e.todoSubViews[i],n&&r.isFunction(n.dispose)&&n.dispose(),t=new o({model:s,parentView:e}),e.todoSubViews[i]=t}),e.addAll()},this),this.listenTo(this.todos,"add",function(e){this.addOne(e)},this),this.listenTo(this.todos,"change:completed",function(e){this.addOne(e)},this),this.listenTo(this.todos,"remove",function(e){var t=e.get("_id")||e.cid;delete this.todoSubViews[t]},this),this.listenTo(this.todos,"create_success",function(e){this.todoSubViews[e.get("_id")]=this.todoSubViews[e.cid],delete this.todoSubViews[e.cid],this.addOne(e)})},fetchTodos:function(){var e=this,n=this.list.get("todos");n&&n.length>0&&(log("local todos: "+n.length),e.todos.reset(void 0,{silent:!0}).add(n,{silent:!0}),e.todos.trigger("fetched"));var i=t.router.getLastRoute();/todolists\/edit/.test(i)||setTimeout(function(){e.__fetchTodosFromServer()},200)},__fetchTodosFromServer:function(){var e=this;return t.checkInternetConnection()?this.isFetching?!1:(this.isFetching=!0,n.showLoader(),this.todos.fetch({data:{list_id:this.listID},success:function(i,r){if(e.isFetching=!1,e.trigger("fetch-success"),n.hideLoader(),e.todos.trigger("fetched"),r&&r.length>0){var s=t.todolists.get(e.listID);s&&s.set({todos:r},{silent:!0})}},error:function(){e.isFetching=!1,n.hideLoader(),n.notify(__("error"))}}),void 0):!1},render:function(){return this},getTodoSubview:function(e){var t=e.get("_id")||e.cid,n=this.todoSubViews[t];return n?n.model=e:n=this.todoSubViews[t]=new o({model:e,parentView:this}),n?n:!1},addOne:function(e,t){var n=this.getTodoSubview(e);n&&(t||n.$el.prependTo(e.get("completed")?this.$completedList:this.$uncompletedList),n.render(),n.$el.css("opacity",1))},addAll:function(){this.$uncompletedList.empty(),this.$completedList.empty();var e,t=this,n=document.createDocumentFragment(),i=document.createDocumentFragment();this.todos.each(function(r){e=t.getTodoSubview(r),e.render(),r.get("completed")?i.appendChild(e.el):n.appendChild(e.el)},this),this.uncompletedListEl.appendChild(n),this.completedListEl.appendChild(i)}})}),define("text!templates/todos/clearcompletedbtn.html",[],function(){return"\n<a id=\"clear-completed\" href=\"#\" class=\"<%= completed ? '' : 'disabled' %> destructive\">\n<%- __('delete') %>\n</a>\n\n<p class=\"aog-green-text green-header\"><%- __('completedTodos', {completed: completed}) %></p>\n"}),define("views/todos/clearcompletedbtn",["require","app","views/base","text!templates/todos/clearcompletedbtn.html","lodash","zepto","common"],function(e){"use strict";var t=e("app"),n=e("views/base"),i=e("text!templates/todos/clearcompletedbtn.html"),r=e("lodash"),s=e("zepto"),o=e("common"),a={};return a[t.defaultClickEvent+" #clear-completed"]="clearCompleted",n.extend({template:r.template(i),events:a,initialize:function(e){if(this.collapsed=!0,!e||!e.listID)throw"clearcompletedbtn.js: no list id provided";this.listID=e.listID,this.todosColl=t.todosCollectionInstance,this.listenTo(this.todosColl,"all",this.render)},render:function(){var e=this.todosColl.completed().length;this.renderSelf({completed:e})},clearCompleted:function(e){var n=this;e.preventDefault();var i=s(e.currentTarget);if(i.hasClass("disabled"))return!1;var r=function(e){return e?(o.showLoader(),n.todosColl.destroyCompleted(function(e,i){if(o.hideLoader(),e&&o.notify(__("error")),i){var r=n.todosColl,s=n.listID;if(r&&s){r=r.toJSON();var a=t.todolists.get(s);a&&a.set({todos:r},{silent:!0})}}}),void 0):!1};return setTimeout(function(){o.dialog(__("really"),r,!0)},20),!1}})}),define("views/todos/todoscontainer",["require","lodash","app","common","zepto","models/todo","text!templates/todos/todoscontainer.html","views/base","views/todos/todosview","views/todos/clearcompletedbtn"],function(e){"use strict";var t=e("lodash"),n=e("app"),i=e("common"),r=e("zepto"),s=e("models/todo"),o=e("text!templates/todos/todoscontainer.html"),a=e("views/base"),l=e("views/todos/todosview"),u=e("views/todos/clearcompletedbtn"),c={};return c["keyup #new-todo-title"]="validateAndSaveOnEnter",c["blur #new-todo-title"]="createTodo",a.extend({id:"todoscontainer",template:t.template(o),events:c,initialize:function(e){if(!e||!e.listID)throw{message:"no list id or todosCollectionInstance provided"};this.listID=e.listID,this.todolist=n.todolists.get(e.listID),this.todos=n.todosCollectionInstance},dispose:function(){var e=function(e){e&&t.isFunction(e.dispose)&&e.dispose()};e(this.todosView),e(this.clearBtn),a.prototype.dispose.call(this)},render:function(){var e=n.todolists.get(this.listID);return this.renderSelf({listID:this.listID,common:i,todolist:this.todolist?this.todolist.toJSON():{}}),this.renderHeader({showHomeButton:!0,showListEditButton:!0,listID:this.listID,el:r("header",this.el)[0],title:e.get("title")}),this.todosView=new l({el:r("#todosview",this.el)[0],todosInstance:this.todos,listID:this.listID}),this.$input=r("#new-todo-title",this.el),this.$save=r("#save-todo",this.el),this.clearBtn=new u({el:r("#clear-completed-btn-view",this.el),listID:this.listID}),this.clearBtn.render(),this},validateNewTodo:function(){var e=this.$input.val().length>0&&1024>=this.$input.val().length;return e},validateAndSaveOnEnter:function(e){if(this.validateNewTodo()){var t=e?e.keyCode||e.which:null;13===t&&this.createTodo()}},createTodo:function(e){var t=this;if(e&&e.preventDefault(),!this.validateNewTodo())return!1;var r=new s({list_id:this.listID,title:this.$input.val(),completed:!1});t.todos.add(r),n.todosCollectionInstance.trigger("reset"),i.showLoader(),this.$input.val(""),r.save(null,{success:function(e){i.hideLoader(),e.trigger("create_success",e);var n=e.collection,r=e.get("todolist");n&&r&&(n=n.toJSON(),t.__updateTodosCollection(r,n))},error:function(e,n){var s=JSON.parse(n.responseText),o=__("error");s&&s.message&&s.message.key&&(o=__(s.message.key)),i.hideLoader(),i.notify(o),t.todos.remove(r)}})},pushUpdate:function(e,t){switch(e){case"create_todo":this.todos.add(new s(t));break;case"update_todo":var n=this.todos.get(t._id);if(!n)return!1;n.set(t);break;case"delete_todo":this.todos.remove(t._id);break;case"delete_todos":var i=this,r=t;r.forEach(function(e){i.todos.remove(e._id)})}var o=this.todos.toJSON();this.__updateTodosCollection(this.listID,o)},refetchTodos:function(){this.todosView&&this.todosView.__fetchTodosFromServer()},__updateTodosCollection:function(e,t){var i=n.todolists.get(e);i&&i.set({todos:t},{silent:!0})}})}),define("text!templates/login.html",[],function(){return'<header></header>\n\n<div id="login-form" class="content">\n    <input class="login-input" placeholder="<%= __(\'userDisplayEmail\') %>"    type="email"    id="email">\n    <input class="login-input" placeholder="<%= __(\'userDisplayPassword\') %>" type="password" id="password">\n\n    <button id="login-btn" class="aog-button aog-big aog-green" disabled><%= __(\'login\') %></button>\n\n    <br/>\n    <div class="aog-centered">\n        <a href="<%- __app_config__.WEBSITE_BASE_URL + \'password/recover?lang=\' + app.lang %>">\n            <%= __(\'recoverPasswort\') %>\n        </a>\n    </div>\n</div>\n'}),define("views/login",["require","zepto","lodash","app","common","text!templates/login.html","views/base"],function(e){"use strict";var t=e("zepto"),n=e("lodash"),i=e("app"),r=e("common"),s=e("text!templates/login.html"),o=e("views/base"),a={};return a["keyup .login-input"]="validate",a[i.defaultClickEvent+" #login-btn"]="login",o.extend({id:"login-view",title:function(){return __("login")},events:a,initialize:function(){this.template=n.template(s)},dispose:function(){o.prototype.dispose.call(this)},render:function(){this.renderSelf({app:i}),this.renderHeader({showBackButton:!0,el:t("header",this.el)[0],title:this.title()});var e=r.store.get("email");return this.$email=t("#email",this.el),this.$pw=t("#password",this.el),this.$loginBtn=t("#login-btn",this.el),e&&this.$email.val(e),this},validate:function(e){var t=e.keyCode||e.which,n=this.$email.val().length>0&&this.$pw.val().length>0;try{this.$loginBtn.attr("disabled",n?null:!0)}catch(e){}return 13===t&&this.login(),n},_toggleButtons:function(e){try{this.$loginBtn.attr("disabled",e?null:!0)}catch(t){}},login:function(e){e&&e.preventDefault();var t=this;if(this.$loginBtn.attr("disabled"))return!1;var n=r.escape(this.$email.val()),s=r.escape(this.$pw.val());return r.store.set("email",n),i.checkInternetConnection()?(this._toggleButtons(!1),r.showDefaultLoader(),this.$email.blur(),this.$pw.blur(),i.login(n,s,function(e,n){return r.hideDefaultLoader(),e?(t._toggleButtons(!0),r.notify(e,5e3)):(n&&i.router.go("todolists"),void 0)}),!1):(r.notify(__("noInternetConnection")),!1)}})}),define("text!templates/signup.html",[],function(){return'<header></header>\n\n<div id="signup-form" class="content">\n    <input placeholder="<%= __(\'userDisplayName\') %>"\n        class="signup-input" type="text" id="display_name">\n\n    <input placeholder="<%= __(\'userDisplayEmail\') %>"\n        class="signup-input" type="email" id="email">\n\n    <input placeholder="<%= __(\'userDisplayPassword\') %>" class="signup-input" type="password" id="password">\n    <input placeholder="<%= __(\'userDisplayPasswordAgain\') %>" class="signup-input" type="password" id="password2">\n    <p id="pw-error" class="error-msg small hidden"><%- __(\'passwordError\') %></p>\n\n    <p><%= __(\'termsAcceptText\') %></p>\n    <button id="signup" class="aog-button aog-big aog-green" disabled>\n        <%= __(\'signupButton\') %>\n    </button>\n</div>\n'}),define("views/signup",["require","lodash","zepto","app","common","text!templates/signup.html","views/base"],function(e){"use strict";var t=e("lodash"),n=e("zepto"),i=e("app"),r=e("common"),s=e("text!templates/signup.html"),o=e("views/base"),a={};return a["keyup .signup-input"]="validate",a["blur #password2"]="validateOnFormInputBlur",a[i.defaultClickEvent+" #signup"]="signup",o.extend({id:"signup-view",title:function(){return __("signup")},events:a,initialize:function(){this.template=t.template(s)},render:function(){return this.renderSelf(),this.renderHeader({showBackButton:!0,el:n("header",this.el)[0],title:this.title()}),this.$display_name=n("#display_name",this.el),this.$email=n("#email",this.el),this.$pw=n("#password",this.el),this.$pw2=n("#password2",this.el),this.$pwErr=n("#pw-error",this.el),this.$signupBtn=n("#signup",this.el),this.$cancelBtn=n(".cancel",this.el),this},validate:function(){var e=this.$email.val().length>0&&this.$pw.val().length>5&&this.$pw2.val().length>5&&/@/.test(this.$email.val());return n.trim(this.$pw.val())!==n.trim(this.$pw2.val())&&(e=!1),this.$signupBtn.attr("disabled",e?null:!0),e&&this.$pwErr.addClass("hidden"),e},validateOnFormInputBlur:function(){var e=n("#pw-error",this.el);e.toggleClass("hidden",this.validate())},_toggleButtons:function(e){this.$cancelBtn.attr("disabled",e?null:!0),this.$signupBtn.attr("disabled",e?null:!0)},signup:function(e){e.preventDefault();var t=n(e.currentTarget);if(t.attr("disabled"))return!1;if(!i.checkInternetConnection())return r.notify(__("noInternetConnection")),!1;if(!this.validate())return!1;var s=this,o=r.escape(n.trim(this.$display_name.val())),a=r.escape(n.trim(this.$email.val())),l=r.escape(n.trim(this.$pw.val())),u=r.escape(n.trim(this.$pw2.val()));return l!==u?!1:(this._toggleButtons(!1),this.$display_name.blur(),this.$email.blur(),this.$pw.blur(),this.$pw2.blur(),r.showDefaultLoader(),n.ajax({cache:!1,timeout:i.AJAX_TIMEOUT,type:"POST",dataType:"json",data:{display_name:o,email:a,p1:l,lang:i.lang},url:i.API_ROOT+"/api/v1/signup",success:function(e){return r.hideDefaultLoader(),e.error?(s._toggleButtons(!0),r.notify(__(e.error),8e3),void 0):(r.store.set("email",a),setTimeout(function(){r.notify(__("signupSuccessMessage"),8e3)},100),i.router.setAuthenticated(e),i.router.go("todolists"),i.activityCollection.addActivity({key:"welcome_message_after_signup"}),void 0)},error:function(){r.hideDefaultLoader(),r.notify(__("error"),3e3),s._toggleButtons(!0)}}),!1)}})}),define("text!templates/lists/listview.html",[],function(){return'<header></header>\n\n<div class="content">\n    <% var len = app.todolists.length; %>\n\n    <h1 id="welcome">\n    <% if(user.display_name && user.display_name.length > 0) { %>\n    Hi <%- user.display_name %> !\n    <% } else { %>\n    loading...\n    <% } %>\n    </h1>\n\n    <input type="text" id="create-list" placeholder="<%- __(\'newList\') %>">\n\n    <div class="divider"></div>\n\n    <h2><%= __("lists") + \' (<span id="list-len">\' + len + \'</span>)\' %></h2>\n\n    <ul id="todolists" class="aog-list"></ul>\n\n    <div class="divider"></div>\n\n    <div id="activities"></div>\n    <br /><br />\n    <div class="divider"></div>\n\n    <a href="#settings" class="aog-button aog-big aog-white nav-settings">\n        <%= __(\'settings\') %>\n    </a>\n\n    <a href="#help" class="aog-button aog-big aog-white nav-help">\n        <%= __(\'help\') %>\n    </a>\n</div>\n'}),define("models/todolist",["require","backbone","app"],function(e){"use strict";var t=e("backbone"),n=e("app"),i=t.Model.extend({idAttribute:"_id",urlRoot:n.API_ROOT+"/api/v1/lists",defaults:{title:"",user:null,todos:[],participants:[]},validate:function(e){return"string"==typeof e.title&&(0===e.title.length||e.title.length>32)?__("listTitleError"):void 0},getUncompletedTodosCount:function(){var e=0,t=this.get("todos");return 0===t.length?0:(t.forEach(function(t){t.completed||(e+=1)}),e)}});return i}),define("text!templates/lists/todolist.html",[],function(){return""}),define("text!templates/lists/todolistitem.html",[],function(){return'<a class="show-list" href="#todolists/<%- todolist._id %>">\n    <%- todolist.title %><span class="count"><%- uncompletedTodosCount %></span>\n</a>\n'}),define("views/lists/todolistitem",["require","lodash","app","views/base","text!templates/lists/todolistitem.html"],function(e){"use strict";var t=e("lodash"),n=e("app"),i=e("views/base"),r=e("text!templates/lists/todolistitem.html"),s={};return i.extend({tagName:"li",events:s,template:t.template(r),initialize:function(e){var t=this;if(!e||!e.todolist)throw"todolistitem.js: no todolist model provided!";this.todolist=e.todolist,this.listenTo(this.todolist,"change",this.render),this.listenTo(this.todolist,"destroy",function(e){t._onDelete(e.get("_id"))})},render:function(){var e=this.todolist.toJSON();return this.renderSelf({todolist:e,uncompletedTodosCount:this.todolist.getUncompletedTodosCount()}),this},_onDelete:function(e){n.router.go("todolists"),n.todolists.remove(e)}})}),define("views/lists/todolist",["require","app","lodash","text!templates/lists/todolist.html","models/todolist","views/base","views/lists/todolistitem"],function(e){"use strict";var t=e("app"),n=e("lodash"),i=e("text!templates/lists/todolist.html"),r=e("models/todolist"),s=e("views/base"),o=e("views/lists/todolistitem"),a={};return s.extend({events:a,initialize:function(){this.template=n.template(i),this.listenTo(t.todolists,"add",this.addTodolistItem),this.listenTo(t.todolists,"remove",this.render),this.listenTo(t.todolists,"reset",this.reset)},reset:function(){this.$el.empty()},render:function(){var e=this;this.$el.empty();var i,r=document.createDocumentFragment();return n.each(t.todolists.models,function(t){i=e.getTodolistSubViewFromModel(t),i.render(),r.appendChild(i.el)}),this.el.appendChild(r),this},getTodolistSubViewFromModel:function(e){var t;return n.isFunction(e.trigger)||(e=new r(e)),t=new o({todolist:e})},addTodolistItem:function(e){var t=this.getTodolistSubViewFromModel(e);t.$el.appendTo(this.$el),t.render()}})}),define("text!templates/lists/activities.html",[],function(){return"<!-- Aktivitäten: nur zeigen wenn auch welche vorhanden -->\n<div class=\"divider\"></div>\n<h2><%- __('activities') %></h2>\n\n<% if(activities && activities.length === 0) { %>\n<p class=\"aog-green-text\"><%- __('no_activities') %></p>\n<% } else if(activities && activities.length > 1) { %>\n<a href=\"#\" class=\"remove-activities destructive\"><%- __('removeAll') %></a>\n<% } %>\n\n\n<% if(activities.length > 0) { %>\n<ul class=\"aog-list white-list\">\n    <% _.each(activities, function(activity) { %>\n    <li class=\"no-link\" id=\"activity-<%- activity.id %>\">\n        <% switch(activity.key) {\n            case 'invitation': %>\n            <p><%- __('acceptInvitationQuestion') %></p>\n\n            <p><%- __('from') %>:\n            <strong><%- activity.data.user.display_name || activity.data.user.email %></strong>\n            </p>\n\n            <p><%- __('list') %>:\n                <strong><%- activity.data.list.title %></strong>\n            </p>\n\n            <div>\n                <button class=\"accept-invitation aog-button aog-green\"\n                        data-user-id=\"<%- activity.data.user._id %>\"\n                        data-list-id=\"<%- activity.data.list._id %>\"\n                        data-activity-id=\"<%- activity.id %>\">\n                    <%- __('yes') %>\n                </button>\n                <button class=\"reject-invitation aog-button aog-red\"\n                        data-user-id=\"<%- activity.data.user._id %>\"\n                        data-list-id=\"<%- activity.data.list._id %>\"\n                        data-activity-id=\"<%- activity.id %>\">\n                    <%- __('no') %>\n                </button>\n            </div>\n            <% break; %>\n\n            <% case 'invitation_accepted': %>\n            <p><%- __('invitation_accepted', {username: activity.data.user.display_name, list: activity.data.list.title}) %></p>\n            <% break; %>\n\n            <% case 'invitation_rejected': %>\n            <p><%- __('invitation_rejected', {username: activity.data.user.display_name, list: activity.data.list.title}) %></p>\n            <% break; %>\n\n            <% case 'update_list': %>\n            <p><%- __('update_list', {list: activity.data.title}) %></p>\n            <% break; %>\n\n            <% case 'delete_list': %>\n            <p><%- __('delete_list', {list: activity.data.title}) %></p>\n            <% break; %>\n\n            <% case 'create_todo': %>\n            <p><%- __('create_todo', {todo: activity.data.title, list: activity.data.todolist.title}) %></p>\n            <% break; %>\n\n            <% case 'delete_todo': %>\n            <p><%- __('delete_todo', {todo: activity.data.title, list: activity.data.todolist.title}) %></p>\n            <% break; %>\n\n            <% case 'delete_todos': %>\n            <p><%- __('delete_todos', {str: activity.data.str, list: activity.data.list}) %></p>\n            <% break; %>\n\n            <% case 'list_access_removed': %>\n            <p><%- __('list_access_removed', {username: activity.data.user.display_name, list: activity.data.list.title}) %></p>\n            <% break; %>\n\n            <% case 'push_notification': %>\n            <p><%= activity.data.body + ' (' + common.fromNow(activity.data.timestamp, false, app.lang) + ')' %></p>\n            <% break; %>\n\n            <% case 'welcome_message_after_signup': %>\n            <p>Hi <%- app.user.get('display_name') %>!</p>\n            <p><%= __('welcome_message_after_signup') %></p>\n            <% break; %>\n        <% } /* end switch*/ %>\n\n        <% if(activity.key !== 'invitation') { %>\n        <!-- jede Notification (außer vom typ \"invitation\") hat einen \"remove-button\" -->\n        <div class=\"divider\"></div>\n        <a href=\"#\" class=\"remove-activity destructive\" data-activity-id=\"<%- activity.id %>\"><%- __('remove') %></a>\n        <% } %>\n    </li>\n    <% }); %>\n</ul>\n<% } %>\n"}),define("views/lists/activities",["require","lodash","zepto","app","common","text!templates/lists/activities.html","models/user","views/base"],function(e){"use strict";var t=e("lodash"),n=e("zepto"),i=e("app"),r=e("common"),s=e("text!templates/lists/activities.html"),o=e("models/user"),a=e("views/base"),l={};return l[i.defaultClickEvent+" .accept-invitation"]="acceptInvitation",l[i.defaultClickEvent+" .reject-invitation"]="rejectInvitation",l[i.defaultClickEvent+" .remove-activity"]="removeOneActivity",l[i.defaultClickEvent+" .remove-activities"]="removeAllActivities",a.extend({template:t.template(s),events:l,initialize:function(){this.template=t.template(s),this.user=i.user,this.listenTo(i.user,"change",this.render),this.listenTo(i.activityCollection,"add",this.render),this.listenTo(i.activityCollection,"remove",this.render),this.listenTo(i.activityCollection,"reset",this.render)},render:function(){var e=this.user?this.user.toJSON():new o;t.each(e.invite_list_ids,function(e){e.user&&e.list&&i.activityCollection.addActivity({key:"invitation",data:e,id:e.list._id+"_"+e.user._id},!0)});var n=i.activityCollection.toJSON();return this.renderSelf({app:i,common:r,activities:n}),this},acceptInvitation:function(e){e.preventDefault();var t=this,s=n(e.currentTarget),a=s.attr("data-user-id"),l=s.attr("data-list-id"),u=s.attr("data-activity-id"),c=function(e){if(!e)return!1;var n=new o({_id:t.user.get("_id"),issuer_user_id:a,list_id:l,add:!0});r.showLoader(),n.save(null,{success:function(e,t){r.hideLoader();var n=t.list,s=t.user;log("SUCCESS ADD: ",t),i.user.set(s),i.todolists.remove(n._id),i.todolists.add(n),i.storage.storeUser(s,function(){}),i.storage.storeListsForUser(i.user.get("_id"),i.todolists.toJSON(),function(){}),i.router.go("todolists/"+l),i.activityCollection.remove(u),i.socketWrapper&&i.socketWrapper.subscribeToList(l),r.notify(__("success"))},error:function(e,t){var n=__("error");t&&t.message&&(n=t.message),r.hideLoader(),r.notify(n)}})};r.dialog(__("really"),c,!0)},rejectInvitation:function(e){e.preventDefault();var t=this,s=n(e.currentTarget),a=s.attr("data-user-id"),l=s.attr("data-list-id"),u=s.attr("data-activity-id"),c=function(e){if(!e)return!1;var n=new o({_id:t.user.get("_id"),issuer_user_id:a,list_id:l,reject:!0});r.showLoader(),n.save(null,{success:function(e,t){r.hideLoader(),s.parent().parent().parent().parent().remove(),i.user.set(t),i.activityCollection.remove(u),r.notify(__("success"))},error:function(e,t){var n=__("error");t&&t.message&&(n=t.message),r.hideLoader(),r.notify(n)}})};r.dialog(__("really"),c,!0)},removeOneActivity:function(e){e.preventDefault();var t=n(e.currentTarget).attr("data-activity-id"),r=i.activityCollection.get(t);return r?"invitation"===r.key?!1:(n("#activity-"+t).remove(),setTimeout(function(){i.activityCollection.remove(t)},10),void 0):!1},removeAllActivities:function(e){e.preventDefault(),setTimeout(t.bind(function(){i.activityCollection.toJSON().forEach(function(e){e&&"invitation"!==e.key&&i.activityCollection.remove(e.id,{silent:!0})}),this.render()},this),10)}})}),define("views/lists/listview",["lodash","zepto","app","common","text!templates/lists/listview.html","models/user","models/todolist","views/base","views/lists/todolist","views/lists/activities","moment"],function(e,t,n,i,r,s,o,a,l,u){"use strict";var c={};return c["keyup #create-list"]="createTodolist",c["blur #create-list"]="createTodolistOnBlur",a.extend({id:"todolist-main-view",title:function(){return __("lists")},dispose:function(){this.todolistsView&&e.isFunction(this.todolistsView.dispose)&&this.todolistsView.dispose(),this.activitiesView&&e.isFunction(this.activitiesView.dispose)&&this.activitiesView.dispose(),a.prototype.dispose.call(this)},events:c,initialize:function(){this.template=e.template(r),this.user=n.user,this.listenTo(n.user,"change",function(){this.$welcome&&this.$welcome.html("Hi "+this.user.get("display_name")),this.$listLen&&this.$listLen.html(n.todolists.length)},this),this.todolists=n.todolists,this.listenTo(this.todolists,"remove",this.render)},render:function(){var e=this.user?this.user.toJSON():new s;return this.renderSelf({user:e,app:n}),this.renderHeader({el:t("header",this.el)[0],title:this.title()}),this.$title=t("#create-list",this.el),this.$welcome=t("#welcome",this.el),this.$listLen=t("span#list-len",this.el),this.todolistsView=new l({el:t("ul#todolists",this.el)[0]}),this.todolistsView.render(),this.activitiesView=new u({el:t("#activities",this.el)[0]}),this.activitiesView.render(),this},createTodolist:function(e){var t=e.keyCode||e.which;return 13===t?this.$title.blur():void 0},createTodolistOnBlur:function(e){e&&e.preventDefault();var t=this.$title.val().trim();return t&&(0===t.length||t.length>32)?!1:(this._createList(t),void 0)},_createList:function(e){if(!e||0===t.trim(e).length)return!1;var r=this,s={user_id:this.user.get("_id"),todos:[],title:e},a=new o(s);setTimeout(function(){r.$title.val("")},10),i.showLoader(),a.save(null,{success:function(e,t){i.hideLoader(),n.todolists.add(t),n.router.go("todolists/"+t._id);var r=n.todolists.toJSON();n.storage.storeListsForUser(n.user.get("_id"),r,function(){}),n.socketWrapper&&n.socketWrapper.subscribeToList(e.get("_id"))},error:function(e,t){var n=JSON.parse(t.responseText),r=__("error");n&&n.message&&n.message.key&&(r=__(n.message.key)),i.hideLoader(),i.notify(r)}})},pushUpdate:function(e,t){switch(e){case"update_list":var i=n.todolists.get(t._id);i.set(t);break;case"delete_list":n.todolists.remove(t._id)}var r=n.todolists.toJSON();n.storage.storeListsForUser(n.user.get("_id"),r,function(){})}})}),define("text!templates/todos/todolist.editview.html",[],function(){return'<header></header>\n\n<div class="content">\n    <% if(todolist && todolist.title) { %>\n    <input id="list-title" type="text"\n           placeholder="<%= __(\'todolistTitle\') %>"\n           value="<%- todolist.title %>">\n\n   <p id="timestamp" class="aog-green-text centered small"><%- __(\'updated\') %> <%- common.fromNow(todolist.updated_at, false, app.lang) %> <%- __(\'by\') %> <%- common.getUser(todolist, true) %></p>\n\n    <button class="delete-list aog-button aog-red aog-big">\n    <%- __(\'deleteList\') %>\n    </button>\n    <% } %>\n\n    <div class="divider"></div>\n\n    <h2><%- __(\'shareList\') %></h2>\n\n    <small class="aog-green-text"><%= __(\'whoWorksWithThisList\') %></small>\n    <input id="search-input" type="email"\n           placeholder="<%= __(\'searchForUsers\') %>">\n\n    <div id="search-results"></div>\n\n    <div class="divider"></div>\n\n    <% if(todolist && todolist.participants && todolist.participants.length > 0) { %>\n    <p class="aog-green-text"><%= __(\'allowedUsers\') %></p>\n    <% } %>\n    <div class="share-settings">\n        <ul class="aog-list white-list">\n        <% _.each(todolist.participants, function(u) { %>\n        <li class="no-link">\n            <p><%- u.display_name + \' (\' + u.email + \')\'  %><%- u.is_owner ? \'(\' + __(\'owner\') + \')\' : \'\' %></p>\n\n            <% // cannot remove himself or owner\n            if(!u.is_owner && (u._id != theUser._id)) { %>\n            <div class="divider"></div>\n\n            <a href="#" id="<%- \'user_\' + u._id %>"\n                class="destroy destructive centered"\n                    data-user-id="<%- u._id %>"><%- __(\'remove\') %></a>\n            <% } %>\n        </li>\n        <% }); %>\n        </ul>\n\n        <br/>\n\n    </div>\n</div>\n'}),define("views/todos/todolist.editview",["lodash","zepto","app","common","text!templates/todos/todolist.editview.html","views/base","models/user"],function(e,t,n,i,r,s,o){"use strict";var a={};return a[n.defaultClickEvent+" .delete-list"]="deleteList",a["keyup #list-title"]="validateAndSaveOnEnter",a["keyup #search-input"]="searchUsers",a[n.defaultClickEvent+" .add-user-to-list"]="inviteUser",a[n.defaultClickEvent+" .destroy"]="dropAddedUser",s.extend({id:"todolist-edit-view",template:e.template(r),title:function(){return this.todolist.get("title")},events:a,initialize:function(e){var r=this;if(!e.todolist)throw"TodolistEditView: no todolist provided";this.todolist=e.todolist,this.listenTo(this.todolist,"change:title",function(){t("#title",this.el).html(i.escape(this.todolist.get("title")))},this),this.lastUserSearchQuery="",n.off("header-save"),n.on("header-save",function(e){r.saveList(e)})},render:function(){var e=this.todolist.toJSON();return this.renderSelf({app:n,common:i,todolist:e,theUser:n.user.toJSON()}),this.renderHeader({showBackButton:!0,showSaveButton:!0,el:t("header",this.el)[0],title:this.title()}),this.$listTitle=t("#list-title",this.el),this.$searchInput=t("#search-input",this.el),this.$searchResults=t("#search-results",this.el),this.$timestamp=t("#timestamp",this.el),this},validate:function(e){e&&e.preventDefault();var n=!0,r=this.$listTitle.val().trim();
return(0===r.length||r.length>32)&&(n=!1),r===this.todolist.get("title")&&(n=!1),this.$saveList=t("#header-save"),this.$saveList.length>0&&this.$saveList.toggleClass("disabled",!n),i.lockScreen(),n},validateAndSaveOnEnter:function(e){var t=e.keyCode||e.which,n=this.validate();13===t&&n&&this.saveList()},saveList:function(e){var t=this;e&&e.preventDefault();var r=this.$listTitle.val().trim(),s=n.user.toJSON(),o={user_id:n.user.get("_id"),title:r,updated_at:(new Date).getTime(),updated_by:s};return this.todolist.set(o),this.todolist.hasChanged("title")?(t.$saveList.addClass("disabled"),i.showLoader(),this.$timestamp.html(__("updated")+" "+i.fromNow((new Date).getTime(),!1,n.lang)+" "+__("by")+" "+s.display_name),i.unlockScreen(),this.todolist.save(null,{patch:!0,success:function(){if(i.hideLoader(),n.todolists){var e=n.todolists.toJSON();n.storage.storeListsForUser(n.user.get("_id"),e,function(){})}},error:function(e,n){i.hideLoader(),t.$saveList.removeClass("disabled");var r=__("error");n&&n.message&&(r=n.message),i.notify(r,5e3)}}),void 0):!1},searchUsers:function(e){e.preventDefault();var n,r=this;if(n=this.$searchInput.val(),0===t.trim(n).length)return this.$searchResults.html(""),!1;if(this.lastUserSearchQuery===n)return!1;if(this.lastUserSearchQuery=n,i.isValidMail(n)){var s=[];s.push('<button class="add-user-to-list aog-button aog-green" '),s.push('data-email="'+n+'">'),s.push(__("addUserToList",{name:n.replace("@"," [at] ")})),s.push("</button></li>"),r.$searchResults.html(s.join("")),i.scrollBottom(),i.lockScreen()}else i.unlockScreen(),r.$searchResults.empty()},inviteUser:function(e){e.preventDefault();var r=this,s=t(e.currentTarget),a=s.attr("data-email"),l=this.todolist.get("_id");if(!a||!l)return n.handleError("shit no user-id and no list id found - todolistdialog.js"),!1;var u=function(e){if(!e)return!1;i.unlockScreen();var t=new o({_id:n.user.get("_id"),invite:!0,email:a,list_id:l});r.$searchResults.html(""),r.$searchInput.val(""),i.showLoader(),t.save(null,{success:function(){i.hideLoader(),i.notify(__("inviteSuccess"))},error:function(){i.hideLoader(),i.notify(__("inviteError"))}})};i.dialog(__("reallyAddUser",{email:a}),u,!0)},dropAddedUser:function(e){e.preventDefault();var r=this,s=t(e.currentTarget);if(s.attr("disabled"))return!1;var a=s.attr("data-user-id"),l=this.todolist.get("_id"),u=new o({remove:!0,_id:n.user.get("_id"),user_id_to_be_removed:a,list_id:l}),c=function(e){return e?(i.showLoader(),u.save(null,{success:function(e,o){if(i.hideLoader(),setTimeout(function(){t("#"+s.attr("id")).remove()},10),o&&o.list){var a=o.list;n.todolists.remove(a._id),n.todolists.add(a),n.storage.storeListsForUser(n.user.get("_id"),n.todolists.toJSON(),function(){})}r.todolist.trigger("change"),r.render()},error:function(e,t){var n=__("error");t&&t.message&&(n=t.message),i.hideLoader(),i.notify(n)}}),void 0):!1};i.dialog(__("really"),c,!0)},deleteList:function(e){e.preventDefault();var r=t(e.currentTarget);if(r.attr("disabled"))return!1;var s=this,o=function(e){return e?(i.showLoader(),s.todolist.destroy({success:function(){if(i.hideLoader(),n.todolists){var e=n.todolists.toJSON();n.storage.storeListsForUser(n.user.get("_id"),e,function(){})}},error:function(e,t){var n=__("error");t&&t.message&&(n=t.message),i.hideLoader(),i.notify(n)}}),void 0):!1};i.dialog(__("really"),o,!0)}})}),define("router",["require","app","common","lodash","zepto","backbone","models/user","JrFork","views/start","views/settings","views/help","views/todos/todoscontainer","views/login","views/signup","views/lists/listview","views/todos/todolist.editview"],function(e){"use strict";var t,n,i=e("app"),r=e("common"),s=e("lodash"),o=e("zepto"),a=e("backbone"),l=e("models/user"),u=e("JrFork"),c=e("views/start"),d=e("views/settings"),h=e("views/help"),f=e("views/todos/todoscontainer"),p=e("views/login"),m=e("views/signup"),g=e("views/lists/listview"),v=e("views/todos/todolist.editview");return n={"":"index",start:"index",signup:"signup",login:"login",settings:"settings",help:"help",logout:"logout",todolists:"showTodolists","todolists/edit/:id":"editTodolist","todolists/:id":"showTodosOfList"},t=u.Router.extend({routes:n,initialize:function(e){this.lastRoute="",this.currentView=null,this.isAuth=e,this.$ghostbusterLayer=o("#ghostbuster-overlay")},onTranslationsLoaded:function(){this.currentView&&this.currentView.render()},checkLocalDatabaseAndSync:function(){var e=this;return log("=== CHECKING LOCAL DB!"),i.storage?this.isAuth?(i.storage.fetchUser(function(t,n){t&&log("error fetching user: "+t);var r=a.history.fragment;return!n&&"start"!==r&&r.length>0?(setTimeout(function(){e.go(r)},100),!1):n?(log("=== GOT USER, NOW RENDERING: ",n),i.storage.fetchListsForUser(n._id,function(t,r){!t&&r&&(n.todolists=r);var s=!0;i.router.setAuthenticated(n,s),setTimeout(function(){window.io||i.fetchUser(function(t,n){return t?e.deauthenticateUser():(i.storage.storeListsForUser(i.user.get("_id"),n.todolists),i.socketWrapper&&null!==i.socketWrapper.socket&&i.socketWrapper.subscribeToLists(i.todolists),void 0)})},1)}),void 0):!1}),void 0):!1:!1},setAuthenticated:function(e,t){log("=== AppRouter.setAuthenticated() YUHU I AM LOGGED IN: ",e.email,e),i.API_TOKEN=e.API_TOKEN,i.todolistView||this.go("todolists",!0),i.isLoggedIn=!0,this.isAuth=!0,r.store.set("is-auth","1");var n=[];if(s.each(e.todolists,function(e){n.push(e)}),i.todolists.reset(),i.todolists.add(n),i.changeLang(e.lang?e.lang:i.lang),e.lang||(e.lang=i.lang),i.user.set(e),i.initAndRegisterPushNotifications(),!t){var o=i.user.get("_id");console.log("STORING USER, LISTS AND TODOS IN LOCAL DB"),i.storage.storeUser(e,function(e,t){t===!0&&n.length>0&&i.storage.storeListsForUser(o,n,function(){s.each(i.todolists.toJSON(),function(e){var t=e.todos;if(t&&t.length>0){var n=i.todolists.get(e._id);n&&n.set({todos:t},{silent:!0})}})})})}},deauthenticateUser:function(){var e=this;setTimeout(function(){e.go("start")},1),this.isAuth=!1,i.isLoggedIn=!1,r.store.drop("is-auth"),r.unlockScreen(),i.todolists.reset(),i.user=new l,o(".hide-me").each(function(){o(this).addClass("hidden")}),i.storage&&i.storage.___dropTables(function(){i.storage.initDatabase()}),i.socketWrapper&&setTimeout(function(){i.socketWrapper.disconnect(!0,!0)},1e3),i.activityCollection.reset()},index:function(){if(this.isAuth===!0)return this.go("todolists");var e=new c;this.renderView(e)},signup:function(){if(this.isAuth===!0)return this.go("todolists");var e=new m;this.renderView(e)},login:function(){if(this.isAuth===!0)return this.go("todolists");var e=new p;this.renderView(e)},showTodolists:function(){i.todolistView=new g({user:i.user}),this.renderView(i.todolistView)},settings:function(){this.settingsView=new d,this.renderView(this.settingsView)},showTodosOfList:function(e){i.todosContainer=new f({listID:e}),this.renderView(i.todosContainer)},editTodolist:function(e){var t=i.todolists.get(e);t||(r.notify(__("error")),this.go("todolists/"+e)),i.todolistEditView=new v({todolist:t}),this.renderView(i.todolistEditView)},help:function(){var e=new h;this.renderView(e)},logout:function(){return this.deauthenticateUser(),o.ajax({type:"POST",dataType:"json",url:i.API_ROOT+"/api/v1/logout",success:function(){},error:function(){r.notify(__("error"))}}),!1},renderView:function(e){var t=this;this.__toggleGhostBusterOverlay(!0),this.renderScreen(e,__app_config__.touch,function(){r.unlockScreen(),t.__toggleGhostBusterOverlay(!1),setTimeout(function(){t.currentView&&s.isFunction(t.currentView.dispose)&&t.currentView.dispose(),t.currentView=e},200)}),r.closeNotify()},__toggleGhostBusterOverlay:function(e){return i.isBrowser?!1:(e?this.$ghostbusterLayer.show():this.$ghostbusterLayer.hide(),void 0)},go:function(e,t){if(!e)throw"app.router.go(route) - no route provided";u.Navigator.navigate(e,{animation:t?null:{type:u.Navigator.animations.SLIDE_STACK,direction:u.Navigator.directions.LEFT}})},setLastRoute:function(e){this.lastRoute=e},getLastRoute:function(){return this.lastRoute}})}),define("collections/todos",["require","lodash","zepto","backbone","app","models/todo"],function(e){"use strict";var t=e("lodash"),n=e("zepto"),i=e("backbone"),r=e("app"),s=e("models/todo"),o=i.Collection.extend({model:s,url:r.API_ROOT+"/api/v1/todos",completed:function(){return this.filter(function(e){return e.get("completed")})},remaining:function(){return this.without.apply(this,this.completed())},comparator:function(e){var t=parseInt(e.get("updated_at"),10);return t?-t:e.get("completed")},destroyCompleted:function(e){var i=this.completed(),s=[];this.remove(i,{}),t.each(i,function(e){s.push(e.get("_id"))}),n.ajax({cache:!1,timeout:r.AJAX_TIMEOUT,type:"DELETE",dataType:"json",data:{todo_ids:s},url:r.API_ROOT+"/api/v1/todos",success:function(n){return n&&(n.error||n.message)?e(n.error||n.message):(t.each(i,function(e){e.trigger("destroy")}),e(null,{success:!0}),void 0)},error:function(){e(__("error"))}})}});return new o}),define("collections/todolists",["app","lodash","backbone","models/todolist"],function(e,t,n,i){"use strict";var r=n.Collection.extend({model:i,url:e.API_ROOT+"/api/v1/lists",comparator:function(e){var t=e.get("updated_at");return-t}});return r}),define("models/activity",["app","lodash","backbone"],function(e,t,n){"use strict";var i=n.Model.extend({idAttribute:"id",defaults:{key:"",data:{},created_at:null}});return i}),define("collections/activities",["app","lodash","backbone","common","models/activity"],function(e,t,n,i,r){"use strict";var s=n.Collection.extend({model:r,__invitationAlreadyExists:function(e){var n=!1;return this.each(function(i){return i=i.toJSON(),e.key===i.key&&t.isEqual(e.data,i.data)?(n=!0,void 0):void 0}),n},addActivity:function(t,n){if(n===void 0&&(n=!1),this.__invitationAlreadyExists(t))return!1;t=new r(t);var s=i.random(16);t.set({id:s,created_at:i.now(e.lang)},{silent:!0}),this.add(t,{silent:n})},comparator:function(e){var t=new Date(e.get("created_at")).getTime();return-t}});return s}),define("cryptojs",[],function(){var e=e||function(e,t){var n={},i=n.lib={},r=function(){},s=i.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;e>r;r++)t[i+r>>>2]|=(255&n[r>>>2]>>>24-8*(r%4))<<24-8*((i+r)%4);else if(n.length>65535)for(r=0;e>r;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;t>i;i+=4)n.push(0|4294967296*e.random());return new o.init(n,t)}}),a=n.enc={},l=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;e>i;i++){var r=255&t[i>>>2]>>>24-8*(i%4);n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-4*(i%8);return new o.init(n,t/2)}},u=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;e>i;i++)n.push(String.fromCharCode(255&t[i>>>2]>>>24-8*(i%4)));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-8*(i%4);return new o.init(n,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,s=this.blockSize,a=r/(4*s),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*s,r=e.min(4*t,r),t){for(var l=0;t>l;l+=s)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=r}return new o.init(l,r)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=n.algo={};return n}(Math);return function(){var t=e,n=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var r=0;n>r;r+=3)for(var s=(255&t[r>>>2]>>>24-8*(r%4))<<16|(255&t[r+1>>>2]>>>24-8*((r+1)%4))<<8|255&t[r+2>>>2]>>>24-8*((r+2)%4),o=0;4>o&&n>r+.75*o;o++)e.push(i.charAt(63&s>>>6*(3-o)));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,i=this._map,r=i.charAt(64);r&&(r=e.indexOf(r),-1!=r&&(t=r));for(var r=[],s=0,o=0;t>o;o++)if(o%4){var a=i.indexOf(e.charAt(o-1))<<2*(o%4),l=i.indexOf(e.charAt(o))>>>6-2*(o%4);r[s>>>2]|=(a|l)<<24-8*(s%4),s++}return n.create(r,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function n(e,t,n,i,r,s,o){return e=e+(t&n|~t&i)+r+o,(e<<s|e>>>32-s)+t}function i(e,t,n,i,r,s,o){return e=e+(t&i|n&~i)+r+o,(e<<s|e>>>32-s)+t}function r(e,t,n,i,r,s,o){return e=e+(t^n^i)+r+o,(e<<s|e>>>32-s)+t}function s(e,t,n,i,r,s,o){return e=e+(n^(t|~i))+r+o,(e<<s|e>>>32-s)+t}for(var o=e,a=o.lib,l=a.WordArray,u=a.Hasher,a=o.algo,c=[],d=0;64>d;d++)c[d]=0|4294967296*t.abs(t.sin(d+1));a=a.MD5=u.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;16>o;o++){var a=t+o,l=e[a];e[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var o=this._hash.words,a=e[t+0],l=e[t+1],u=e[t+2],d=e[t+3],h=e[t+4],f=e[t+5],p=e[t+6],m=e[t+7],g=e[t+8],v=e[t+9],_=e[t+10],b=e[t+11],y=e[t+12],w=e[t+13],x=e[t+14],T=e[t+15],S=o[0],k=o[1],E=o[2],D=o[3],S=n(S,k,E,D,a,7,c[0]),D=n(D,S,k,E,l,12,c[1]),E=n(E,D,S,k,u,17,c[2]),k=n(k,E,D,S,d,22,c[3]),S=n(S,k,E,D,h,7,c[4]),D=n(D,S,k,E,f,12,c[5]),E=n(E,D,S,k,p,17,c[6]),k=n(k,E,D,S,m,22,c[7]),S=n(S,k,E,D,g,7,c[8]),D=n(D,S,k,E,v,12,c[9]),E=n(E,D,S,k,_,17,c[10]),k=n(k,E,D,S,b,22,c[11]),S=n(S,k,E,D,y,7,c[12]),D=n(D,S,k,E,w,12,c[13]),E=n(E,D,S,k,x,17,c[14]),k=n(k,E,D,S,T,22,c[15]),S=i(S,k,E,D,l,5,c[16]),D=i(D,S,k,E,p,9,c[17]),E=i(E,D,S,k,b,14,c[18]),k=i(k,E,D,S,a,20,c[19]),S=i(S,k,E,D,f,5,c[20]),D=i(D,S,k,E,_,9,c[21]),E=i(E,D,S,k,T,14,c[22]),k=i(k,E,D,S,h,20,c[23]),S=i(S,k,E,D,v,5,c[24]),D=i(D,S,k,E,x,9,c[25]),E=i(E,D,S,k,d,14,c[26]),k=i(k,E,D,S,g,20,c[27]),S=i(S,k,E,D,w,5,c[28]),D=i(D,S,k,E,u,9,c[29]),E=i(E,D,S,k,m,14,c[30]),k=i(k,E,D,S,y,20,c[31]),S=r(S,k,E,D,f,4,c[32]),D=r(D,S,k,E,g,11,c[33]),E=r(E,D,S,k,b,16,c[34]),k=r(k,E,D,S,x,23,c[35]),S=r(S,k,E,D,l,4,c[36]),D=r(D,S,k,E,h,11,c[37]),E=r(E,D,S,k,m,16,c[38]),k=r(k,E,D,S,_,23,c[39]),S=r(S,k,E,D,w,4,c[40]),D=r(D,S,k,E,a,11,c[41]),E=r(E,D,S,k,d,16,c[42]),k=r(k,E,D,S,p,23,c[43]),S=r(S,k,E,D,v,4,c[44]),D=r(D,S,k,E,y,11,c[45]),E=r(E,D,S,k,T,16,c[46]),k=r(k,E,D,S,u,23,c[47]),S=s(S,k,E,D,a,6,c[48]),D=s(D,S,k,E,m,10,c[49]),E=s(E,D,S,k,x,15,c[50]),k=s(k,E,D,S,f,21,c[51]),S=s(S,k,E,D,y,6,c[52]),D=s(D,S,k,E,d,10,c[53]),E=s(E,D,S,k,_,15,c[54]),k=s(k,E,D,S,l,21,c[55]),S=s(S,k,E,D,g,6,c[56]),D=s(D,S,k,E,T,10,c[57]),E=s(E,D,S,k,p,15,c[58]),k=s(k,E,D,S,w,21,c[59]),S=s(S,k,E,D,h,6,c[60]),D=s(D,S,k,E,b,10,c[61]),E=s(E,D,S,k,u,15,c[62]),k=s(k,E,D,S,v,21,c[63]);o[0]=0|o[0]+S,o[1]=0|o[1]+k,o[2]=0|o[2]+E,o[3]=0|o[3]+D},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var s=t.floor(i/4294967296);for(n[(r+64>>>9<<4)+15]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[(r+64>>>9<<4)+14]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,i=0;4>i;i++)r=n[i],n[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=u._createHelper(a),o.HmacMD5=u._createHmacHelper(a)}(Math),function(){var t=e,n=t.lib,i=n.Base,r=n.WordArray,n=t.algo,s=n.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:n.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),s=r.create(),o=s.words,a=n.keySize,n=n.iterations;a>o.length;){l&&i.update(l);var l=i.update(e).finalize(t);i.reset();for(var u=1;n>u;u++)l=i.finalize(l),i.reset();s.concat(l)}return s.sigBytes=4*a,s}});t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),e.lib.Cipher||function(t){var n=e,i=n.lib,r=i.Base,s=i.WordArray,o=i.BufferedBlockAlgorithm,a=n.enc.Base64,l=n.algo.EvpKDF,u=i.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,i){return("string"==typeof n?m:p).encrypt(e,t,n,i)},decrypt:function(t,n,i){return("string"==typeof n?m:p).decrypt(e,t,n,i)}}}});i.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=n.mode={},d=function(e,n,i){var r=this._iv;r?this._iv=t:r=this._prevBlock;for(var s=0;i>s;s++)e[n+s]^=r[s]},h=(i.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();h.Encryptor=h.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;d.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),h.Decryptor=h.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=e.slice(t,t+i);n.decryptBlock(e,t),d.call(this,e,t,i),this._prevBlock=r}}),c=c.CBC=h,h=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,i=n<<24|n<<16|n<<8|n,r=[],o=0;n>o;o+=4)r.push(i);n=s.create(r,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},i.BlockCipher=u.extend({cfg:u.cfg.extend({mode:c,padding:h}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=i.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){e=a.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:n})}},p=i.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var r=e.createEncryptor(n,i);return t=r.finalize(t),r=r.cfg,f.create({ciphertext:t,key:n,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),n=(n.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=s.random(8)),e=l.create({keySize:t+n}).compute(e,i),n=s.create(e.words.slice(t),4*n),e.sigBytes=4*t,f.create({key:e,iv:n,salt:i})}},m=i.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:n}),encrypt:function(e,t,n,i){return i=this.cfg.extend(i),n=i.kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,e=p.encrypt.call(this,e,t,n.key,i),e.mixIn(n),e},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt),i.iv=n.iv,p.decrypt.call(this,e,t,n.key,i)}})}(),function(){for(var t=e,n=t.lib.BlockCipher,i=t.algo,r=[],s=[],o=[],a=[],l=[],u=[],c=[],d=[],h=[],f=[],p=[],m=0;256>m;m++)p[m]=128>m?m<<1:283^m<<1;for(var g=0,v=0,m=0;256>m;m++){var _=v^v<<1^v<<2^v<<3^v<<4,_=99^(_>>>8^255&_);r[g]=_,s[_]=g;var b=p[g],y=p[b],w=p[y],x=257*p[_]^16843008*_;o[g]=x<<24|x>>>8,a[g]=x<<16|x>>>16,l[g]=x<<8|x>>>24,u[g]=x,x=16843009*w^65537*y^257*b^16843008*g,c[_]=x<<24|x>>>8,d[_]=x<<16|x>>>16,h[_]=x<<8|x>>>24,f[_]=x,g?(g=b^p[p[p[w^b]]],v^=p[p[v]]):g=v=1}var T=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],s=0;e>s;s++)if(n>s)i[s]=t[s];else{var o=i[s-1];s%n?n>6&&4==s%n&&(o=r[o>>>24]<<24|r[255&o>>>16]<<16|r[255&o>>>8]<<8|r[255&o]):(o=o<<8|o>>>24,o=r[o>>>24]<<24|r[255&o>>>16]<<16|r[255&o>>>8]<<8|r[255&o],o^=T[0|s/n]<<24),i[s]=i[s-n]^o}for(t=this._invKeySchedule=[],n=0;e>n;n++)s=e-n,o=n%4?i[s]:i[s-4],t[n]=4>n||4>=s?o:c[r[o>>>24]]^d[r[255&o>>>16]]^h[r[255&o>>>8]]^f[r[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,l,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,d,h,f,s),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,r,s,o,a){for(var l=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],f=4,p=1;l>p;p++)var m=i[u>>>24]^r[255&c>>>16]^s[255&d>>>8]^o[255&h]^n[f++],g=i[c>>>24]^r[255&d>>>16]^s[255&h>>>8]^o[255&u]^n[f++],v=i[d>>>24]^r[255&h>>>16]^s[255&u>>>8]^o[255&c]^n[f++],h=i[h>>>24]^r[255&u>>>16]^s[255&c>>>8]^o[255&d]^n[f++],u=m,c=g,d=v;m=(a[u>>>24]<<24|a[255&c>>>16]<<16|a[255&d>>>8]<<8|a[255&h])^n[f++],g=(a[c>>>24]<<24|a[255&d>>>16]<<16|a[255&h>>>8]<<8|a[255&u])^n[f++],v=(a[d>>>24]<<24|a[255&h>>>16]<<16|a[255&u>>>8]<<8|a[255&c])^n[f++],h=(a[h>>>24]<<24|a[255&u>>>16]<<16|a[255&c>>>8]<<8|a[255&d])^n[f++],e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=h},keySize:8});t.AES=n._createHelper(i)}(),e}),define("libs/storage",["require","lodash","cryptojs"],function(e){"use strict";function t(e,t){try{e=JSON.stringify(e)}catch(n){}return log("##### DB STORAGE ##### ---> errorCB: "+e),d.isFunction(t)?(t(e),!1):!0}function n(e){return d.isFunction(e)?(e(null,!0),!1):!1}function i(e){var t;try{t=h.AES.encrypt(e,c,{format:s})}catch(n){return log(n.message+n.stack),null}return t}function r(e){var t;try{t=h.AES.decrypt(e,c,{format:s}),t=t.toString(h.enc.Utf8)}catch(n){return log(n.message?n.message+n.stack:n),null}return t}var s,o=1048576,a="atonego_v1_db",l=5*o,u="1.0",c='a|T5R#;4r3d$%6L-;^;>{+35>%>>Eh"QD3*+=?~#8+4-.hN:^"0_8:_.K;25V{??.@"330.yG8##22/:4)0/"1<+8/[,@2871-~5',d=e("lodash"),h=e("cryptojs");s={stringify:function(e){var t={ct:""+e.ciphertext};return e.iv&&(t.iv=""+e.iv),e.salt&&(t.s=""+e.salt),JSON.stringify(t)},parse:function(e){var t=JSON.parse(e),n=h.lib.CipherParams.create({ciphertext:h.enc.Hex.parse(t.ct)});return t.iv&&(n.iv=h.enc.Hex.parse(t.iv)),t.s&&(n.salt=h.enc.Hex.parse(t.s)),n}};var f=function(){this.BROWSER_SUPPORT="function"==typeof window.openDatabase};return f.prototype={hasBrowserSupport:function(){return this.BROWSER_SUPPORT},openDatabase:function(){return this.BROWSER_SUPPORT?(log("##### DB STORAGE ##### -> opening database: ",a,u,a,l),this.dbShell=window.openDatabase(a,u,a,l),void 0):!1},initDatabase:function(e){if(!this.BROWSER_SUPPORT)return n(e);var i=function(e){e.executeSql("CREATE TABLE IF NOT EXISTS USER  (user)"),e.executeSql("CREATE TABLE IF NOT EXISTS LISTS (user_id unique, lists)"),e.executeSql("CREATE TABLE IF NOT EXISTS TODOS (list_id unique, todos)")};this.DATABASE_ACCESS=!0,this.dbShell.transaction(i,function(n){return t(n,e)},function(){return n(e)})},storeUser:function(e,r){if(!this.BROWSER_SUPPORT)return n(r);var s=function(t){t.executeSql("DELETE FROM USER",null,function(){var n="INSERT INTO USER (user) VALUES (?);";e=JSON.stringify(e),e=i(e),t.executeSql(n,[e])})};this.dbShell.transaction(s,function(e){return t(e,r)},function(){return n(r)})},fetchUser:function(e){if(!this.BROWSER_SUPPORT)return n(e);var i=function(t,n){if(n.rows.length>0){var i=n.rows.item(0).user;i=r(i);try{i=JSON.parse(i)}catch(s){return e("Could not parse JSON: "+i,null)}e(null,i)}else e("NO USER FOUND IN LOCAL DATABASE",null)};this.dbShell.transaction(function(e){var t="SELECT * FROM USER";e.executeSql(t,[],i)},function(n){return t(n,e)},function(){return n()})},storeListsForUser:function(e,i,r){if(!this.BROWSER_SUPPORT)return n(r);if(!e)return t("no user id : ".userID,r);var s=function(t){t.executeSql("DELETE FROM LISTS WHERE user_id=?",[e],function(){var n="INSERT INTO LISTS (user_id, lists) VALUES (?, ?);";i=JSON.stringify(i),t.executeSql(n,[e,i])})};this.dbShell.transaction(s,function(e){return t(e,r)},function(){return n(r)})},fetchListsForUser:function(e,i){if(!this.BROWSER_SUPPORT)return n(i);var r=function(e,t){if(t.rows.length>0){var n=t.rows.item(0).lists;try{n=JSON.parse(n)}catch(r){return i("Could not parse JSON: "+n,null)}d.isFunction(i)&&i(null,n)}else d.isFunction(i)&&i(null,null)},s=function(t){var n="SELECT * FROM LISTS WHERE user_id = ?";t.executeSql(n,[e],r)};this.dbShell.transaction(s,function(e){return t(e,i)},function(){return n()})},storeTodosOfList:function(e,i,r){if(!this.BROWSER_SUPPORT)return n(r);var s=function(t){t.executeSql("DELETE FROM TODOS WHERE list_id=?",[e],function(){var n="INSERT INTO TODOS (list_id, todos) VALUES (?, ?);";i=JSON.stringify(i),t.executeSql(n,[e,i])})};this.dbShell.transaction(s,function(e){return t(e,r)},function(){return n(r)})},fetchTodosOfList:function(e,i){if(!this.BROWSER_SUPPORT)return n(i);var r=function(e,t){if(t.rows.length>0){var n=t.rows.item(0).todos;try{n=JSON.parse(n)}catch(r){return i("Could not parse JSON: "+n,null)}d.isFunction(i)&&i(null,n)}else d.isFunction(i)&&i(null,null)},s=function(t){var n="SELECT * FROM TODOS WHERE list_id = ?";t.executeSql(n,[e],r)};this.dbShell.transaction(s,function(e){return t(e,i)},function(){return n()})},__deleteTables:function(e){if(!this.BROWSER_SUPPORT)return n(e);var i=function(t){t.executeSql("DELETE * FROM USER"),t.executeSql("DELETE * FROM LISTS"),t.executeSql("DELETE * FROM TODOS"),d.isFunction(e)&&e(null,!0)};this.dbShell.transaction(i,function(n){return t(n,e)},function(){return n()})},___dropTables:function(e){if(!this.BROWSER_SUPPORT)return n(e);var i=function(e){e.executeSql("DROP TABLE USER"),e.executeSql("DROP TABLE LISTS"),e.executeSql("DROP TABLE TODOS")};this.dbShell.transaction(i,function(n){return t(n,e)},function(){return n(e)})}},f}),define("mobiscroll",["zepto"],function(e){var t=e;return function(e){["width","height"].forEach(function(t){e.fn[t]=function(n){var i,r=document.body,s=document.documentElement,o=t.replace(/./,function(e){return e[0].toUpperCase()});return void 0===n?this[0]==window?s["client"+o]:this[0]==document?Math.max(r["scroll"+o],r["offset"+o],s["client"+o],s["scroll"+o],s["offset"+o]):(i=this.offset())&&i[t]:this.each(function(){var i=e(this);i.css(t,n)})}}),["width","height"].forEach(function(t){var n=t.replace(/./,function(e){return e[0].toUpperCase()});e.fn["outer"+n]=function(e){var i=this;if(i){var r=i[0]["offset"+n],s={width:["left","right"],height:["top","bottom"]};return s[t].forEach(function(t){e&&(r+=parseInt(i.css("margin-"+t),10))}),r}return null}}),["Left","Top"].forEach(function(t,n){function i(e){return e&&"object"==typeof e&&"setInterval"in e}function r(e){return i(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var s="scroll"+t;e.fn[s]=function(t){var i,o;return void 0===t?(i=this[0])?(o=r(i),o?"pageXOffset"in o?o[n?"pageYOffset":"pageXOffset"]:o.document.documentElement[s]||o.document.body[s]:i[s]):null:(this.each(function(){if(o=r(this)){var i=n?e(o).scrollLeft():t,a=n?t:e(o).scrollTop();o.scrollTo(i,a)}else this[s]=t}),void 0)}}),e._extend=e.extend,e.extend=function(){return arguments[0]=arguments[0]||{},e._extend.apply(this,arguments)}}(t),function(e){function t(t,n){function i(t){if(e.isArray(ot.readonly)){var n=e(".dwwl",J).index(t);return ot.readonly[n]}return ot.readonly}function r(e){var t,n='<div class="dw-bf">',i=1;for(t in lt[e])0==i%20&&(n+='</div><div class="dw-bf">'),n+='<div class="dw-li dw-v" data-val="'+t+'" style="height:'+V+"px;line-height:"+V+'px;"><div class="dw-i">'+lt[e][t]+"</div></div>",i++;return n+="</div>"}function a(t){h=e(".dw-li",t).index(e(".dw-v",t).eq(0)),f=e(".dw-li",t).index(e(".dw-v",t).eq(-1)),_=e(".dw-ul",J).index(t),d=V,p=nt,speedUnit=ot.speedUnit}function u(e){var t=ot.headerText;return t?"function"==typeof t?t.call(rt,e):t.replace(/\{value\}/i,e):""}function D(){nt.temp=dt&&null!==nt.val&&nt.val!=st.val()||null===nt.values?ot.parseValue(st.val()||"",nt):nt.values.slice(0),nt.setValue(!0)}function A(t,n,i,r,s){j("validate",[J,n,t])!==!1&&(e(".dw-ul",J).each(function(i){var o=e(this),a=e('.dw-li[data-val="'+nt.temp[i]+'"]',o),l=e(".dw-li",o),u=l.index(a),c=l.length,d=i==n||void 0===n;if(!a.hasClass("dw-v")){for(var h=a,f=a,p=0,m=0;u-p>=0&&!h.hasClass("dw-v");)p++,h=l.eq(u-p);for(;c>u+m&&!f.hasClass("dw-v");)m++,f=l.eq(u+m);(p>m&&m&&2!==r||!p||0>u-p||1==r)&&f.hasClass("dw-v")?(a=f,u+=m):(a=h,u-=p)}(!a.hasClass("dw-sel")||d)&&(nt.temp[i]=a.attr("data-val"),e(".dw-sel",o).removeClass("dw-sel"),a.addClass("dw-sel"),nt.scroll(o,i,u,d?t:.1,d?s:void 0))}),nt.change(i))}function O(t){if(!("inline"==ot.display||q===e(window).width()&&X===e(window).height()&&t||j("onPosition",[J])===!1)){var n,i,r,s,o,a,l,u,c,d,h,f,p=0,m=0,g=e(window).scrollTop(),v=e(".dwwr",J),_=e(".dw",J),b={},y=void 0===ot.anchor?st:ot.anchor;q=e(window).width(),X=e(window).height(),W=window.innerHeight,W=W||X,/modal|bubble/.test(ot.display)&&(e(".dwc",J).each(function(){n=e(this).outerWidth(!0),p+=n,m=n>m?n:m}),n=p>q?m:p,v.width(n)),G=_.outerWidth(),K=_.outerHeight(!0),"modal"==ot.display?(i=(q-G)/2,r=g+(W-K)/2):"bubble"==ot.display?(f=!0,c=e(".dw-arrw-i",J),a=y.offset(),l=a.top,u=a.left,s=y.outerWidth(),o=y.outerHeight(),i=u-(_.outerWidth(!0)-s)/2,i=i>q-G?q-(G+20):i,i=i>=0?i:20,r=l-K,g>r||l>g+W?(_.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),r=l+o):_.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),d=c.outerWidth(),h=u+s/2-(i+(G-d)/2),e(".dw-arr",J).css({left:h>d?d:h})):(b.width="100%","top"==ot.display?r=g:"bottom"==ot.display&&(r=g+W-K)),b.top=0>r?0:r,b.left=i,_.css(b),e(".dw-persp",J).height(0).height(r+K>e(document).height()?r+K:e(document).height()),f&&(r+K>g+W||l>g+W)&&e(window).scrollTop(r+K-W)}}function C(e){if("touchstart"===e.type)E=!0,setTimeout(function(){E=!1},500);else if(E)return E=!1,!1;return!0}function j(t,i){var r;return i.push(nt),e.each([et.defaults,at,n],function(e,n){n[t]&&(r=n[t].apply(rt,i))}),r}function z(e){var t=+e.data("pos"),n=t+1;l(e,n>f?h:n,1,!0)}function U(e){var t=+e.data("pos"),n=t-1;l(e,h>n?f:n,2,!0)}var H,V,Y,J,q,W,X,G,K,Z,Q,et,tt,nt=this,it=e.mobiscroll,rt=t,st=e(rt),ot=I({},F),at={},lt=[],ut={},ct={},dt=st.is("input"),ht=!1;
nt.enable=function(){ot.disabled=!1,dt&&st.prop("disabled",!1)},nt.disable=function(){ot.disabled=!0,dt&&st.prop("disabled",!0)},nt.scroll=function(e,t,n,i,r){function s(e,t,n,i){return n*Math.sin(e/i*(Math.PI/2))+t}function o(){clearInterval(ut[t]),delete ut[t],e.data("pos",n).closest(".dwwl").removeClass("dwa")}var a,l=(H-n)*V,u=M.replace(/^\-/,"").replace("moz","Moz"),c=e[0].style;l==ct[t]&&ut[t]||(i&&l!=ct[t]&&j("onAnimStart",[J,t,i]),ct[t]=l,c[u+"Transition"]="all "+(i?i.toFixed(3):0)+"s ease-out",N?c[u+"Transform"]="translate3d(0,"+l+"px,0)":c.top=l+"px",ut[t]&&o(),i&&void 0!==r?(a=0,e.closest(".dwwl").addClass("dwa"),ut[t]=setInterval(function(){a+=.1,e.data("pos",Math.round(s(a,r,n-r,i))),a>=i&&o()},100)):e.data("pos",n))},nt.setValue=function(t,n,i,r){e.isArray(nt.temp)||(nt.temp=ot.parseValue(nt.temp+"",nt)),ht&&t&&A(i),Y=ot.formatResult(nt.temp),r||(nt.values=nt.temp.slice(0),nt.val=Y),n&&dt&&st.val(Y).trigger("change")},nt.getValues=function(){var e,t=[];for(e in nt._selectedValues)t.push(nt._selectedValues[e]);return t},nt.validate=function(e,t,n,i){A(n,e,!0,t,i)},nt.change=function(t){Y=ot.formatResult(nt.temp),"inline"==ot.display?nt.setValue(!1,t):e(".dwv",J).html(u(Y)),t&&j("onChange",[Y])},nt.changeWheel=function(t,n){if(J){var i,s,o=0,a=t.length;for(i in ot.wheels)for(s in ot.wheels[i]){if(e.inArray(o,t)>-1&&(lt[o]=ot.wheels[i][s],e(".dw-ul",J).eq(o).html(r(o)),a--,!a))return O(),A(n,void 0,!0),void 0;o++}}},nt.isVisible=function(){return ht},nt.tap=function(e,t){var n,i;ot.tap&&e.bind("touchstart",function(e){e.preventDefault(),n=s(e,"X"),i=s(e,"Y")}).bind("touchend",function(e){20>Math.abs(s(e,"X")-n)&&20>Math.abs(s(e,"Y")-i)&&t.call(this,e),k=!0,setTimeout(function(){k=!1},300)}),e.bind("click",function(e){k||t.call(this,e)})},nt.show=function(t){if(ot.disabled||ht)return!1;"top"==ot.display&&(Z="slidedown"),"bottom"==ot.display&&(Z="slideup"),D(),j("onBeforeShow",[]);var n,o,u=0,d="";Z&&!t&&(d="dw-"+Z+" dw-in");var h='<div class="dw-trans '+ot.theme+" dw-"+ot.display+" dw"+M+'">'+("inline"==ot.display?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dw-persp"><div class="dwo"></div><div class="dw dwbg '+d+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(ot.headerText?'<div class="dwv"></div>':""));for(n=0;ot.wheels.length>n;n++){h+='<div class="dwc'+("scroller"!=ot.mode?" dwpm":" dwsc")+(ot.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';for(o in ot.wheels[n])lt[u]=ot.wheels[n][o],h+='<td><div class="dwwl dwrc dwwl'+u+'">'+("scroller"!=ot.mode?'<div class="dwwb dwwbp" style="height:'+V+"px;line-height:"+V+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+V+"px;line-height:"+V+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+o+'</div><div class="dwww"><div class="dww" style="height:'+ot.rows*V+"px;min-width:"+ot.width+'px;"><div class="dw-ul">',h+=r(u),h+='</div><div class="dwwol"></div></div><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',u++;h+="</tr></table></div></div>"}h+=("inline"!=ot.display?'<div class="dwbc'+(ot.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+ot.setText+"</span></span>"+(ot.button3?'<span class="dwbw dwb-n"><span class="dwb">'+ot.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+ot.cancelText+"</span></span></div></div>":'<div class="dwcc"></div>')+"</div></div></div>",J=e(h),A(),j("onMarkupReady",[J]),"inline"!=ot.display?(J.appendTo("body"),setTimeout(function(){J.removeClass("dw-trans").find(".dw").removeClass(d)},350)):st.is("div")?st.html(J):J.insertAfter(st),j("onMarkupInserted",[J]),ht=!0,et.init(J,nt),"inline"!=ot.display&&(nt.tap(e(".dwb-s span",J),function(){nt.hide(!1,"set")!==!1&&(nt.setValue(!1,!0),j("onSelect",[nt.val]))}),nt.tap(e(".dwb-c span",J),function(){nt.cancel()}),ot.button3&&nt.tap(e(".dwb-n span",J),ot.button3),ot.scrollLock&&J.bind("touchmove",function(e){W>=K&&q>=G&&e.preventDefault()}),e("input,select,button").each(function(){e(this).prop("disabled")||e(this).addClass("dwtd").prop("disabled",!0)}),O(),e(window).bind("orientationchange.dw resize.dw",function(){clearTimeout(Q),Q=setTimeout(function(){O(!0)},100)})),J.delegate(".dwwl","DOMMouseScroll mousewheel",function(t){if(!i(this)){t.preventDefault(),t=t.originalEvent;var n=t.wheelDelta?t.wheelDelta/120:t.detail?-t.detail/3:0,r=e(".dw-ul",this),s=+r.data("pos"),o=Math.round(s-n);a(r),l(r,o,0>n?1:2)}}).delegate(".dwb, .dwwb",P,function(){e(this).addClass("dwb-a")}).delegate(".dwwb",P,function(t){t.stopPropagation(),t.preventDefault();var n=e(this).closest(".dwwl");if(C(t)&&!i(n)&&!n.hasClass("dwa")){g=!0;var r=n.find(".dw-ul"),s=e(this).hasClass("dwwbp")?z:U;a(r),clearInterval(c),c=setInterval(function(){s(r)},ot.delay),s(r)}}).delegate(".dwwl",P,function(t){t.preventDefault(),!C(t)||m||i(this)||g||(m=!0,e(document).bind(B,R),v=e(".dw-ul",this),S="clickpick"!=ot.mode,x=+v.data("pos"),a(v),T=void 0!==ut[_],b=s(t,"Y"),w=new Date,y=b,nt.scroll(v,_,x,.001),S&&v.closest(".dwwl").addClass("dwa"))}),j("onShow",[J,Y])},nt.hide=function(t,n){return ht&&j("onClose",[Y,n])!==!1?(e(".dwtd").prop("disabled",!1).removeClass("dwtd"),st.blur(),J&&("inline"!=ot.display&&Z&&!t?(J.addClass("dw-trans").find(".dw").addClass("dw-"+Z+" dw-out"),setTimeout(function(){J.remove(),J=null},350)):(J.remove(),J=null),ht=!1,ct={},e(window).unbind(".dw")),void 0):!1},nt.cancel=function(){nt.hide(!1,"cancel")!==!1&&j("onCancel",[nt.val])},nt.init=function(e){et=I({defaults:{},init:L},it.themes[e.theme||ot.theme]),tt=it.i18n[e.lang||ot.lang],I(n,e),I(ot,et.defaults,tt,n),nt.settings=ot,st.unbind(".dw");var t=it.presets[ot.preset];t&&(at=t.call(rt,nt),I(ot,at,n),I($,at.methods)),H=Math.floor(ot.rows/2),V=ot.height,Z=ot.animate,void 0!==st.data("dwro")&&(rt.readOnly=o(st.data("dwro"))),ht&&nt.hide(),"inline"==ot.display?nt.show():(D(),dt&&ot.showOnFocus&&(st.data("dwro",rt.readOnly),rt.readOnly=!0,st.bind("focus.dw",function(){nt.show()})))},nt.trigger=function(e,t){return j(e,t)},nt.values=null,nt.val=null,nt.temp=null,nt._selectedValues={},nt.init(n)}function n(e){var t;for(t in e)if(void 0!==C[e[t]])return!0;return!1}function i(){var e,t=["Webkit","Moz","O","ms"];for(e in t)if(n([t[e]+"Transform"]))return"-"+t[e].toLowerCase();return""}function r(e){return D[e.id]}function s(e,t){var n=e.originalEvent,i=e.changedTouches;return i||n&&n.changedTouches?n?n.changedTouches[0]["page"+t]:i[0]["page"+t]:e["page"+t]}function o(e){return e===!0||"true"==e}function a(e,t,n){return e=e>n?n:e,e=t>e?t:e}function l(t,n,i,r,s){n=a(n,h,f);var o=e(".dw-li",t).eq(n),l=void 0===s?n:s,u=_,c=r?n==l?.1:Math.abs((n-l)*p.settings.timeUnit):0;p.temp[u]=o.attr("data-val"),p.scroll(t,u,n,c,s),setTimeout(function(){p.validate(u,i,c,s)},10)}function u(e,t,n){return $[t]?$[t].apply(e,Array.prototype.slice.call(n,1)):"object"==typeof t?$.init.call(e,t):e}var c,d,h,f,p,m,g,v,_,b,y,w,x,T,S,k,E,D={},L=function(){},A=new Date,O=A.getTime(),C=document.createElement("modernizr").style,N=n(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),M=i(),I=e.extend,P="touchstart mousedown",B="touchmove mousemove",j="touchend mouseup",R=function(e){S&&(e.preventDefault(),y=s(e,"Y"),p.scroll(v,_,a(x+(b-y)/d,h-1,f+1))),T=!0},F={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:!0,tap:!0,speedUnit:.0012,timeUnit:.1,formatResult:function(e){return e.join(" ")},parseValue:function(e,t){var n,i,r,s=t.settings.wheels,o=e.split(" "),a=[],l=0;for(n=0;s.length>n;n++)for(i in s[n]){if(void 0!==s[n][i][o[l]])a.push(o[l]);else for(r in s[n][i]){a.push(r);break}l++}return a}},$={init:function(e){return void 0===e&&(e={}),this.each(function(){this.id||(O+=1,this.id="scoller"+O),D[this.id]=new t(this,e)})},enable:function(){return this.each(function(){var e=r(this);e&&e.enable()})},disable:function(){return this.each(function(){var e=r(this);e&&e.disable()})},isDisabled:function(){var e=r(this[0]);return e?e.settings.disabled:void 0},isVisible:function(){var e=r(this[0]);return e?e.isVisible():void 0},option:function(e,t){return this.each(function(){var n=r(this);if(n){var i={};"object"==typeof e?i=e:i[e]=t,n.init(i)}})},setValue:function(e,t,n,i){return this.each(function(){var s=r(this);s&&(s.temp=e,s.setValue(!0,t,n,i))})},getInst:function(){return r(this[0])},getValue:function(){var e=r(this[0]);return e?e.values:void 0},getValues:function(){var e=r(this[0]);return e?e.getValues():void 0},show:function(){var e=r(this[0]);return e?e.show():void 0},hide:function(){return this.each(function(){var e=r(this);e&&e.hide()})},destroy:function(){return this.each(function(){var t=r(this);t&&(t.hide(),e(this).unbind(".dw"),delete D[this.id],e(this).is("input")&&(this.readOnly=o(e(this).data("dwro"))))})}};e(document).bind(j,function(){if(m){var t,n,i,r=new Date-w,s=a(x+(b-y)/d,h-1,f+1),o=v.offset().top;if(300>r?(t=(y-b)/r,n=t*t/p.settings.speedUnit,0>y-b&&(n=-n)):n=y-b,i=Math.round(x-n/d),!n&&!T){var u=Math.floor((y-o)/d),_=e(".dw-li",v).eq(u),k=S;p.trigger("onValueTap",[_])!==!1?i=u:k=!0,k&&(_.addClass("dw-hl"),setTimeout(function(){_.removeClass("dw-hl")},200))}S&&l(v,i,0,!0,Math.round(s)),m=!1,v=null,e(document).unbind(B,R)}g&&(clearInterval(c),g=!1),e(".dwb-a").removeClass("dwb-a")}).bind("mouseover mouseup mousedown click",function(e){return k?(e.stopPropagation(),e.preventDefault(),!1):void 0}),e.fn.mobiscroll=function(t){return I(this,e.mobiscroll.shorts),u(this,t,arguments)},e.mobiscroll=e.mobiscroll||{setDefaults:function(e){I(F,e)},presetShort:function(e){this.shorts[e]=function(t){return u(this,I(t,{preset:e}),arguments)}},shorts:{},presets:{},themes:{},i18n:{}},e.scroller=e.scroller||e.mobiscroll,e.fn.scroller=e.fn.scroller||e.fn.mobiscroll}(t),function(e){var t=e.mobiscroll,n=new Date,i={dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",startYear:n.getFullYear()-100,endYear:n.getFullYear()+1,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortYearCutoff:"+10",monthText:"Month",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",secText:"Seconds",ampmText:"&nbsp;",nowText:"Now",showNow:!1,stepHour:1,stepMinute:1,stepSecond:1,separator:" "},r=function(n){function r(e,t,n){return void 0!==x[t]?+e[x[t]]:void 0!==n?n:C[T[t]]?C[T[t]]():T[t](C)}function s(e,t){return Math.floor(e/t)*t}function o(e){var t=e.getHours();return t=A&&t>=12?t-12:t,s(t,N)}function a(e){return s(e.getMinutes(),M)}function l(e){return s(e.getSeconds(),I)}function u(e){return L&&e.getHours()>11?1:0}function c(e){var t=r(e,"h",0);return new Date(r(e,"y"),r(e,"m"),r(e,"d",1),r(e,"a")?t+12:t,r(e,"i",0),r(e,"s",0))}var d,h=e(this),f={};if(h.is("input")){switch(h.attr("type")){case"date":d="yy-mm-dd";break;case"datetime":d="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":d="yy-mm-ddTHH:ii:ss";break;case"month":d="yy-mm",f.dateOrder="mmyy";break;case"time":d="HH:ii:ss"}var p=h.attr("min"),m=h.attr("max");p&&(f.minDate=t.parseDate(d,p)),m&&(f.maxDate=t.parseDate(d,m))}var g,v,_=e.extend({},i,f,n.settings),b=0,y=[],w=[],x={},T={y:"getFullYear",m:"getMonth",d:"getDate",h:o,i:a,s:l,a:u},S=_.preset,k=_.dateOrder,E=_.timeWheels,D=k.match(/D/),L=E.match(/a/i),A=E.match(/h/),O="datetime"==S?_.dateFormat+_.separator+_.timeFormat:"time"==S?_.timeFormat:_.dateFormat,C=new Date,N=_.stepHour,M=_.stepMinute,I=_.stepSecond,P=_.minDate||new Date(_.startYear,0,1),B=_.maxDate||new Date(_.endYear,11,31,23,59,59);if(n.settings=_,d=d||O,S.match(/date/i)){e.each(["y","m","d"],function(e,t){g=k.search(RegExp(t,"i")),g>-1&&w.push({o:g,v:t})}),w.sort(function(e,t){return e.o>t.o?1:-1}),e.each(w,function(e,t){x[t.v]=e});var j={};for(v=0;3>v;v++)if(v==x.y){b++,j[_.yearText]={};var R=P.getFullYear(),F=B.getFullYear();for(g=R;F>=g;g++)j[_.yearText][g]=k.match(/yy/i)?g:(g+"").substr(2,2)}else if(v==x.m)for(b++,j[_.monthText]={},g=0;12>g;g++){var $=k.replace(/[dy]/gi,"").replace(/mm/,9>g?"0"+(g+1):g+1).replace(/m/,g+1);j[_.monthText][g]=$.match(/MM/)?$.replace(/MM/,'<span class="dw-mon">'+_.monthNames[g]+"</span>"):$.replace(/M/,'<span class="dw-mon">'+_.monthNamesShort[g]+"</span>")}else if(v==x.d)for(b++,j[_.dayText]={},g=1;32>g;g++)j[_.dayText][g]=k.match(/dd/i)&&10>g?"0"+g:g;y.push(j)}if(S.match(/time/i)){for(w=[],e.each(["h","i","s","a"],function(e,t){e=E.search(RegExp(t,"i")),e>-1&&w.push({o:e,v:t})}),w.sort(function(e,t){return e.o>t.o?1:-1}),e.each(w,function(e,t){x[t.v]=b+e}),j={},v=b;b+4>v;v++)if(v==x.h)for(b++,j[_.hourText]={},g=0;(A?12:24)>g;g+=N)j[_.hourText][g]=A&&0==g?12:E.match(/hh/i)&&10>g?"0"+g:g;else if(v==x.i)for(b++,j[_.minuteText]={},g=0;60>g;g+=M)j[_.minuteText][g]=E.match(/ii/)&&10>g?"0"+g:g;else if(v==x.s)for(b++,j[_.secText]={},g=0;60>g;g+=I)j[_.secText][g]=E.match(/ss/)&&10>g?"0"+g:g;else if(v==x.a){b++;var z=E.match(/A/);j[_.ampmText]={0:z?"AM":"am",1:z?"PM":"pm"}}y.push(j)}return n.setDate=function(e,t,n,i){var r;for(r in x)this.temp[x[r]]=e[T[r]]?e[T[r]]():T[r](e);this.setValue(!0,t,n,i)},n.getDate=function(e){return c(e)},{button3Text:_.showNow?_.nowText:void 0,button3:_.showNow?function(){n.setDate(new Date,!1,.3,!0)}:void 0,wheels:y,headerText:function(){return t.formatDate(O,c(n.temp),_)},formatResult:function(e){return t.formatDate(d,c(e),_)},parseValue:function(e){var n,i=new Date,r=[];try{i=t.parseDate(d,e,_)}catch(s){}for(n in x)r[x[n]]=i[T[n]]?i[T[n]]():T[n](i);return r},validate:function(t){var i=n.temp,o={y:P.getFullYear(),m:0,d:1,h:0,i:0,s:0,a:0},a={y:B.getFullYear(),m:11,d:31,h:s(A?11:23,N),i:s(59,M),s:s(59,I),a:1},l=!0,u=!0;e.each(["y","m","d","a","h","i","s"],function(n,s){if(void 0!==x[s]){var c,d,h=o[s],f=a[s],p=31,m=r(i,s),g=e(".dw-ul",t).eq(x[s]);if("d"==s&&(c=r(i,"y"),d=r(i,"m"),p=32-new Date(c,d,32).getDate(),f=p,D&&e(".dw-li",g).each(function(){var t=e(this),n=t.data("val"),i=new Date(c,d,n).getDay(),r=k.replace(/[my]/gi,"").replace(/dd/,10>n?"0"+n:n).replace(/d/,n);e(".dw-i",t).html(r.match(/DD/)?r.replace(/DD/,'<span class="dw-day">'+_.dayNames[i]+"</span>"):r.replace(/D/,'<span class="dw-day">'+_.dayNamesShort[i]+"</span>"))})),l&&P&&(h=P[T[s]]?P[T[s]]():T[s](P)),u&&B&&(f=B[T[s]]?B[T[s]]():T[s](B)),"y"!=s){var v=e(".dw-li",g).index(e('.dw-li[data-val="'+h+'"]',g)),b=e(".dw-li",g).index(e('.dw-li[data-val="'+f+'"]',g));e(".dw-li",g).removeClass("dw-v").slice(v,b+1).addClass("dw-v"),"d"==s&&e(".dw-li",g).removeClass("dw-h").slice(p).addClass("dw-h")}if(h>m&&(m=h),m>f&&(m=f),l&&(l=m==h),u&&(u=m==f),_.invalid&&"d"==s){var y=[];if(_.invalid.dates&&e.each(_.invalid.dates,function(e,t){t.getFullYear()==c&&t.getMonth()==d&&y.push(t.getDate()-1)}),_.invalid.daysOfWeek){var w,S=new Date(c,d,1).getDay();e.each(_.invalid.daysOfWeek,function(e,t){for(w=t-S;p>w;w+=7)w>=0&&y.push(w)})}_.invalid.daysOfMonth&&e.each(_.invalid.daysOfMonth,function(e,t){t=(t+"").split("/"),t[1]?t[0]-1==d&&y.push(t[1]-1):y.push(t[0]-1)}),e.each(y,function(t,n){e(".dw-li",g).eq(n).removeClass("dw-v")})}i[x[s]]=m}})},methods:{getDate:function(t){var n=e(this).mobiscroll("getInst");return n?n.getDate(t?n.temp:n.values):void 0},setDate:function(t,n,i,r){return this.each(function(){var s=e(this).mobiscroll("getInst");s&&s.setDate(t,n,i,r)})}}}};e.each(["date","time","datetime"],function(e,n){t.presets[n]=r,t.presetShort(n)}),t.formatDate=function(t,n,r){if(!n)return null;var s,o=e.extend({},i,r),a=function(e){for(var n=0;t.length>s+1&&t.charAt(s+1)==e;)n++,s++;return n},l=function(e,t,n){var i=""+t;if(a(e))for(;n>i.length;)i="0"+i;return i},u=function(e,t,n,i){return a(e)?i[t]:n[t]},c="",d=!1;for(s=0;t.length>s;s++)if(d)"'"!=t.charAt(s)||a("'")?c+=t.charAt(s):d=!1;else switch(t.charAt(s)){case"d":c+=l("d",n.getDate(),2);break;case"D":c+=u("D",n.getDay(),o.dayNamesShort,o.dayNames);break;case"o":c+=l("o",(n.getTime()-new Date(n.getFullYear(),0,0).getTime())/864e5,3);break;case"m":c+=l("m",n.getMonth()+1,2);break;case"M":c+=u("M",n.getMonth(),o.monthNamesShort,o.monthNames);break;case"y":c+=a("y")?n.getFullYear():(10>n.getYear()%100?"0":"")+n.getYear()%100;break;case"h":var h=n.getHours();c+=l("h",h>12?h-12:0==h?12:h,2);break;case"H":c+=l("H",n.getHours(),2);break;case"i":c+=l("i",n.getMinutes(),2);break;case"s":c+=l("s",n.getSeconds(),2);break;case"a":c+=n.getHours()>11?"pm":"am";break;case"A":c+=n.getHours()>11?"PM":"AM";break;case"'":a("'")?c+="'":d=!0;break;default:c+=t.charAt(s)}return c},t.parseDate=function(t,n,r){var s=new Date;if(!t||!n)return s;n="object"==typeof n?""+n:n+"";var o,a=e.extend({},i,r),l=a.shortYearCutoff,u=s.getFullYear(),c=s.getMonth()+1,d=s.getDate(),h=-1,f=s.getHours(),p=s.getMinutes(),m=0,g=-1,v=!1,_=function(e){var n=t.length>o+1&&t.charAt(o+1)==e;return n&&o++,n},b=function(e){_(e);var t="@"==e?14:"!"==e?20:"y"==e?4:"o"==e?3:2,i=RegExp("^\\d{1,"+t+"}"),r=n.substr(x).match(i);return r?(x+=r[0].length,parseInt(r[0],10)):0},y=function(e,t,i){var r,s=_(e)?i:t;for(r=0;s.length>r;r++)if(n.substr(x,s[r].length).toLowerCase()==s[r].toLowerCase())return x+=s[r].length,r+1;return 0},w=function(){x++},x=0;for(o=0;t.length>o;o++)if(v)"'"!=t.charAt(o)||_("'")?w():v=!1;else switch(t.charAt(o)){case"d":d=b("d");break;case"D":y("D",a.dayNamesShort,a.dayNames);break;case"o":h=b("o");break;case"m":c=b("m");break;case"M":c=y("M",a.monthNamesShort,a.monthNames);break;case"y":u=b("y");break;case"H":f=b("H");break;case"h":f=b("h");break;case"i":p=b("i");break;case"s":m=b("s");break;case"a":g=y("a",["am","pm"],["am","pm"])-1;break;case"A":g=y("A",["am","pm"],["am","pm"])-1;break;case"'":_("'")?w():v=!0;break;default:w()}if(100>u&&(u+=(new Date).getFullYear()-(new Date).getFullYear()%100+(("string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10))>=u?0:-100)),h>-1)for(c=1,d=h;;){var T=32-new Date(u,c-1,32).getDate();if(T>=d)break;c++,d-=T}f=-1==g?f:g&&12>f?f+12:g||12!=f?f:0;var S=new Date(u,c-1,d,f,p,m);if(S.getFullYear()!=u||S.getMonth()+1!=c||S.getDate()!=d)throw"Invalid date";return S}}(t),function(e){var t={inputClass:"",invalid:[],rtl:!1,group:!1,groupLabel:"Groups"};e.mobiscroll.presetShort("select"),e.mobiscroll.presets.select=function(n){function i(e){return e?e.replace(/_/,""):""}function r(){var t,n=0,i={},r=[{}];return f.group?(f.rtl&&(n=1),e("optgroup",p).each(function(t){i["_"+t]=e(this).attr("label")}),r[n]={},r[n][f.groupLabel]=i,t=_,n+=f.rtl?-1:1):t=p,r[n]={},r[n][x]={},e("option",t).each(function(){var t=e(this).attr("value");r[n][x]["_"+t]=e(this).text(),e(this).prop("disabled")&&T.push(t)}),r}function s(e,t){var r=[];if(m){var s=[],a=0;for(a in n._selectedValues)s.push(k[a]),r.push(a);c.val(s.join(", "))}else c.val(e),r=t?i(n.values[l]):null;t&&(o=!0,p.val(r).trigger("change"))}var o,a,l,u,c,d,h=n.settings,f=e.extend({},t,h),p=e(this),m=p.prop("multiple"),g=this.id+"_dummy",v=m?p.val()?p.val()[0]:e("option",p).attr("value"):p.val(),_=p.find('option[value="'+v+'"]').parent(),b=_.index()+"",y=b,w=(e('label[for="'+this.id+'"]').attr("for",g),e('label[for="'+g+'"]')),x=void 0!==f.label?f.label:w.length?w.text():p.attr("name"),T=[],S=[],k={},E=h.readonly;f.group&&!e("optgroup",p).length&&(f.group=!1),f.invalid.length||(f.invalid=T),f.group?f.rtl?(a=1,l=0):(a=0,l=1):(a=-1,l=0),e("#"+g).remove(),c=e('<input type="text" id="'+g+'" class="'+f.inputClass+'" readonly />').insertBefore(p),e("option",p).each(function(){k[e(this).attr("value")]=e(this).text()}),f.showOnFocus&&c.focus(function(){n.show()});var D=p.val()||[],L=0;for(L;D.length>L;L++)n._selectedValues[D[L]]=D[L];return s(k[v]),p.unbind(".dwsel").bind("change.dwsel",function(){o||n.setSelectVal(m?p.val()||[]:[p.val()],!0),o=!1}).hide().closest(".ui-field-contain").trigger("create"),n.setSelectVal=function(t,i,o){if(v=t[0]||e("option",p).attr("value"),m){n._selectedValues={};var a=0;for(a;t.length>a;a++)n._selectedValues[t[a]]=t[a]}if(f.group?(_=p.find('option[value="'+v+'"]').parent(),y=_.index(),n.temp=f.rtl?["_"+v,"_"+_.index()]:["_"+_.index(),"_"+v],y!==b&&(h.wheels=r(),n.changeWheel([l]),b=y+"")):n.temp=["_"+v],n.setValue(!0,i,o),i){var u=m?!0:v!==p.val();s(k[v],u)}},n.getSelectVal=function(e){var t=e?n.temp:n.values;return i(t[l])},{width:50,wheels:d,headerText:!1,multiple:m,anchor:c,formatResult:function(e){return k[i(e[l])]},parseValue:function(){var t=p.val()||[],i=0;if(m)for(n._selectedValues={},i;t.length>i;i++)n._selectedValues[t[i]]=t[i];return v=m?p.val()?p.val()[0]:e("option",p).attr("value"):p.val(),_=p.find('option[value="'+v+'"]').parent(),y=_.index(),b=y+"",f.group&&f.rtl?["_"+v,"_"+y]:f.group?["_"+y,"_"+v]:["_"+v]},validate:function(t,s,o){if(void 0===s&&m){var c=n._selectedValues,d=0;for(d in c)e(".dwwl"+l+' .dw-li[data-val="_'+c[d]+'"]',t).addClass("dw-msel")}if(s===a)if(y=i(n.temp[a]),y!==b){if(_=p.find("optgroup").eq(y),y=_.index(),v=_.find("option").eq(0).val(),v=v||p.val(),h.wheels=r(),f.group)return n.temp=f.rtl?["_"+v,"_"+y]:["_"+y,"_"+v],h.readonly=[f.rtl,!f.rtl],clearTimeout(u),u=setTimeout(function(){n.changeWheel([l]),h.readonly=E,b=y+""},1e3*o),!1}else h.readonly=E;else v=i(n.temp[l]);var g=e(".dw-ul",t).eq(l);e.each(f.invalid,function(t,n){e('.dw-li[data-val="_'+n+'"]',g).removeClass("dw-v")})},onBeforeShow:function(){h.wheels=r(),f.group&&(n.temp=f.rtl?["_"+v,"_"+_.index()]:["_"+_.index(),"_"+v])},onMarkupReady:function(t){if(e(".dwwl"+a,t).bind("mousedown touchstart",function(){clearTimeout(u)}),m){t.addClass("dwms"),e(".dwwl",t).eq(l).addClass("dwwms"),S={};var i;for(i in n._selectedValues)S[i]=n._selectedValues[i]}},onValueTap:function(e){if(m&&e.hasClass("dw-v")&&e.closest(".dw").find(".dw-ul").index(e.closest(".dw-ul"))==l){var t=i(e.attr("data-val"));return e.hasClass("dw-msel")?delete n._selectedValues[t]:n._selectedValues[t]=t,e.toggleClass("dw-msel"),"inline"==f.display&&s(t,!0),!1}},onSelect:function(e){s(e,!0),f.group&&(n.values=null)},onCancel:function(){if(f.group&&(n.values=null),m){n._selectedValues={};var e;for(e in S)n._selectedValues[e]=S[e]}},onChange:function(e){"inline"!=f.display||m||(c.val(e),o=!0,p.val(i(n.temp[l])).trigger("change"))},onClose:function(){c.blur()},methods:{setValue:function(t,n,i){return this.each(function(){var r=e(this).mobiscroll("getInst");r&&(r.setSelectVal?r.setSelectVal(t,n,i):(r.temp=t,r.setValue(!0,n,i)))})},getValue:function(t){var n=e(this).mobiscroll("getInst");return n?n.getSelectVal?n.getSelectVal(t):n.values:void 0}}}}}(t),function(e){e.mobiscroll.themes.ios={defaults:{dateOrder:"MMdyy",rows:5,height:30,width:55,headerText:!1,showLabel:!1,useShortLabels:!0}}}(t),function(e){e.mobiscroll.themes.android={defaults:{dateOrder:"Mddyy",mode:"clickpick",height:50,showLabel:!1}}}(t),function(e){e.mobiscroll.i18n.de=e.extend(e.mobiscroll.i18n.de,{setText:"OK",cancelText:"Abbrechen",dateFormat:"dd.mm.yy",dateOrder:"ddmmyy",dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayText:"Tag",hourText:"Stunde",minuteText:"Minuten",monthNames:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],monthText:"Monat",secText:"Sekunden",timeFormat:"HH:ii",timeWheels:"HHii",yearText:"Jahr",nowText:"Jetzt",wholeText:"Ganze Zahl",fractionText:"Bruchzahl",unitText:"MaÃŸeinheit",labels:["Jahre","Monate","Tage","Stunden","Minuten","Sekunden",""],labelsShort:["Yrs","Mths","Days","Hrs","Mins","Secs",""],startText:"Start",stopText:"Stop",resetText:"Reset",lapText:"Lap",hideText:"Hide"})}(t),function(e){e.mobiscroll.i18n.es=e.extend(e.mobiscroll.i18n.es,{setText:"Aceptar",cancelText:"Cancelar",dateFormat:"dd/mm/yy",dateOrder:"ddmmyy",dayNames:["Domingo","Lunes","Martes","Mi&#xE9;rcoles","Jueves","Viernes","S&#xE1;bado"],dayNamesShort:["Do","Lu","Ma","Mi","Ju","Vi","S&#xE1;"],dayText:"D&#237;a",hourText:"Horas",minuteText:"Minutos",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],monthText:"Mes",secText:"Segundos",timeFormat:"HH:ii",timeWheels:"HHii",yearText:"A&ntilde;o",nowText:"Ahora",wholeText:"Entero",fractionText:"FracciÃ³n",unitText:"Unidad",labels:["AÃ±os","Meses","DÃ­as","Horas","Minutos","Segundos",""],labelsShort:["Yrs","Mths","Days","Hrs","Mins","Secs",""],startText:"Iniciar",stopText:"DetÃ©ngase",resetText:"Reinicializar",lapText:"Lap",hideText:"Esconder"})}(t),e}),window.onerror=function(e,t,n){"use strict";var i="THIS IS A GLOBAL ERROR (window.onerror) --> ",r=e+" "+t+" on line "+n+" ENV: "+__app_config__.ENV+" ua "+navigator.userAgent;return i+=r,log(i),require(["app"],function(e){e.handleError(r,!0)}),"production"===__app_config__.ENV},require(["app","i18next","zepto","lodash","backbone","common","router","models/user","collections/todos","collections/todolists","collections/activities","libs/storage","mobiscroll","JrFork"],function(e,t,n,i,r,s,o,a,l,u,c,d,h,f){"use strict";function p(){return f.Navigator.isAnimating?!1:(e.router.setLastRoute(r.history.fragment),window.history.back(),void 0)}function m(t){t.on(y,".back-btn",function(e){return e.preventDefault(),e.stopPropagation(),s.isScreenLocked()?(s.dialog(__("reallyLeave"),function(e){e&&p()},!0),!1):(p(),!1)}),t.on(y,"a",function(t){var i=n(this),s=i.attr("href");if(i.attr("disabled"))return t.preventDefault(),t.stopPropagation(),!1;if("#"===s)return t.preventDefault(),t.stopPropagation(),!1;if(e.isMobile&&(/http/.test(s)||/https/.test(s)))return e.isIOS?window.open(s,"_system"):e.isAndroid&&navigator.app&&navigator.app.loadUrl(s,{openExternal:!0}),!1;if(e.isBrowser&&(/http/.test(s)||/https/.test(s)))return!0;if(s&&/#/.test(s)&&"#"!==s){t.preventDefault(),e.router.setLastRoute(r.history.fragment);var o=i.hasClass("back-link")?f.Navigator.directions.RIGHT:f.Navigator.directions.LEFT;f.Navigator.navigate(s,{animation:{type:f.Navigator.animations.SLIDE_STACK,direction:o}})}return!1})}function g(e){var t;t=__app_config__.touch?"touchstart":"mousedown",e.on(t,".aog-button",function(){n(this).addClass("pressed")}),e.on(t,".aog-list li:not(.no-link)",function(){n(this).addClass("pressed-list")}),e.on(t,".aog-list li:not(.no-link) a",function(){n(this).parent().addClass("pressed-list")}),t=__app_config__.touch?"touchmove":"mousemove",e.on(t,".aog-list li:not(.no-link), .aog-button",function(){n(this).removeClass("pressed"),n(this).removeClass("pressed-list")}),t=__app_config__.touch?"touchend":"mouseup",e.on(t,".aog-list li:not(.no-link), .aog-button",function(){n(this).removeClass("pressed"),n(this).removeClass("pressed-list")});var i=function(e){var t=n(e.currentTarget);t.addClass("tapped"),setTimeout(function(){return 0===t.length?!1:(t.removeClass("tapped"),void 0)},500)},r=function(e){var t=n(e.currentTarget);t.removeClass("tapped")};t=__app_config__.touch?"touchstart":"mousedown",e.on(t,"header a, .modal-header a",i),t=__app_config__.touch?"touchmove":"mousemove",e.on(t,"header a, .modal-header a",r)}function v(t){if(!e||e.isMobile===!1)return!1;if(e.isIOS&&function(){var e=n("#app-container");e.css("-webkit-backface-visibility","hidden"),e.css("visibility","visible")}(),e.isBrowser)return!1;var i=function(){__app_config__.isPaused=!0,log("---> onPause "),e.socketWrapper&&e.socketWrapper.disconnect(!0)},r=function(){return __app_config__.isPaused=!1,log("---> onResume - app.isLoggedIn? "+(e.isLoggedIn?"yes":"no!")),e.isLoggedIn?(setTimeout(function(){e.fetchUser()},1e3),void 0):!1};document.addEventListener("pause",i,!1),document.addEventListener("resume",r,!1),t.on("click","a",function(e){return e.preventDefault(),!1}),t.on("click","button",function(e){return e.preventDefault(),!1});var s=function(){e&&e.isLoggedIn&&e.router&&e.router.go("todolists")};e.isAndroid&&document.addEventListener("menubutton",s,!1)}function _(){var e,t,n,i=["images/logo.png","images/logo@2.png"];for(n=i.length,t=0;n>t;t++)e=new Image,e.src=i[t]}function b(){var t="1"===s.store.get("is-auth"),i=n(document),l=n("body");e.isIOS=e.isPhonegapAvailable?"ios"===window.device.platform.toLowerCase():!1,e.isAndroid=e.isPhonegapAvailable?"android"===window.device.platform.toLowerCase():!1,e.isIOS||(e.isIOS=e.isiOSBrowser),g(l),v(l),_(l),m(l),e.router=new o(t),!e.isPhonegapAvailable&&e.isPhantomJS&&(__app_config__.router=e.router),e.on("translationsLoaded",e.router.onTranslationsLoaded,e.router),e.initGlobalization();try{e.storage=new d,e.storage.hasBrowserSupport()?(e.storage.openDatabase(),e.storage.initDatabase(),e.router.checkLocalDatabaseAndSync()):e.router.deauthenticateUser()}catch(c){log("DATABASE ERROR: "+c.message)}e.user=new a,e.todolists=new u,r.history.start({pushState:!1}),i.on("ajaxError",function(t,n,i){s.hideLoader();var r=n.status;e.handleError("AJAX ERROR in main.js - (status: "+r+") URL: "+i.url+" RESPONSE: "+n.statusText+" ||| "+i.responseText)}),i.on("ajaxComplete",function(){s.hideLoader()})}window.__=t.t;var y=e.defaultClickEvent;(function(){e.setUserModel(a),e.todosCollectionInstance=l,e.activityCollection=new c})(),function(){n.ajaxSettings.timeout=e.AJAX_TIMEOUT,n.ajaxSettings.beforeSend=function(t){var n="AtOneGo",i="Basic "+s.base64Encode(n+":"+e.API_TOKEN);return t.setRequestHeader("Authorization",i),t.setRequestHeader("Content-Language",e.lang||"en"),e.checkInternetConnection()?void 0:(s.hideLoader(),!1)};var t=r.sync;r.sync=function(e,n,r){r||(r={}),r.crossDomain||(r.crossDomain=!0);var s=i.isFunction(n.url)?n.url():n.url;return log("===== BACKBONE CORS SYNC #"+e.toUpperCase()+" "+s+" "),t(e,n,r)}}(),e.isPhonegapAvailable?(log("------------------> registering deviceready event <------------------"),document.addEventListener("deviceready",b,!1)):(log("------------------> doc.ready <------------------"),n(document).ready(b))}),define("main",function(){}),require.config({deps:["main"],shim:{backbone:{deps:["lodash","zepto"],exports:"Backbone"},mobiscroll:{deps:["zepto"],exports:"Mobiscroll"},cryptojs:{exports:"CryptoJS"}},paths:{libs:"../scripts/libs",zepto:"../scripts/libs/zepto",lodash:"../scripts/libs/lodash",backbone:"../scripts/libs/backbone",text:"../scripts/libs/text",i18next:"../scripts/libs/i18next.amd-1.6.0",moment:"../scripts/libs/moment",mobiscroll:"../scripts/libs/mobiscroll",cryptojs:"../scripts/libs/cryptojs.aes.3.1.2",JrFork:"../scripts/libs/junior_fork"}}),define("config",function(){})})();